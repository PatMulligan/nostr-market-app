import{c as Se,a as S,h as k,x as Rn,P as io,r as K,G as aa,H as jn,F as dt,I as Kt,w as de,o as hn,f as Je,g as Fe,J as Tn,k as In,K as xi,L as Sn,t as ro,M as Bl,N as Fl,O as Yl,Q as Qn,R as ka,S as ir,T as Ul,U as rr,j as La,V as la,b as Le,W as je,X as Ft,Y as so,Z as Yt,$ as oo,a0 as Hl,a1 as Ke,a2 as uo,a3 as zl,n as sr,a4 as or,a5 as Wl,a6 as Va,a7 as Ba,a8 as co,a9 as fo,aa as ur,ab as Fa,ac as cr,ad as dr,ae as fr,af as Sl,ag as hr,ah as Ni,ai as ho,aj as mo,ak as go,al as vo,am as mr,an as wa,ao as yo,ap as Q,aq as on,ar as po,as as bo,at as gr,i as Sa,e as xt,l as _o,d as ko,au as vr,av as wo,aw as So,ax as Co,y as it,ay as yr,az as jt,aA as pr,aB as Cn,p as Mo,aC as jl,aD as br,aE as _r,aF as kr,aG as Do,aH as To,aI as Ri,aJ as qo,aK as Po,aL as $o,aM as Cl,aN as Eo,aO as sl,aP as Io,_ as ht,A as _,B as U,C as f,E as c,D as h,aQ as he,aR as Te,aS as yt,aT as fe,aU as He,aV as ya,aW as Ml,aX as B,aY as nt,aZ as Ge,a_ as lt,a$ as ne,b0 as H,b1 as fn,b2 as Ao,b3 as fa,m as ol,b4 as ul,b5 as Li,z as Dl,b6 as wr,b7 as Oo,b8 as xo,b9 as No,ba as Vi,bb as Ro,bc as Lo,bd as Vo,be as Bo}from"./index.c3a0eaae.js";import{Q as Fo}from"./QResizeObserver.83bdcd7a.js";const Yo=["top","middle","bottom"];var Gt=Se({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Yo.includes(e)}},setup(e,{slots:t}){const n=S(()=>e.align!==void 0?{verticalAlign:e.align}:null),a=S(()=>{const l=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(l!==void 0?` text-${l}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>k("div",{class:a.value,style:n.value,role:"status","aria-label":e.label},Rn(t.default,e.label!==void 0?[e.label]:[]))}});function Ca(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),io.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const Sr={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function Cr({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:a,proxy:l,emit:i}=Fe(),r=K(null);let s=null;function o(g){return r.value===null?!1:g===void 0||g.touches===void 0||g.touches.length<=1}const u={};n===void 0&&(Object.assign(u,{hide(g){l.hide(g)},toggle(g){l.toggle(g),g.qAnchorHandled=!0},toggleKey(g){aa(g,13)===!0&&u.toggle(g)},contextClick(g){l.hide(g),jn(g),dt(()=>{l.show(g),g.qAnchorHandled=!0})},prevent:jn,mobileTouch(g){if(u.mobileCleanup(g),o(g)!==!0)return;l.hide(g),r.value.classList.add("non-selectable");const C=g.target;Kt(u,"anchor",[[C,"touchmove","mobileCleanup","passive"],[C,"touchend","mobileCleanup","passive"],[C,"touchcancel","mobileCleanup","passive"],[r.value,"contextmenu","prevent","notPassive"]]),s=setTimeout(()=>{s=null,l.show(g),g.qAnchorHandled=!0},300)},mobileCleanup(g){r.value.classList.remove("non-selectable"),s!==null&&(clearTimeout(s),s=null),e.value===!0&&g!==void 0&&Ca()}}),n=function(g=a.contextMenu){if(a.noParentEvent===!0||r.value===null)return;let C;g===!0?l.$q.platform.is.mobile===!0?C=[[r.value,"touchstart","mobileTouch","passive"]]:C=[[r.value,"mousedown","hide","passive"],[r.value,"contextmenu","contextClick","notPassive"]]:C=[[r.value,"click","toggle","passive"],[r.value,"keyup","toggleKey","passive"]],Kt(u,"anchor",C)});function d(){Tn(u,"anchor")}function v(g){for(r.value=g;r.value.classList.contains("q-anchor--skip");)r.value=r.value.parentNode;n()}function y(){if(a.target===!1||a.target===""||l.$el.parentNode===null)r.value=null;else if(a.target===!0)v(l.$el.parentNode);else{let g=a.target;if(typeof a.target=="string")try{g=document.querySelector(a.target)}catch{g=void 0}g!=null?(r.value=g.$el||g,n()):(r.value=null,console.error(`Anchor: target "${a.target}" not found`))}}return de(()=>a.contextMenu,g=>{r.value!==null&&(d(),n(g))}),de(()=>a.target,()=>{r.value!==null&&d(),y()}),de(()=>a.noParentEvent,g=>{r.value!==null&&(g===!0?d():n())}),hn(()=>{y(),t!==!0&&a.modelValue===!0&&r.value===null&&i("update:modelValue",!1)}),Je(()=>{s!==null&&clearTimeout(s),d()}),{anchorEl:r,canShow:o,anchorEvents:u}}function Mr(e,t){const n=K(null);let a;function l(s,o){const u=`${o!==void 0?"add":"remove"}EventListener`,d=o!==void 0?o:a;s!==window&&s[u]("scroll",d,In.passive),window[u]("scroll",d,In.passive),a=o}function i(){n.value!==null&&(l(n.value),n.value=null)}const r=de(()=>e.noParentEvent,()=>{n.value!==null&&(i(),t())});return Je(r),{localScrollTarget:n,unconfigureScrollTarget:i,changeScrollEvent:l}}const{notPassiveCapture:Ma}=In,cn=[];function Da(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=xi.length-1;for(;n>=0;){const a=xi[n].$;if(a.type.name==="QTooltip"){n--;continue}if(a.type.name!=="QDialog")break;if(a.props.seamless!==!0)return;n--}for(let a=cn.length-1;a>=0;a--){const l=cn[a];if((l.anchorEl.value===null||l.anchorEl.value.contains(t)===!1)&&(t===document.body||l.innerRef.value!==null&&l.innerRef.value.contains(t)===!1))e.qClickOutside=!0,l.onClickOutside(e);else return}}function Dr(e){cn.push(e),cn.length===1&&(document.addEventListener("mousedown",Da,Ma),document.addEventListener("touchstart",Da,Ma))}function Ta(e){const t=cn.findIndex(n=>n===e);t>-1&&(cn.splice(t,1),cn.length===0&&(document.removeEventListener("mousedown",Da,Ma),document.removeEventListener("touchstart",Da,Ma)))}let Bi,Fi;function qa(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Tr(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const Tl={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{Tl[`${e}#ltr`]=e,Tl[`${e}#rtl`]=e});function Pa(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:Tl[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function Uo(e,t){let{top:n,left:a,right:l,bottom:i,width:r,height:s}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],a-=t[0],i+=t[1],l+=t[0],r+=t[0],s+=t[1]),{top:n,bottom:i,height:s,left:a,right:l,width:r,middle:a+(l-a)/2,center:n+(i-n)/2}}function Ho(e,t,n){let{top:a,left:l}=e.getBoundingClientRect();return a+=t.top,l+=t.left,n!==void 0&&(a+=n[1],l+=n[0]),{top:a,bottom:a+1,height:1,left:l,right:l+1,width:1,middle:l,center:a}}function zo(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function Yi(e,t,n,a){return{top:e[n.vertical]-t[a.vertical],left:e[n.horizontal]-t[a.horizontal]}}function Ql(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{Ql(e,t+1)},10);return}const{targetEl:n,offset:a,anchorEl:l,anchorOrigin:i,selfOrigin:r,absoluteOffset:s,fit:o,cover:u,maxHeight:d,maxWidth:v}=e;if(Sn.is.ios===!0&&window.visualViewport!==void 0){const V=document.body.style,{offsetLeft:E,offsetTop:$}=window.visualViewport;E!==Bi&&(V.setProperty("--q-pe-left",E+"px"),Bi=E),$!==Fi&&(V.setProperty("--q-pe-top",$+"px"),Fi=$)}const{scrollLeft:y,scrollTop:g}=n,C=s===void 0?Uo(l,u===!0?[0,0]:a):Ho(l,s,a);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:v||"100vw",maxHeight:d||"100vh",visibility:"visible"});const{offsetWidth:w,offsetHeight:M}=n,{elWidth:T,elHeight:q}=o===!0||u===!0?{elWidth:Math.max(C.width,w),elHeight:u===!0?Math.max(C.height,M):M}:{elWidth:w,elHeight:M};let p={maxWidth:v,maxHeight:d};(o===!0||u===!0)&&(p.minWidth=C.width+"px",u===!0&&(p.minHeight=C.height+"px")),Object.assign(n.style,p);const b=zo(T,q);let D=Yi(C,b,i,r);if(s===void 0||a===void 0)cl(D,C,b,i,r);else{const{top:V,left:E}=D;cl(D,C,b,i,r);let $=!1;if(D.top!==V){$=!0;const Z=2*a[1];C.center=C.top-=Z,C.bottom-=Z+2}if(D.left!==E){$=!0;const Z=2*a[0];C.middle=C.left-=Z,C.right-=Z+2}$===!0&&(D=Yi(C,b,i,r),cl(D,C,b,i,r))}p={top:D.top+"px",left:D.left+"px"},D.maxHeight!==void 0&&(p.maxHeight=D.maxHeight+"px",C.height>D.maxHeight&&(p.minHeight=p.maxHeight)),D.maxWidth!==void 0&&(p.maxWidth=D.maxWidth+"px",C.width>D.maxWidth&&(p.minWidth=p.maxWidth)),Object.assign(n.style,p),n.scrollTop!==g&&(n.scrollTop=g),n.scrollLeft!==y&&(n.scrollLeft=y)}function cl(e,t,n,a,l){const i=n.bottom,r=n.right,s=ro(),o=window.innerHeight-s,u=document.body.clientWidth;if(e.top<0||e.top+i>o)if(l.vertical==="center")e.top=t[a.vertical]>o/2?Math.max(0,o-i):0,e.maxHeight=Math.min(i,o);else if(t[a.vertical]>o/2){const d=Math.min(o,a.vertical==="center"?t.center:a.vertical===l.vertical?t.bottom:t.top);e.maxHeight=Math.min(i,d),e.top=Math.max(0,d-i)}else e.top=Math.max(0,a.vertical==="center"?t.center:a.vertical===l.vertical?t.top:t.bottom),e.maxHeight=Math.min(i,o-e.top);if(e.left<0||e.left+r>u)if(e.maxWidth=Math.min(r,u),l.horizontal==="middle")e.left=t[a.horizontal]>u/2?Math.max(0,u-r):0;else if(t[a.horizontal]>u/2){const d=Math.min(u,a.horizontal==="middle"?t.middle:a.horizontal===l.horizontal?t.right:t.left);e.maxWidth=Math.min(r,d),e.left=Math.max(0,d-e.maxWidth)}else e.left=Math.max(0,a.horizontal==="middle"?t.middle:a.horizontal===l.horizontal?t.left:t.right),e.maxWidth=Math.min(r,u-e.left)}var Qt=Se({name:"QTooltip",inheritAttrs:!1,props:{...Sr,...Bl,...Fl,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:qa},self:{type:String,default:"top middle",validator:qa},offset:{type:Array,default:()=>[14,14],validator:Tr},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Yl],setup(e,{slots:t,emit:n,attrs:a}){let l,i;const r=Fe(),{proxy:{$q:s}}=r,o=K(null),u=K(!1),d=S(()=>Pa(e.anchor,s.lang.rtl)),v=S(()=>Pa(e.self,s.lang.rtl)),y=S(()=>e.persistent!==!0),{registerTick:g,removeTick:C}=Qn(),{registerTimeout:w}=ka(),{transitionProps:M,transitionStyle:T}=ir(e),{localScrollTarget:q,changeScrollEvent:p,unconfigureScrollTarget:b}=Mr(e,N),{anchorEl:D,canShow:V,anchorEvents:E}=Cr({showing:u,configureAnchorEl:Ve}),{show:$,hide:Z}=Ul({showing:u,canShow:V,handleShow:x,handleHide:se,hideOnRouteChange:y,processOnMount:!0});Object.assign(E,{delayShow:X,delayHide:qe});const{showPortal:J,hidePortal:ce,renderPortal:Ee}=rr(r,o,W,"tooltip");if(s.platform.is.mobile===!0){const z={anchorEl:D,innerRef:o,onClickOutside(_e){return Z(_e),_e.target.classList.contains("q-dialog__backdrop")&&je(_e),!0}},ge=S(()=>e.modelValue===null&&e.persistent!==!0&&u.value===!0);de(ge,_e=>{(_e===!0?Dr:Ta)(z)}),Je(()=>{Ta(z)})}function x(z){J(),g(()=>{i=new MutationObserver(()=>we()),i.observe(o.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),we(),N()}),l===void 0&&(l=de(()=>s.screen.width+"|"+s.screen.height+"|"+e.self+"|"+e.anchor+"|"+s.lang.rtl,we)),w(()=>{J(!0),n("show",z)},e.transitionDuration)}function se(z){C(),ce(),ye(),w(()=>{ce(!0),n("hide",z)},e.transitionDuration)}function ye(){i!==void 0&&(i.disconnect(),i=void 0),l!==void 0&&(l(),l=void 0),b(),Tn(E,"tooltipTemp")}function we(){Ql({targetEl:o.value,offset:e.offset,anchorEl:D.value,anchorOrigin:d.value,selfOrigin:v.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function X(z){if(s.platform.is.mobile===!0){Ca(),document.body.classList.add("non-selectable");const ge=D.value,_e=["touchmove","touchcancel","touchend","click"].map(ee=>[ge,ee,"delayHide","passiveCapture"]);Kt(E,"tooltipTemp",_e)}w(()=>{$(z)},e.delay)}function qe(z){s.platform.is.mobile===!0&&(Tn(E,"tooltipTemp"),Ca(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),w(()=>{Z(z)},e.hideDelay)}function Ve(){if(e.noParentEvent===!0||D.value===null)return;const z=s.platform.is.mobile===!0?[[D.value,"touchstart","delayShow","passive"]]:[[D.value,"mouseenter","delayShow","passive"],[D.value,"mouseleave","delayHide","passive"]];Kt(E,"anchor",z)}function N(){if(D.value!==null||e.scrollTarget!==void 0){q.value=La(D.value,e.scrollTarget);const z=e.noParentEvent===!0?we:Z;p(q.value,z)}}function A(){return u.value===!0?k("div",{...a,ref:o,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",a.class],style:[a.style,T.value],role:"tooltip"},Le(t.default)):null}function W(){return k(la,M.value,A)}return Je(ye),Object.assign(r.proxy,{updatePosition:we}),Ee}});const Wo={xs:8,sm:10,md:14,lg:20,xl:24};var ia=Se({name:"QChip",props:{...Ft,...so,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:n}){const{proxy:{$q:a}}=Fe(),l=Yt(e,a),i=oo(e,Wo),r=S(()=>e.selected===!0||e.icon!==void 0),s=S(()=>e.selected===!0?e.iconSelected||a.iconSet.chip.selected:e.icon),o=S(()=>e.iconRemove||a.iconSet.chip.remove),u=S(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),d=S(()=>{const M=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(M?` text-${M} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(u.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(l.value===!0?" q-chip--dark q-dark":"")}),v=S(()=>{const M=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},T={...M,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||a.lang.label.remove};return{chip:M,remove:T}});function y(M){M.keyCode===13&&g(M)}function g(M){e.disable||(n("update:selected",!e.selected),n("click",M))}function C(M){(M.keyCode===void 0||M.keyCode===13)&&(je(M),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function w(){const M=[];u.value===!0&&M.push(k("div",{class:"q-focus-helper"})),r.value===!0&&M.push(k(Ke,{class:"q-chip__icon q-chip__icon--left",name:s.value}));const T=e.label!==void 0?[k("div",{class:"ellipsis"},[e.label])]:void 0;return M.push(k("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},uo(t.default,T))),e.iconRight&&M.push(k(Ke,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&M.push(k(Ke,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:o.value,...v.value.remove,onClick:C,onKeyup:C})),M}return()=>{if(e.modelValue===!1)return;const M={class:d.value,style:i.value};return u.value===!0&&Object.assign(M,v.value.chip,{onClick:g,onKeyup:y}),Hl("div",M,w(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[zl,e.ripple]])}}}),Nt=Se({name:"QList",props:{...Ft,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:t}){const n=Fe(),a=Yt(e,n.proxy.$q),l=S(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(a.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>k(e.tag,{class:l.value},Le(t.default))}});const jo=["horizontal","vertical","cell","none"];var Qo=Se({name:"QMarkupTable",props:{...Ft,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>jo.includes(e)}},setup(e,{slots:t}){const n=Fe(),a=Yt(e,n.proxy.$q),l=S(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(a.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>k("div",{class:l.value},[k("table",{class:"q-table"},Le(t.default))])}});function Ko(e,t){return k("div",e,[k("table",{class:"q-table"},t)])}let Jn=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,Jn=e.scrollLeft>=0,e.remove()}const vt=1e3,Go=["start","center","end","start-force","center-force","end-force"],qr=Array.prototype.filter,Zo=window.getComputedStyle(document.body).overflowAnchor===void 0?sr:function(e,t){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const n=e.children||[];qr.call(n,l=>l.dataset&&l.dataset.qVsAnchor!==void 0).forEach(l=>{delete l.dataset.qVsAnchor});const a=n[t];a&&a.dataset&&(a.dataset.qVsAnchor="")}))};function qn(e,t){return e+t}function dl(e,t,n,a,l,i,r,s){const o=e===window?document.scrollingElement||document.documentElement:e,u=l===!0?"offsetWidth":"offsetHeight",d={scrollStart:0,scrollViewSize:-r-s,scrollMaxSize:0,offsetStart:-r,offsetEnd:-s};if(l===!0?(e===window?(d.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,d.scrollViewSize+=document.documentElement.clientWidth):(d.scrollStart=o.scrollLeft,d.scrollViewSize+=o.clientWidth),d.scrollMaxSize=o.scrollWidth,i===!0&&(d.scrollStart=(Jn===!0?d.scrollMaxSize-d.scrollViewSize:0)-d.scrollStart)):(e===window?(d.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,d.scrollViewSize+=document.documentElement.clientHeight):(d.scrollStart=o.scrollTop,d.scrollViewSize+=o.clientHeight),d.scrollMaxSize=o.scrollHeight),n!==null)for(let v=n.previousElementSibling;v!==null;v=v.previousElementSibling)v.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetStart+=v[u]);if(a!==null)for(let v=a.nextElementSibling;v!==null;v=v.nextElementSibling)v.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetEnd+=v[u]);if(t!==e){const v=o.getBoundingClientRect(),y=t.getBoundingClientRect();l===!0?(d.offsetStart+=y.left-v.left,d.offsetEnd-=y.width):(d.offsetStart+=y.top-v.top,d.offsetEnd-=y.height),e!==window&&(d.offsetStart+=d.scrollStart),d.offsetEnd+=d.scrollMaxSize-d.offsetStart}return d}function Ui(e,t,n,a){t==="end"&&(t=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(a===!0&&(t=(Jn===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-t),window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t):n===!0?(a===!0&&(t=(Jn===!0?e.scrollWidth-e.offsetWidth:0)-t),e.scrollLeft=t):e.scrollTop=t}function Fn(e,t,n,a){if(n>=a)return 0;const l=t.length,i=Math.floor(n/vt),r=Math.floor((a-1)/vt)+1;let s=e.slice(i,r).reduce(qn,0);return n%vt!==0&&(s-=t.slice(i*vt,n).reduce(qn,0)),a%vt!==0&&a!==l&&(s-=t.slice(a,r*vt).reduce(qn,0)),s}const Jo={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Pr={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Jo};function $r({virtualScrollLength:e,getVirtualScrollTarget:t,getVirtualScrollEl:n,virtualScrollItemSizeComputed:a}){const l=Fe(),{props:i,emit:r,proxy:s}=l,{$q:o}=s;let u,d,v,y=[],g;const C=K(0),w=K(0),M=K({}),T=K(null),q=K(null),p=K(null),b=K({from:0,to:0}),D=S(()=>i.tableColspan!==void 0?i.tableColspan:100);a===void 0&&(a=S(()=>i.virtualScrollItemSize));const V=S(()=>a.value+";"+i.virtualScrollHorizontal),E=S(()=>V.value+";"+i.virtualScrollSliceRatioBefore+";"+i.virtualScrollSliceRatioAfter);de(E,()=>{we()}),de(V,$);function $(){ye(d,!0)}function Z(A){ye(A===void 0?d:A)}function J(A,W){const z=t();if(z==null||z.nodeType===8)return;const ge=dl(z,n(),T.value,q.value,i.virtualScrollHorizontal,o.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd);v!==ge.scrollViewSize&&we(ge.scrollViewSize),Ee(z,ge,Math.min(e.value-1,Math.max(0,parseInt(A,10)||0)),0,Go.indexOf(W)>-1?W:d>-1&&A>d?"end":"start")}function ce(){const A=t();if(A==null||A.nodeType===8)return;const W=dl(A,n(),T.value,q.value,i.virtualScrollHorizontal,o.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd),z=e.value-1,ge=W.scrollMaxSize-W.offsetStart-W.offsetEnd-w.value;if(u===W.scrollStart)return;if(W.scrollMaxSize<=0){Ee(A,W,0,0);return}v!==W.scrollViewSize&&we(W.scrollViewSize),x(b.value.from);const _e=Math.floor(W.scrollMaxSize-Math.max(W.scrollViewSize,W.offsetEnd)-Math.min(g[z],W.scrollViewSize/2));if(_e>0&&Math.ceil(W.scrollStart)>=_e){Ee(A,W,z,W.scrollMaxSize-W.offsetEnd-y.reduce(qn,0));return}let ee=0,ae=W.scrollStart-W.offsetStart,Be=ae;if(ae<=ge&&ae+W.scrollViewSize>=C.value)ae-=C.value,ee=b.value.from,Be=ae;else for(let O=0;ae>=y[O]&&ee<z;O++)ae-=y[O],ee+=vt;for(;ae>0&&ee<z;)ae-=g[ee],ae>-W.scrollViewSize?(ee++,Be=ae):Be=g[ee]+ae;Ee(A,W,ee,Be)}function Ee(A,W,z,ge,_e){const ee=typeof _e=="string"&&_e.indexOf("-force")>-1,ae=ee===!0?_e.replace("-force",""):_e,Be=ae!==void 0?ae:"start";let O=Math.max(0,z-M.value[Be]),xe=O+M.value.total;xe>e.value&&(xe=e.value,O=Math.max(0,xe-M.value.total)),u=W.scrollStart;const wt=O!==b.value.from||xe!==b.value.to;if(wt===!1&&ae===void 0){qe(z);return}const{activeElement:$t}=document,ut=p.value;wt===!0&&ut!==null&&ut!==$t&&ut.contains($t)===!0&&(ut.addEventListener("focusout",se),setTimeout(()=>{ut!==null&&ut.removeEventListener("focusout",se)})),Zo(ut,z-O);const Et=ae!==void 0?g.slice(O,z).reduce(qn,0):0;if(wt===!0){const St=xe>=b.value.from&&O<=b.value.to?b.value.to:xe;b.value={from:O,to:St},C.value=Fn(y,g,0,O),w.value=Fn(y,g,xe,e.value),requestAnimationFrame(()=>{b.value.to!==xe&&u===W.scrollStart&&(b.value={from:b.value.from,to:xe},w.value=Fn(y,g,xe,e.value))})}requestAnimationFrame(()=>{if(u!==W.scrollStart)return;wt===!0&&x(O);const St=g.slice(O,z).reduce(qn,0),zt=St+W.offsetStart+C.value,gn=zt+g[z];let Wt=zt+ge;if(ae!==void 0){const vn=St-Et,ze=W.scrollStart+vn;Wt=ee!==!0&&ze<zt&&gn<ze+W.scrollViewSize?ze:ae==="end"?gn-W.scrollViewSize:zt-(ae==="start"?0:Math.round((W.scrollViewSize-g[z])/2))}u=Wt,Ui(A,Wt,i.virtualScrollHorizontal,o.lang.rtl),qe(z)})}function x(A){const W=p.value;if(W){const z=qr.call(W.children,O=>O.classList&&O.classList.contains("q-virtual-scroll--skip")===!1),ge=z.length,_e=i.virtualScrollHorizontal===!0?O=>O.getBoundingClientRect().width:O=>O.offsetHeight;let ee=A,ae,Be;for(let O=0;O<ge;){for(ae=_e(z[O]),O++;O<ge&&z[O].classList.contains("q-virtual-scroll--with-prev")===!0;)ae+=_e(z[O]),O++;Be=ae-g[ee],Be!==0&&(g[ee]+=Be,y[Math.floor(ee/vt)]+=Be),ee++}}}function se(){p.value!==null&&p.value!==void 0&&p.value.focus()}function ye(A,W){const z=1*a.value;(W===!0||Array.isArray(g)===!1)&&(g=[]);const ge=g.length;g.length=e.value;for(let ee=e.value-1;ee>=ge;ee--)g[ee]=z;const _e=Math.floor((e.value-1)/vt);y=[];for(let ee=0;ee<=_e;ee++){let ae=0;const Be=Math.min((ee+1)*vt,e.value);for(let O=ee*vt;O<Be;O++)ae+=g[O];y.push(ae)}d=-1,u=void 0,C.value=Fn(y,g,0,b.value.from),w.value=Fn(y,g,b.value.to,e.value),A>=0?(x(b.value.from),dt(()=>{J(A)})):Ve()}function we(A){if(A===void 0&&typeof window!="undefined"){const ae=t();ae!=null&&ae.nodeType!==8&&(A=dl(ae,n(),T.value,q.value,i.virtualScrollHorizontal,o.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd).scrollViewSize)}v=A;const W=parseFloat(i.virtualScrollSliceRatioBefore)||0,z=parseFloat(i.virtualScrollSliceRatioAfter)||0,ge=1+W+z,_e=A===void 0||A<=0?1:Math.ceil(A/a.value),ee=Math.max(1,_e,Math.ceil((i.virtualScrollSliceSize>0?i.virtualScrollSliceSize:10)/ge));M.value={total:Math.ceil(ee*ge),start:Math.ceil(ee*W),center:Math.ceil(ee*(.5+W)),end:Math.ceil(ee*(1+W)),view:_e}}function X(A,W){const z=i.virtualScrollHorizontal===!0?"width":"height",ge={["--q-virtual-scroll-item-"+z]:a.value+"px"};return[A==="tbody"?k(A,{class:"q-virtual-scroll__padding",key:"before",ref:T},[k("tr",[k("td",{style:{[z]:`${C.value}px`,...ge},colspan:D.value})])]):k(A,{class:"q-virtual-scroll__padding",key:"before",ref:T,style:{[z]:`${C.value}px`,...ge}}),k(A,{class:"q-virtual-scroll__content",key:"content",ref:p,tabindex:-1},W.flat()),A==="tbody"?k(A,{class:"q-virtual-scroll__padding",key:"after",ref:q},[k("tr",[k("td",{style:{[z]:`${w.value}px`,...ge},colspan:D.value})])]):k(A,{class:"q-virtual-scroll__padding",key:"after",ref:q,style:{[z]:`${w.value}px`,...ge}})]}function qe(A){d!==A&&(i.onVirtualScroll!==void 0&&r("virtualScroll",{index:A,from:b.value.from,to:b.value.to-1,direction:A<d?"decrease":"increase",ref:s}),d=A)}we();const Ve=or(ce,o.platform.is.ios===!0?120:35);Wl(()=>{we()});let N=!1;return Va(()=>{N=!0}),Ba(()=>{if(N!==!0)return;const A=t();u!==void 0&&A!==void 0&&A!==null&&A.nodeType!==8?Ui(A,u,i.virtualScrollHorizontal,o.lang.rtl):J(d)}),Je(()=>{Ve.cancel()}),Object.assign(s,{scrollTo:J,reset:$,refresh:Z}),{virtualScrollSliceRange:b,virtualScrollSliceSizeComputed:M,setVirtualScrollSize:we,onVirtualScrollEvt:Ve,localResetVirtualScroll:ye,padVirtualScroll:X,scrollTo:J,reset:$,refresh:Z}}const Xo={list:Nt,table:Qo},eu=["list","table","__qtable"];var Kl=Se({name:"QVirtualScroll",props:{...Pr,type:{type:String,default:"list",validator:e=>eu.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:t,attrs:n}){let a;const l=K(null),i=S(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:r,localResetVirtualScroll:s,padVirtualScroll:o,onVirtualScrollEvt:u}=$r({virtualScrollLength:i,getVirtualScrollTarget:C,getVirtualScrollEl:g}),d=S(()=>{if(i.value===0)return[];const q=(p,b)=>({index:r.value.from+b,item:p});return e.itemsFn===void 0?e.items.slice(r.value.from,r.value.to).map(q):e.itemsFn(r.value.from,r.value.to-r.value.from).map(q)}),v=S(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),y=S(()=>e.scrollTarget!==void 0?{}:{tabindex:0});de(i,()=>{s()}),de(()=>e.scrollTarget,()=>{M(),w()});function g(){return l.value.$el||l.value}function C(){return a}function w(){a=La(g(),e.scrollTarget),a.addEventListener("scroll",u,In.passive)}function M(){a!==void 0&&(a.removeEventListener("scroll",u,In.passive),a=void 0)}function T(){let q=o(e.type==="list"?"div":"tbody",d.value.map(t.default));return t.before!==void 0&&(q=t.before().concat(q)),Rn(t.after,q)}return Wl(()=>{s()}),hn(()=>{w()}),Ba(()=>{w()}),Va(()=>{M()}),Je(()=>{M()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?Ko({ref:l,class:"q-table__middle "+v.value},T()):k(Xo[e.type],{...n,ref:l,class:[n.class,v.value],...y.value},T)}}});const tu=[k("circle",{cx:"15",cy:"15",r:"15"},[k("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),k("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),k("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[k("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),k("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),k("circle",{cx:"105",cy:"15",r:"15"},[k("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),k("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var ql=Se({name:"QSpinnerDots",props:co,setup(e){const{cSize:t,classes:n}=fo(e);return()=>k("svg",{class:n.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},tu)}});const nu={ratio:[String,Number]};function au(e,t){return S(()=>{const n=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(n)!==!0&&n>0?{paddingBottom:`${100/n}%`}:null})}const lu=16/9;var Gl=Se({name:"QImg",props:{...nu,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:lu},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:n}){const a=K(e.initialRatio),l=au(e,a);let i=null,r=!1;const s=[K(null),K(M())],o=K(0),u=K(!1),d=K(!1),v=S(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),y=S(()=>({width:e.width,height:e.height})),g=S(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),C=S(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));de(()=>w(),T);function w(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function M(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function T($){i!==null&&(clearTimeout(i),i=null),d.value=!1,$===null?(u.value=!1,s[o.value^1].value=M()):u.value=!0,s[o.value].value=$}function q({target:$}){r!==!0&&(i!==null&&(clearTimeout(i),i=null),a.value=$.naturalHeight===0?.5:$.naturalWidth/$.naturalHeight,p($,1))}function p($,Z){r===!0||Z===1e3||($.complete===!0?b($):i=setTimeout(()=>{i=null,p($,Z+1)},50))}function b($){r!==!0&&(o.value=o.value^1,s[o.value].value=null,u.value=!1,d.value=!1,n("load",$.currentSrc||$.src))}function D($){i!==null&&(clearTimeout(i),i=null),u.value=!1,d.value=!0,s[o.value].value=null,s[o.value^1].value=M(),n("error",$)}function V($){const Z=s[$].value,J={key:"img_"+$,class:g.value,style:C.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...Z};return o.value===$?(J.class+=" q-img__image--waiting",Object.assign(J,{onLoad:q,onError:D})):J.class+=" q-img__image--loaded",k("div",{class:"q-img__container absolute-full",key:"img"+$},k("img",J))}function E(){return u.value!==!0?k("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Le(t[d.value===!0?"error":"default"])):k("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[k(ur,{color:e.spinnerColor,size:e.spinnerSize})])}return T(w()),Je(()=>{r=!0,i!==null&&(clearTimeout(i),i=null)}),()=>{const $=[];return l.value!==null&&$.push(k("div",{key:"filler",style:l.value})),d.value!==!0&&(s[0].value!==null&&$.push(V(0)),s[1].value!==null&&$.push(V(1))),$.push(k(la,{name:"q-transition--fade"},E)),k("div",{class:v.value,style:y.value,role:"img","aria-label":e.alt},$)}}}),iu=Se({name:"QBanner",props:{...Ft,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:t}){const{proxy:{$q:n}}=Fe(),a=Yt(e,n),l=S(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(a.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),i=S(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const r=[k("div",{class:"q-banner__avatar col-auto row items-center self-start"},Le(t.avatar)),k("div",{class:"q-banner__content col text-body2"},Le(t.default))],s=Le(t.action);return s!==void 0&&r.push(k("div",{class:i.value},s)),k("div",{class:l.value+(e.inlineActions===!1&&s!==void 0?" q-banner--top-padding":""),role:"alert"},r)}}}),te=Se({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const n=S(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>k("div",{class:n.value},Le(t.default))}}),re=Se({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const n=S(()=>parseInt(e.lines,10)),a=S(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(n.value===1?" ellipsis":"")),l=S(()=>e.lines!==void 0&&n.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":n.value}:null);return()=>k("div",{style:l.value,class:a.value},Le(t.default))}}),Qe=Se({name:"QItem",props:{...Ft,...Fa,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:n}){const{proxy:{$q:a}}=Fe(),l=Yt(e,a),{hasLink:i,linkAttrs:r,linkClass:s,linkTag:o,navigateOnClick:u}=cr(),d=K(null),v=K(null),y=S(()=>e.clickable===!0||i.value===!0||e.tag==="label"),g=S(()=>e.disable!==!0&&y.value===!0),C=S(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(l.value===!0?" q-item--dark":"")+(i.value===!0&&e.active===null?s.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(g.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),w=S(()=>{if(e.insetLevel===void 0)return null;const p=a.lang.rtl===!0?"Right":"Left";return{["padding"+p]:16+e.insetLevel*56+"px"}});function M(p){g.value===!0&&(v.value!==null&&(p.qKeyEvent!==!0&&document.activeElement===d.value?v.value.focus():document.activeElement===v.value&&d.value.focus()),u(p))}function T(p){if(g.value===!0&&aa(p,13)===!0){je(p),p.qKeyEvent=!0;const b=new MouseEvent("click",p);b.qKeyEvent=!0,d.value.dispatchEvent(b)}n("keyup",p)}function q(){const p=dr(t.default,[]);return g.value===!0&&p.unshift(k("div",{class:"q-focus-helper",tabindex:-1,ref:v})),p}return()=>{const p={ref:d,class:C.value,style:w.value,role:"listitem",onClick:M,onKeyup:T};return g.value===!0?(p.tabindex=e.tabindex||"0",Object.assign(p,r.value)):y.value===!0&&(p["aria-disabled"]="true"),k(o.value,p,q())}}}),ru=Se({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const n=S(()=>{const a=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(l=>e[l]===!0).map(l=>`q-btn-group--${l}`).join(" ");return`q-btn-group row no-wrap${a.length!==0?" "+a:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>k("div",{class:n.value},Le(t.default))}}),Er=Se({name:"QMenu",inheritAttrs:!1,props:{...Sr,...Bl,...Ft,...Fl,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:qa},self:{type:String,validator:qa},offset:{type:Array,validator:Tr},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Yl,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:a}){let l=null,i,r,s;const o=Fe(),{proxy:u}=o,{$q:d}=u,v=K(null),y=K(!1),g=S(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),C=Yt(e,d),{registerTick:w,removeTick:M}=Qn(),{registerTimeout:T}=ka(),{transitionProps:q,transitionStyle:p}=ir(e),{localScrollTarget:b,changeScrollEvent:D,unconfigureScrollTarget:V}=Mr(e,z),{anchorEl:E,canShow:$}=Cr({showing:y}),{hide:Z}=Ul({showing:y,canShow:$,handleShow:N,handleHide:A,hideOnRouteChange:g,processOnMount:!0}),{showPortal:J,hidePortal:ce,renderPortal:Ee}=rr(o,v,Be,"menu"),x={anchorEl:E,innerRef:v,onClickOutside(O){if(e.persistent!==!0&&y.value===!0)return Z(O),(O.type==="touchstart"||O.target.classList.contains("q-dialog__backdrop"))&&je(O),!0}},se=S(()=>Pa(e.anchor||(e.cover===!0?"center middle":"bottom start"),d.lang.rtl)),ye=S(()=>e.cover===!0?se.value:Pa(e.self||"top start",d.lang.rtl)),we=S(()=>(e.square===!0?" q-menu--square":"")+(C.value===!0?" q-menu--dark q-dark":"")),X=S(()=>e.autoClose===!0?{onClick:ge}:{}),qe=S(()=>y.value===!0&&e.persistent!==!0);de(qe,O=>{O===!0?(mo(ee),Dr(x)):(Ni(ee),Ta(x))});function Ve(){go(()=>{let O=v.value;O&&O.contains(document.activeElement)!==!0&&(O=O.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||O.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||O.querySelector("[autofocus], [data-autofocus]")||O,O.focus({preventScroll:!0}))})}function N(O){if(l=e.noRefocus===!1?document.activeElement:null,fr(_e),J(),z(),i=void 0,O!==void 0&&(e.touchPosition||e.contextMenu)){const xe=Sl(O);if(xe.left!==void 0){const{top:wt,left:$t}=E.value.getBoundingClientRect();i={left:xe.left-$t,top:xe.top-wt}}}r===void 0&&(r=de(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,ae)),e.noFocus!==!0&&document.activeElement.blur(),w(()=>{ae(),e.noFocus!==!0&&Ve()}),T(()=>{d.platform.is.ios===!0&&(s=e.autoClose,v.value.click()),ae(),J(!0),n("show",O)},e.transitionDuration)}function A(O){M(),ce(),W(!0),l!==null&&(O===void 0||O.qClickOutside!==!0)&&(((O&&O.type.indexOf("key")===0?l.closest('[tabindex]:not([tabindex^="-"])'):void 0)||l).focus(),l=null),T(()=>{ce(!0),n("hide",O)},e.transitionDuration)}function W(O){i=void 0,r!==void 0&&(r(),r=void 0),(O===!0||y.value===!0)&&(hr(_e),V(),Ta(x),Ni(ee)),O!==!0&&(l=null)}function z(){(E.value!==null||e.scrollTarget!==void 0)&&(b.value=La(E.value,e.scrollTarget),D(b.value,ae))}function ge(O){s!==!0?(ho(u,O),n("click",O)):s=!1}function _e(O){qe.value===!0&&e.noFocus!==!0&&vo(v.value,O.target)!==!0&&Ve()}function ee(O){n("escapeKey"),Z(O)}function ae(){Ql({targetEl:v.value,offset:e.offset,anchorEl:E.value,anchorOrigin:se.value,selfOrigin:ye.value,absoluteOffset:i,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Be(){return k(la,q.value,()=>y.value===!0?k("div",{role:"menu",...a,ref:v,tabindex:-1,class:["q-menu q-position-engine scroll"+we.value,a.class],style:[a.style,p.value],...X.value},Le(t.default)):null)}return Je(W),Object.assign(u,{focus:Ve,updatePosition:ae}),Ee}});const su=Object.keys(mr),ou=e=>su.reduce((t,n)=>{const a=e[n];return a!==void 0&&(t[n]=a),t},{});var Ir=Se({name:"QBtnDropdown",props:{...mr,...Fl,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:n}){const{proxy:a}=Fe(),l=K(e.modelValue),i=K(null),r=wa(),s=S(()=>{const b={"aria-expanded":l.value===!0?"true":"false","aria-haspopup":"true","aria-controls":r,"aria-label":e.toggleAriaLabel||a.$q.lang.label[l.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(b["aria-disabled"]="true"),b}),o=S(()=>"q-btn-dropdown__arrow"+(l.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),u=S(()=>yo(e)),d=S(()=>ou(e));de(()=>e.modelValue,b=>{i.value!==null&&i.value[b?"show":"hide"]()}),de(()=>e.split,p);function v(b){l.value=!0,n("beforeShow",b)}function y(b){n("show",b),n("update:modelValue",!0)}function g(b){l.value=!1,n("beforeHide",b)}function C(b){n("hide",b),n("update:modelValue",!1)}function w(b){n("click",b)}function M(b){on(b),p(),n("click",b)}function T(b){i.value!==null&&i.value.toggle(b)}function q(b){i.value!==null&&i.value.show(b)}function p(b){i.value!==null&&i.value.hide(b)}return Object.assign(a,{show:q,hide:p,toggle:T}),hn(()=>{e.modelValue===!0&&q()}),()=>{const b=[k(Ke,{class:o.value,name:e.dropdownIcon||a.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&b.push(k(Er,{ref:i,id:r,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:v,onShow:y,onBeforeHide:g,onHide:C},t.default)),e.split===!1?k(Q,{class:"q-btn-dropdown q-btn-dropdown--simple",...d.value,...s.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:w},{default:()=>Le(t.label,[]).concat(b),loading:t.loading}):k(ru,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...u.value,glossy:e.glossy,stretch:e.stretch},()=>[k(Q,{class:"q-btn-dropdown--current",...d.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:M},{default:t.label,loading:t.loading}),k(Q,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...s.value,...u.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>b)])}}}),It=Se({name:"QBreadcrumbsEl",props:{...Fa,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(e,{slots:t}){const{linkTag:n,linkAttrs:a,linkClass:l,navigateOnClick:i}=cr(),r=S(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(e.disable!==!0?"q-link--focusable"+l.value:"q-breadcrumbs__el--disable"),...a.value,onClick:i})),s=S(()=>"q-breadcrumbs__el-icon"+(e.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const o=[];return e.icon!==void 0&&o.push(k(Ke,{class:s.value,name:e.icon})),e.label!==void 0&&o.push(e.label),k(n.value,{...r.value},Rn(t.default,o))}}});const uu=["",!0];var cu=Se({name:"QBreadcrumbs",props:{...po,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}},setup(e,{slots:t}){const n=bo(e),a=S(()=>`flex items-center ${n.value}${e.gutter==="none"?"":` q-gutter-${e.gutter}`}`),l=S(()=>e.separatorColor?` text-${e.separatorColor}`:""),i=S(()=>` text-${e.activeColor}`);return()=>{const r=gr(Le(t.default));if(r.length===0)return;let s=1;const o=[],u=r.filter(v=>v.type!==void 0&&v.type.name==="QBreadcrumbsEl").length,d=t.separator!==void 0?t.separator:()=>e.separator;return r.forEach(v=>{if(v.type!==void 0&&v.type.name==="QBreadcrumbsEl"){const y=s<u,g=v.props!==null&&uu.includes(v.props.disable),C=(y===!0?"":" q-breadcrumbs--last")+(g!==!0&&y===!0?i.value:"");s++,o.push(k("div",{class:`flex items-center${C}`},[v])),y===!0&&o.push(k("div",{class:"q-breadcrumbs__separator"+l.value},d()))}else o.push(v)}),k("div",{class:"q-breadcrumbs"},[k("div",{class:a.value},o)])}}}),du=Se({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:n}}=Fe(),a=Sa(_o,xt);if(a===xt)return console.error("QPage needs to be a deep child of QLayout"),xt;if(Sa(ko,xt)===xt)return console.error("QPage needs to be child of QPageContainer"),xt;const i=S(()=>{const s=(a.header.space===!0?a.header.size:0)+(a.footer.space===!0?a.footer.size:0);if(typeof e.styleFn=="function"){const o=a.isContainer.value===!0?a.containerHeight.value:n.screen.height;return e.styleFn(s,o)}return{minHeight:a.isContainer.value===!0?a.containerHeight.value-s+"px":n.screen.height===0?s!==0?`calc(100vh - ${s}px)`:"100vh":n.screen.height-s+"px"}}),r=S(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>k("main",{class:r.value,style:i.value},Le(t.default))}});const fu=k("div",{class:"q-space"});var hu=Se({name:"QSpace",setup(){return()=>fu}});function Hi(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var zn=vr({name:"close-popup",beforeMount(e,{value:t}){const n={depth:Hi(t),handler(a){n.depth!==0&&setTimeout(()=>{const l=wo(e);l!==void 0&&So(l,a,n.depth)})},handlerKey(a){aa(a,13)===!0&&n.handler(a)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:n}){t!==n&&(e.__qclosepopup.depth=Hi(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});function mu(){return Sa(Co)}var gu=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Ar={},st={};let Zl;const vu=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];st.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};st.getSymbolTotalCodewords=function(t){return vu[t]};st.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};st.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Zl=t};st.isKanjiModeEnabled=function(){return typeof Zl!="undefined"};st.toSJIS=function(t){return Zl(t)};var Ya={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(a){return a&&typeof a.bit!="undefined"&&a.bit>=0&&a.bit<4},e.from=function(a,l){if(e.isValid(a))return a;try{return t(a)}catch{return l}}})(Ya);function Or(){this.buffer=[],this.length=0}Or.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var yu=Or;function ra(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}ra.prototype.set=function(e,t,n,a){const l=e*this.size+t;this.data[l]=n,a&&(this.reservedBit[l]=!0)};ra.prototype.get=function(e,t){return this.data[e*this.size+t]};ra.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};ra.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var pu=ra,xr={};(function(e){const t=st.getSymbolSize;e.getRowColCoords=function(a){if(a===1)return[];const l=Math.floor(a/7)+2,i=t(a),r=i===145?26:Math.ceil((i-13)/(2*l-2))*2,s=[i-7];for(let o=1;o<l-1;o++)s[o]=s[o-1]-r;return s.push(6),s.reverse()},e.getPositions=function(a){const l=[],i=e.getRowColCoords(a),r=i.length;for(let s=0;s<r;s++)for(let o=0;o<r;o++)s===0&&o===0||s===0&&o===r-1||s===r-1&&o===0||l.push([i[s],i[o]]);return l}})(xr);var Nr={};const bu=st.getSymbolSize,zi=7;Nr.getPositions=function(t){const n=bu(t);return[[0,0],[n-zi,0],[0,n-zi]]};var Rr={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},e.from=function(l){return e.isValid(l)?parseInt(l,10):void 0},e.getPenaltyN1=function(l){const i=l.size;let r=0,s=0,o=0,u=null,d=null;for(let v=0;v<i;v++){s=o=0,u=d=null;for(let y=0;y<i;y++){let g=l.get(v,y);g===u?s++:(s>=5&&(r+=t.N1+(s-5)),u=g,s=1),g=l.get(y,v),g===d?o++:(o>=5&&(r+=t.N1+(o-5)),d=g,o=1)}s>=5&&(r+=t.N1+(s-5)),o>=5&&(r+=t.N1+(o-5))}return r},e.getPenaltyN2=function(l){const i=l.size;let r=0;for(let s=0;s<i-1;s++)for(let o=0;o<i-1;o++){const u=l.get(s,o)+l.get(s,o+1)+l.get(s+1,o)+l.get(s+1,o+1);(u===4||u===0)&&r++}return r*t.N2},e.getPenaltyN3=function(l){const i=l.size;let r=0,s=0,o=0;for(let u=0;u<i;u++){s=o=0;for(let d=0;d<i;d++)s=s<<1&2047|l.get(u,d),d>=10&&(s===1488||s===93)&&r++,o=o<<1&2047|l.get(d,u),d>=10&&(o===1488||o===93)&&r++}return r*t.N3},e.getPenaltyN4=function(l){let i=0;const r=l.data.length;for(let o=0;o<r;o++)i+=l.data[o];return Math.abs(Math.ceil(i*100/r/5)-10)*t.N4};function n(a,l,i){switch(a){case e.Patterns.PATTERN000:return(l+i)%2===0;case e.Patterns.PATTERN001:return l%2===0;case e.Patterns.PATTERN010:return i%3===0;case e.Patterns.PATTERN011:return(l+i)%3===0;case e.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(i/3))%2===0;case e.Patterns.PATTERN101:return l*i%2+l*i%3===0;case e.Patterns.PATTERN110:return(l*i%2+l*i%3)%2===0;case e.Patterns.PATTERN111:return(l*i%3+(l+i)%2)%2===0;default:throw new Error("bad maskPattern:"+a)}}e.applyMask=function(l,i){const r=i.size;for(let s=0;s<r;s++)for(let o=0;o<r;o++)i.isReserved(o,s)||i.xor(o,s,n(l,o,s))},e.getBestMask=function(l,i){const r=Object.keys(e.Patterns).length;let s=0,o=1/0;for(let u=0;u<r;u++){i(u),e.applyMask(u,l);const d=e.getPenaltyN1(l)+e.getPenaltyN2(l)+e.getPenaltyN3(l)+e.getPenaltyN4(l);e.applyMask(u,l),d<o&&(o=d,s=u)}return s}})(Rr);var Ua={};const Zt=Ya,ha=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ma=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ua.getBlocksCount=function(t,n){switch(n){case Zt.L:return ha[(t-1)*4+0];case Zt.M:return ha[(t-1)*4+1];case Zt.Q:return ha[(t-1)*4+2];case Zt.H:return ha[(t-1)*4+3];default:return}};Ua.getTotalCodewordsCount=function(t,n){switch(n){case Zt.L:return ma[(t-1)*4+0];case Zt.M:return ma[(t-1)*4+1];case Zt.Q:return ma[(t-1)*4+2];case Zt.H:return ma[(t-1)*4+3];default:return}};var Lr={},Ha={};const Kn=new Uint8Array(512),$a=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)Kn[n]=t,$a[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)Kn[n]=Kn[n-255]})();Ha.log=function(t){if(t<1)throw new Error("log("+t+")");return $a[t]};Ha.exp=function(t){return Kn[t]};Ha.mul=function(t,n){return t===0||n===0?0:Kn[$a[t]+$a[n]]};(function(e){const t=Ha;e.mul=function(a,l){const i=new Uint8Array(a.length+l.length-1);for(let r=0;r<a.length;r++)for(let s=0;s<l.length;s++)i[r+s]^=t.mul(a[r],l[s]);return i},e.mod=function(a,l){let i=new Uint8Array(a);for(;i.length-l.length>=0;){const r=i[0];for(let o=0;o<l.length;o++)i[o]^=t.mul(l[o],r);let s=0;for(;s<i.length&&i[s]===0;)s++;i=i.slice(s)}return i},e.generateECPolynomial=function(a){let l=new Uint8Array([1]);for(let i=0;i<a;i++)l=e.mul(l,new Uint8Array([1,t.exp(i)]));return l}})(Lr);const Vr=Lr;function Jl(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}Jl.prototype.initialize=function(t){this.degree=t,this.genPoly=Vr.generateECPolynomial(this.degree)};Jl.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const a=Vr.mod(n,this.genPoly),l=this.degree-a.length;if(l>0){const i=new Uint8Array(this.degree);return i.set(a,l),i}return a};var _u=Jl,Br={},tn={},Xl={};Xl.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var Tt={};const Fr="[0-9]+",ku="[A-Z $%*+\\-./:]+";let Xn="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Xn=Xn.replace(/u/g,"\\u");const wu="(?:(?![A-Z0-9 $%*+\\-./:]|"+Xn+`)(?:.|[\r
]))+`;Tt.KANJI=new RegExp(Xn,"g");Tt.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Tt.BYTE=new RegExp(wu,"g");Tt.NUMERIC=new RegExp(Fr,"g");Tt.ALPHANUMERIC=new RegExp(ku,"g");const Su=new RegExp("^"+Xn+"$"),Cu=new RegExp("^"+Fr+"$"),Mu=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Tt.testKanji=function(t){return Su.test(t)};Tt.testNumeric=function(t){return Cu.test(t)};Tt.testAlphanumeric=function(t){return Mu.test(t)};(function(e){const t=Xl,n=Tt;e.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(i,r){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(r))throw new Error("Invalid version: "+r);return r>=1&&r<10?i.ccBits[0]:r<27?i.ccBits[1]:i.ccBits[2]},e.getBestModeForData=function(i){return n.testNumeric(i)?e.NUMERIC:n.testAlphanumeric(i)?e.ALPHANUMERIC:n.testKanji(i)?e.KANJI:e.BYTE},e.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},e.isValid=function(i){return i&&i.bit&&i.ccBits};function a(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+l)}}e.from=function(i,r){if(e.isValid(i))return i;try{return a(i)}catch{return r}}})(tn);(function(e){const t=st,n=Ua,a=Ya,l=tn,i=Xl,r=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,s=t.getBCHDigit(r);function o(y,g,C){for(let w=1;w<=40;w++)if(g<=e.getCapacity(w,C,y))return w}function u(y,g){return l.getCharCountIndicator(y,g)+4}function d(y,g){let C=0;return y.forEach(function(w){C+=u(w.mode,g)+w.getBitsLength()}),C}function v(y,g){for(let C=1;C<=40;C++)if(d(y,C)<=e.getCapacity(C,g,l.MIXED))return C}e.from=function(g,C){return i.isValid(g)?parseInt(g,10):C},e.getCapacity=function(g,C,w){if(!i.isValid(g))throw new Error("Invalid QR Code version");typeof w=="undefined"&&(w=l.BYTE);const M=t.getSymbolTotalCodewords(g),T=n.getTotalCodewordsCount(g,C),q=(M-T)*8;if(w===l.MIXED)return q;const p=q-u(w,g);switch(w){case l.NUMERIC:return Math.floor(p/10*3);case l.ALPHANUMERIC:return Math.floor(p/11*2);case l.KANJI:return Math.floor(p/13);case l.BYTE:default:return Math.floor(p/8)}},e.getBestVersionForData=function(g,C){let w;const M=a.from(C,a.M);if(Array.isArray(g)){if(g.length>1)return v(g,M);if(g.length===0)return 1;w=g[0]}else w=g;return o(w.mode,w.getLength(),M)},e.getEncodedBits=function(g){if(!i.isValid(g)||g<7)throw new Error("Invalid QR Code version");let C=g<<12;for(;t.getBCHDigit(C)-s>=0;)C^=r<<t.getBCHDigit(C)-s;return g<<12|C}})(Br);var Yr={};const Pl=st,Ur=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,Du=1<<14|1<<12|1<<10|1<<4|1<<1,Wi=Pl.getBCHDigit(Ur);Yr.getEncodedBits=function(t,n){const a=t.bit<<3|n;let l=a<<10;for(;Pl.getBCHDigit(l)-Wi>=0;)l^=Ur<<Pl.getBCHDigit(l)-Wi;return(a<<10|l)^Du};var Hr={};const Tu=tn;function An(e){this.mode=Tu.NUMERIC,this.data=e.toString()}An.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};An.prototype.getLength=function(){return this.data.length};An.prototype.getBitsLength=function(){return An.getBitsLength(this.data.length)};An.prototype.write=function(t){let n,a,l;for(n=0;n+3<=this.data.length;n+=3)a=this.data.substr(n,3),l=parseInt(a,10),t.put(l,10);const i=this.data.length-n;i>0&&(a=this.data.substr(n),l=parseInt(a,10),t.put(l,i*3+1))};var qu=An;const Pu=tn,fl=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function On(e){this.mode=Pu.ALPHANUMERIC,this.data=e}On.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};On.prototype.getLength=function(){return this.data.length};On.prototype.getBitsLength=function(){return On.getBitsLength(this.data.length)};On.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let a=fl.indexOf(this.data[n])*45;a+=fl.indexOf(this.data[n+1]),t.put(a,11)}this.data.length%2&&t.put(fl.indexOf(this.data[n]),6)};var $u=On,Eu=function(t){for(var n=[],a=t.length,l=0;l<a;l++){var i=t.charCodeAt(l);if(i>=55296&&i<=56319&&a>l+1){var r=t.charCodeAt(l+1);r>=56320&&r<=57343&&(i=(i-55296)*1024+r-56320+65536,l+=1)}if(i<128){n.push(i);continue}if(i<2048){n.push(i>>6|192),n.push(i&63|128);continue}if(i<55296||i>=57344&&i<65536){n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128);continue}if(i>=65536&&i<=1114111){n.push(i>>18|240),n.push(i>>12&63|128),n.push(i>>6&63|128),n.push(i&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer};const Iu=Eu,Au=tn;function xn(e){this.mode=Au.BYTE,typeof e=="string"&&(e=Iu(e)),this.data=new Uint8Array(e)}xn.getBitsLength=function(t){return t*8};xn.prototype.getLength=function(){return this.data.length};xn.prototype.getBitsLength=function(){return xn.getBitsLength(this.data.length)};xn.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var Ou=xn;const xu=tn,Nu=st;function Nn(e){this.mode=xu.KANJI,this.data=e}Nn.getBitsLength=function(t){return t*13};Nn.prototype.getLength=function(){return this.data.length};Nn.prototype.getBitsLength=function(){return Nn.getBitsLength(this.data.length)};Nn.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=Nu.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var Ru=Nn,zr={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,a,l){var i={},r={};r[a]=0;var s=t.PriorityQueue.make();s.push(a,0);for(var o,u,d,v,y,g,C,w,M;!s.empty();){o=s.pop(),u=o.value,v=o.cost,y=n[u]||{};for(d in y)y.hasOwnProperty(d)&&(g=y[d],C=v+g,w=r[d],M=typeof r[d]=="undefined",(M||w>C)&&(r[d]=C,s.push(d,C),i[d]=u))}if(typeof l!="undefined"&&typeof r[l]=="undefined"){var T=["Could not find a path from ",a," to ",l,"."].join("");throw new Error(T)}return i},extract_shortest_path_from_predecessor_list:function(n,a){for(var l=[],i=a;i;)l.push(i),n[i],i=n[i];return l.reverse(),l},find_path:function(n,a,l){var i=t.single_source_shortest_paths(n,a,l);return t.extract_shortest_path_from_predecessor_list(i,l)},PriorityQueue:{make:function(n){var a=t.PriorityQueue,l={},i;n=n||{};for(i in a)a.hasOwnProperty(i)&&(l[i]=a[i]);return l.queue=[],l.sorter=n.sorter||a.default_sorter,l},default_sorter:function(n,a){return n.cost-a.cost},push:function(n,a){var l={value:n,cost:a};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(zr);(function(e){const t=tn,n=qu,a=$u,l=Ou,i=Ru,r=Tt,s=st,o=zr.exports;function u(T){return unescape(encodeURIComponent(T)).length}function d(T,q,p){const b=[];let D;for(;(D=T.exec(p))!==null;)b.push({data:D[0],index:D.index,mode:q,length:D[0].length});return b}function v(T){const q=d(r.NUMERIC,t.NUMERIC,T),p=d(r.ALPHANUMERIC,t.ALPHANUMERIC,T);let b,D;return s.isKanjiModeEnabled()?(b=d(r.BYTE,t.BYTE,T),D=d(r.KANJI,t.KANJI,T)):(b=d(r.BYTE_KANJI,t.BYTE,T),D=[]),q.concat(p,b,D).sort(function(E,$){return E.index-$.index}).map(function(E){return{data:E.data,mode:E.mode,length:E.length}})}function y(T,q){switch(q){case t.NUMERIC:return n.getBitsLength(T);case t.ALPHANUMERIC:return a.getBitsLength(T);case t.KANJI:return i.getBitsLength(T);case t.BYTE:return l.getBitsLength(T)}}function g(T){return T.reduce(function(q,p){const b=q.length-1>=0?q[q.length-1]:null;return b&&b.mode===p.mode?(q[q.length-1].data+=p.data,q):(q.push(p),q)},[])}function C(T){const q=[];for(let p=0;p<T.length;p++){const b=T[p];switch(b.mode){case t.NUMERIC:q.push([b,{data:b.data,mode:t.ALPHANUMERIC,length:b.length},{data:b.data,mode:t.BYTE,length:b.length}]);break;case t.ALPHANUMERIC:q.push([b,{data:b.data,mode:t.BYTE,length:b.length}]);break;case t.KANJI:q.push([b,{data:b.data,mode:t.BYTE,length:u(b.data)}]);break;case t.BYTE:q.push([{data:b.data,mode:t.BYTE,length:u(b.data)}])}}return q}function w(T,q){const p={},b={start:{}};let D=["start"];for(let V=0;V<T.length;V++){const E=T[V],$=[];for(let Z=0;Z<E.length;Z++){const J=E[Z],ce=""+V+Z;$.push(ce),p[ce]={node:J,lastCount:0},b[ce]={};for(let Ee=0;Ee<D.length;Ee++){const x=D[Ee];p[x]&&p[x].node.mode===J.mode?(b[x][ce]=y(p[x].lastCount+J.length,J.mode)-y(p[x].lastCount,J.mode),p[x].lastCount+=J.length):(p[x]&&(p[x].lastCount=J.length),b[x][ce]=y(J.length,J.mode)+4+t.getCharCountIndicator(J.mode,q))}}D=$}for(let V=0;V<D.length;V++)b[D[V]].end=0;return{map:b,table:p}}function M(T,q){let p;const b=t.getBestModeForData(T);if(p=t.from(q,b),p!==t.BYTE&&p.bit<b.bit)throw new Error('"'+T+'" cannot be encoded with mode '+t.toString(p)+`.
 Suggested mode is: `+t.toString(b));switch(p===t.KANJI&&!s.isKanjiModeEnabled()&&(p=t.BYTE),p){case t.NUMERIC:return new n(T);case t.ALPHANUMERIC:return new a(T);case t.KANJI:return new i(T);case t.BYTE:return new l(T)}}e.fromArray=function(q){return q.reduce(function(p,b){return typeof b=="string"?p.push(M(b,null)):b.data&&p.push(M(b.data,b.mode)),p},[])},e.fromString=function(q,p){const b=v(q,s.isKanjiModeEnabled()),D=C(b),V=w(D,p),E=o.find_path(V.map,"start","end"),$=[];for(let Z=1;Z<E.length-1;Z++)$.push(V.table[E[Z]].node);return e.fromArray(g($))},e.rawSplit=function(q){return e.fromArray(v(q,s.isKanjiModeEnabled()))}})(Hr);const za=st,hl=Ya,Lu=yu,Vu=pu,Bu=xr,Fu=Nr,$l=Rr,El=Ua,Yu=_u,Ea=Br,Uu=Yr,Hu=tn,ml=Hr;function zu(e,t){const n=e.size,a=Fu.getPositions(t);for(let l=0;l<a.length;l++){const i=a[l][0],r=a[l][1];for(let s=-1;s<=7;s++)if(!(i+s<=-1||n<=i+s))for(let o=-1;o<=7;o++)r+o<=-1||n<=r+o||(s>=0&&s<=6&&(o===0||o===6)||o>=0&&o<=6&&(s===0||s===6)||s>=2&&s<=4&&o>=2&&o<=4?e.set(i+s,r+o,!0,!0):e.set(i+s,r+o,!1,!0))}}function Wu(e){const t=e.size;for(let n=8;n<t-8;n++){const a=n%2===0;e.set(n,6,a,!0),e.set(6,n,a,!0)}}function ju(e,t){const n=Bu.getPositions(t);for(let a=0;a<n.length;a++){const l=n[a][0],i=n[a][1];for(let r=-2;r<=2;r++)for(let s=-2;s<=2;s++)r===-2||r===2||s===-2||s===2||r===0&&s===0?e.set(l+r,i+s,!0,!0):e.set(l+r,i+s,!1,!0)}}function Qu(e,t){const n=e.size,a=Ea.getEncodedBits(t);let l,i,r;for(let s=0;s<18;s++)l=Math.floor(s/3),i=s%3+n-8-3,r=(a>>s&1)===1,e.set(l,i,r,!0),e.set(i,l,r,!0)}function gl(e,t,n){const a=e.size,l=Uu.getEncodedBits(t,n);let i,r;for(i=0;i<15;i++)r=(l>>i&1)===1,i<6?e.set(i,8,r,!0):i<8?e.set(i+1,8,r,!0):e.set(a-15+i,8,r,!0),i<8?e.set(8,a-i-1,r,!0):i<9?e.set(8,15-i-1+1,r,!0):e.set(8,15-i-1,r,!0);e.set(a-8,8,1,!0)}function Ku(e,t){const n=e.size;let a=-1,l=n-1,i=7,r=0;for(let s=n-1;s>0;s-=2)for(s===6&&s--;;){for(let o=0;o<2;o++)if(!e.isReserved(l,s-o)){let u=!1;r<t.length&&(u=(t[r]>>>i&1)===1),e.set(l,s-o,u),i--,i===-1&&(r++,i=7)}if(l+=a,l<0||n<=l){l-=a,a=-a;break}}}function Gu(e,t,n){const a=new Lu;n.forEach(function(o){a.put(o.mode.bit,4),a.put(o.getLength(),Hu.getCharCountIndicator(o.mode,e)),o.write(a)});const l=za.getSymbolTotalCodewords(e),i=El.getTotalCodewordsCount(e,t),r=(l-i)*8;for(a.getLengthInBits()+4<=r&&a.put(0,4);a.getLengthInBits()%8!==0;)a.putBit(0);const s=(r-a.getLengthInBits())/8;for(let o=0;o<s;o++)a.put(o%2?17:236,8);return Zu(a,e,t)}function Zu(e,t,n){const a=za.getSymbolTotalCodewords(t),l=El.getTotalCodewordsCount(t,n),i=a-l,r=El.getBlocksCount(t,n),s=a%r,o=r-s,u=Math.floor(a/r),d=Math.floor(i/r),v=d+1,y=u-d,g=new Yu(y);let C=0;const w=new Array(r),M=new Array(r);let T=0;const q=new Uint8Array(e.buffer);for(let E=0;E<r;E++){const $=E<o?d:v;w[E]=q.slice(C,C+$),M[E]=g.encode(w[E]),C+=$,T=Math.max(T,$)}const p=new Uint8Array(a);let b=0,D,V;for(D=0;D<T;D++)for(V=0;V<r;V++)D<w[V].length&&(p[b++]=w[V][D]);for(D=0;D<y;D++)for(V=0;V<r;V++)p[b++]=M[V][D];return p}function Ju(e,t,n,a){let l;if(Array.isArray(e))l=ml.fromArray(e);else if(typeof e=="string"){let u=t;if(!u){const d=ml.rawSplit(e);u=Ea.getBestVersionForData(d,n)}l=ml.fromString(e,u||40)}else throw new Error("Invalid data");const i=Ea.getBestVersionForData(l,n);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=i;else if(t<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const r=Gu(t,n,l),s=za.getSymbolSize(t),o=new Vu(s);return zu(o,t),Wu(o),ju(o,t),gl(o,n,0),t>=7&&Qu(o,t),Ku(o,r),isNaN(a)&&(a=$l.getBestMask(o,gl.bind(null,o,n))),$l.applyMask(a,o),gl(o,n,a),{modules:o,version:t,errorCorrectionLevel:n,maskPattern:a,segments:l}}Ar.create=function(t,n){if(typeof t=="undefined"||t==="")throw new Error("No input text");let a=hl.M,l,i;return typeof n!="undefined"&&(a=hl.from(n.errorCorrectionLevel,hl.M),l=Ea.from(n.version),i=$l.from(n.maskPattern),n.toSJISFunc&&za.setToSJISFunction(n.toSJISFunc)),Ju(t,l,a,i)};var Wr={},ei={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let a=n.slice().replace("#","").split("");if(a.length<3||a.length===5||a.length>8)throw new Error("Invalid hex color: "+n);(a.length===3||a.length===4)&&(a=Array.prototype.concat.apply([],a.map(function(i){return[i,i]}))),a.length===6&&a.push("F","F");const l=parseInt(a.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+a.slice(0,6).join("")}}e.getOptions=function(a){a||(a={}),a.color||(a.color={});const l=typeof a.margin=="undefined"||a.margin===null||a.margin<0?4:a.margin,i=a.width&&a.width>=21?a.width:void 0,r=a.scale||4;return{width:i,scale:i?4:r,margin:l,color:{dark:t(a.color.dark||"#000000ff"),light:t(a.color.light||"#ffffffff")},type:a.type,rendererOpts:a.rendererOpts||{}}},e.getScale=function(a,l){return l.width&&l.width>=a+l.margin*2?l.width/(a+l.margin*2):l.scale},e.getImageWidth=function(a,l){const i=e.getScale(a,l);return Math.floor((a+l.margin*2)*i)},e.qrToImageData=function(a,l,i){const r=l.modules.size,s=l.modules.data,o=e.getScale(r,i),u=Math.floor((r+i.margin*2)*o),d=i.margin*o,v=[i.color.light,i.color.dark];for(let y=0;y<u;y++)for(let g=0;g<u;g++){let C=(y*u+g)*4,w=i.color.light;if(y>=d&&g>=d&&y<u-d&&g<u-d){const M=Math.floor((y-d)/o),T=Math.floor((g-d)/o);w=v[s[M*r+T]?1:0]}a[C++]=w.r,a[C++]=w.g,a[C++]=w.b,a[C]=w.a}}})(ei);(function(e){const t=ei;function n(l,i,r){l.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=r,i.width=r,i.style.height=r+"px",i.style.width=r+"px"}function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(i,r,s){let o=s,u=r;typeof o=="undefined"&&(!r||!r.getContext)&&(o=r,r=void 0),r||(u=a()),o=t.getOptions(o);const d=t.getImageWidth(i.modules.size,o),v=u.getContext("2d"),y=v.createImageData(d,d);return t.qrToImageData(y.data,i,o),n(v,u,d),v.putImageData(y,0,0),u},e.renderToDataURL=function(i,r,s){let o=s;typeof o=="undefined"&&(!r||!r.getContext)&&(o=r,r=void 0),o||(o={});const u=e.render(i,r,o),d=o.type||"image/png",v=o.rendererOpts||{};return u.toDataURL(d,v.quality)}})(Wr);var jr={};const Xu=ei;function ji(e,t){const n=e.a/255,a=t+'="'+e.hex+'"';return n<1?a+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':a}function vl(e,t,n){let a=e+t;return typeof n!="undefined"&&(a+=" "+n),a}function ec(e,t,n){let a="",l=0,i=!1,r=0;for(let s=0;s<e.length;s++){const o=Math.floor(s%t),u=Math.floor(s/t);!o&&!i&&(i=!0),e[s]?(r++,s>0&&o>0&&e[s-1]||(a+=i?vl("M",o+n,.5+u+n):vl("m",l,0),l=0,i=!1),o+1<t&&e[s+1]||(a+=vl("h",r),r=0)):l++}return a}jr.render=function(t,n,a){const l=Xu.getOptions(n),i=t.modules.size,r=t.modules.data,s=i+l.margin*2,o=l.color.light.a?"<path "+ji(l.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",u="<path "+ji(l.color.dark,"stroke")+' d="'+ec(r,i,l.margin)+'"/>',d='viewBox="0 0 '+s+" "+s+'"',v=l.width?'width="'+l.width+'" height="'+l.width+'" ':"",y='<svg xmlns="http://www.w3.org/2000/svg" '+v+d+' shape-rendering="crispEdges">'+o+u+`</svg>
`;return typeof a=="function"&&a(null,y),y};const tc=gu,Il=Ar,Qr=Wr,nc=jr;function ti(e,t,n,a,l){const i=[].slice.call(arguments,1),r=i.length,s=typeof i[r-1]=="function";if(!s&&!tc())throw new Error("Callback required as last argument");if(s){if(r<2)throw new Error("Too few arguments provided");r===2?(l=n,n=t,t=a=void 0):r===3&&(t.getContext&&typeof l=="undefined"?(l=a,a=void 0):(l=a,a=n,n=t,t=void 0))}else{if(r<1)throw new Error("Too few arguments provided");return r===1?(n=t,t=a=void 0):r===2&&!t.getContext&&(a=n,n=t,t=void 0),new Promise(function(o,u){try{const d=Il.create(n,a);o(e(d,t,a))}catch(d){u(d)}})}try{const o=Il.create(n,a);l(null,e(o,t,a))}catch(o){l(o)}}Il.create;var ac=ti.bind(null,Qr.render),lc=ti.bind(null,Qr.renderToDataURL),ic=ti.bind(null,function(e,t,n){return nc.render(e,n)});/*! vue-qrcode v2.0.0 | (c) 2018-present Chen Fengyuan | MIT */const Qi="ready";var rc=it({name:"VueQrcode",props:{value:{type:String,default:void 0},options:{type:Object,default:void 0},tag:{type:String,default:"canvas"}},emits:[Qi],watch:{$props:{deep:!0,immediate:!0,handler(){this.$el&&this.generate()}}},mounted(){this.generate()},methods:{generate(){const e=this.options||{},t=String(this.value),n=()=>{this.$emit(Qi,this.$el)};switch(this.tag){case"canvas":ac(this.$el,t,e,a=>{if(a)throw a;n()});break;case"img":lc(t,e,(a,l)=>{if(a)throw a;this.$el.src=l,this.$el.onload=n});break;case"svg":ic(t,e,(a,l)=>{if(a)throw a;const i=document.createElement("div");i.innerHTML=l;const r=i.querySelector("svg");if(r){const{attributes:s,childNodes:o}=r;Object.keys(s).forEach(u=>{const d=s[Number(u)];this.$el.setAttribute(d.name,d.value)}),Object.keys(o).forEach(u=>{const d=o[Number(u)];this.$el.appendChild(d.cloneNode(!0))}),n()}});break}}},render(){return k(this.tag,this.$slots.default)}});function sc(e){const t=document.createElement("textarea");t.value=e,t.contentEditable="true",t.style.position="fixed";const n=()=>{};fr(n),document.body.appendChild(t),t.focus(),t.select();const a=document.execCommand("copy");return t.remove(),hr(n),a}function oc(e){return navigator.clipboard!==void 0?navigator.clipboard.writeText(e):new Promise((t,n)=>{const a=sc(e);a?t(!0):n(a)})}let uc=0;const cc=["click","keydown"],dc={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${uc++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function fc(e,t,n,a){const l=Sa(yr,xt);if(l===xt)return console.error("QTab/QRouteTab component needs to be child of QTabs"),xt;const{proxy:i}=Fe(),r=K(null),s=K(null),o=K(null),u=S(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),d=S(()=>l.currentModel.value===e.name),v=S(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(d.value===!0?" q-tab--active"+(l.tabProps.value.activeClass?" "+l.tabProps.value.activeClass:"")+(l.tabProps.value.activeColor?` text-${l.tabProps.value.activeColor}`:"")+(l.tabProps.value.activeBgColor?` bg-${l.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&l.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||l.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(a!==void 0?a.linkClass.value:"")),y=S(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(l.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),g=S(()=>e.disable===!0||l.hasFocus.value===!0||d.value===!1&&l.hasActiveTab.value===!0?-1:e.tabindex||0);function C(p,b){if(b!==!0&&r.value!==null&&r.value.focus(),e.disable===!0){a!==void 0&&a.hasRouterLink.value===!0&&je(p);return}if(a===void 0){l.updateModel({name:e.name}),n("click",p);return}if(a.hasRouterLink.value===!0){const D=(V={})=>{let E;const $=V.to===void 0||Cn(V.to,e.to)===!0?l.avoidRouteWatcher=wa():null;return a.navigateToRouterLink(p,{...V,returnRouterError:!0}).catch(Z=>{E=Z}).then(Z=>{if($===l.avoidRouteWatcher&&(l.avoidRouteWatcher=!1,E===void 0&&(Z===void 0||Z.message.startsWith("Avoided redundant navigation")===!0)&&l.updateModel({name:e.name})),V.returnRouterError===!0)return E!==void 0?Promise.reject(E):Z})};n("click",p,D),p.defaultPrevented!==!0&&D();return}n("click",p)}function w(p){aa(p,[13,32])?C(p,!0):pr(p)!==!0&&p.keyCode>=35&&p.keyCode<=40&&p.altKey!==!0&&p.metaKey!==!0&&l.onKbdNavigate(p.keyCode,i.$el)===!0&&je(p),n("keydown",p)}function M(){const p=l.tabProps.value.narrowIndicator,b=[],D=k("div",{ref:o,class:["q-tab__indicator",l.tabProps.value.indicatorClass]});e.icon!==void 0&&b.push(k(Ke,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&b.push(k("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&b.push(e.alertIcon!==void 0?k(Ke,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):k("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),p===!0&&b.push(D);const V=[k("div",{class:"q-focus-helper",tabindex:-1,ref:r}),k("div",{class:y.value},Rn(t.default,b))];return p===!1&&V.push(D),V}const T={name:S(()=>e.name),rootRef:s,tabIndicatorRef:o,routeData:a};Je(()=>{l.unregisterTab(T)}),hn(()=>{l.registerTab(T)});function q(p,b){const D={ref:s,class:v.value,tabindex:g.value,role:"tab","aria-selected":d.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:C,onKeydown:w,...b};return jt(k(p,D,M()),[[zl,u.value]])}return{renderTab:q,$tabs:l}}var yl=Se({name:"QTab",props:dc,emits:cc,setup(e,{slots:t,emit:n}){const{renderTab:a}=fc(e,t,n);return()=>a("div")}});function hc(e,t,n){const a=n===!0?["left","right"]:["top","bottom"];return`absolute-${t===!0?a[0]:a[1]}${e?` text-${e}`:""}`}const mc=["left","center","right","justify"];var gc=Se({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>mc.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:t,emit:n}){const{proxy:a}=Fe(),{$q:l}=a,{registerTick:i}=Qn(),{registerTick:r}=Qn(),{registerTick:s}=Qn(),{registerTimeout:o,removeTimeout:u}=ka(),{registerTimeout:d,removeTimeout:v}=ka(),y=K(null),g=K(null),C=K(e.modelValue),w=K(!1),M=K(!0),T=K(!1),q=K(!1),p=[],b=K(0),D=K(!1);let V=null,E=null,$;const Z=S(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:hc(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),J=S(()=>{const I=b.value,j=C.value;for(let ie=0;ie<I;ie++)if(p[ie].name.value===j)return!0;return!1}),ce=S(()=>`q-tabs__content--align-${w.value===!0?"left":q.value===!0?"justify":e.align}`),Ee=S(()=>`q-tabs row no-wrap items-center q-tabs--${w.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),x=S(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+ce.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),se=S(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),ye=S(()=>e.vertical!==!0&&l.lang.rtl===!0),we=S(()=>Jn===!1&&ye.value===!0);de(ye,W),de(()=>e.modelValue,I=>{X({name:I,setCurrent:!0,skipEmit:!0})}),de(()=>e.outsideArrows,qe);function X({name:I,setCurrent:j,skipEmit:ie}){C.value!==I&&(ie!==!0&&e["onUpdate:modelValue"]!==void 0&&n("update:modelValue",I),(j===!0||e["onUpdate:modelValue"]===void 0)&&(N(C.value,I),C.value=I))}function qe(){i(()=>{Ve({width:y.value.offsetWidth,height:y.value.offsetHeight})})}function Ve(I){if(se.value===void 0||g.value===null)return;const j=I[se.value.container],ie=Math.min(g.value[se.value.scroll],Array.prototype.reduce.call(g.value.children,(Ie,ke)=>Ie+(ke[se.value.content]||0),0)),Oe=j>0&&ie>j;w.value=Oe,Oe===!0&&r(W),q.value=j<parseInt(e.breakpoint,10)}function N(I,j){const ie=I!=null&&I!==""?p.find(Ie=>Ie.name.value===I):null,Oe=j!=null&&j!==""?p.find(Ie=>Ie.name.value===j):null;if(ie&&Oe){const Ie=ie.tabIndicatorRef.value,ke=Oe.tabIndicatorRef.value;V!==null&&(clearTimeout(V),V=null),Ie.style.transition="none",Ie.style.transform="none",ke.style.transition="none",ke.style.transform="none";const ve=Ie.getBoundingClientRect(),Ue=ke.getBoundingClientRect();ke.style.transform=e.vertical===!0?`translate3d(0,${ve.top-Ue.top}px,0) scale3d(1,${Ue.height?ve.height/Ue.height:1},1)`:`translate3d(${ve.left-Ue.left}px,0,0) scale3d(${Ue.width?ve.width/Ue.width:1},1,1)`,s(()=>{V=setTimeout(()=>{V=null,ke.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",ke.style.transform="none"},70)})}Oe&&w.value===!0&&A(Oe.rootRef.value)}function A(I){const{left:j,width:ie,top:Oe,height:Ie}=g.value.getBoundingClientRect(),ke=I.getBoundingClientRect();let ve=e.vertical===!0?ke.top-Oe:ke.left-j;if(ve<0){g.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(ve),W();return}ve+=e.vertical===!0?ke.height-Ie:ke.width-ie,ve>0&&(g.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(ve),W())}function W(){const I=g.value;if(I===null)return;const j=I.getBoundingClientRect(),ie=e.vertical===!0?I.scrollTop:Math.abs(I.scrollLeft);ye.value===!0?(M.value=Math.ceil(ie+j.width)<I.scrollWidth-1,T.value=ie>0):(M.value=ie>0,T.value=e.vertical===!0?Math.ceil(ie+j.height)<I.scrollHeight:Math.ceil(ie+j.width)<I.scrollWidth)}function z(I){E!==null&&clearInterval(E),E=setInterval(()=>{O(I)===!0&&ee()},5)}function ge(){z(we.value===!0?Number.MAX_SAFE_INTEGER:0)}function _e(){z(we.value===!0?0:Number.MAX_SAFE_INTEGER)}function ee(){E!==null&&(clearInterval(E),E=null)}function ae(I,j){const ie=Array.prototype.filter.call(g.value.children,Ue=>Ue===j||Ue.matches&&Ue.matches(".q-tab.q-focusable")===!0),Oe=ie.length;if(Oe===0)return;if(I===36)return A(ie[0]),ie[0].focus(),!0;if(I===35)return A(ie[Oe-1]),ie[Oe-1].focus(),!0;const Ie=I===(e.vertical===!0?38:37),ke=I===(e.vertical===!0?40:39),ve=Ie===!0?-1:ke===!0?1:void 0;if(ve!==void 0){const Ue=ye.value===!0?-1:1,We=ie.indexOf(j)+ve*Ue;return We>=0&&We<Oe&&(A(ie[We]),ie[We].focus({preventScroll:!0})),!0}}const Be=S(()=>we.value===!0?{get:I=>Math.abs(I.scrollLeft),set:(I,j)=>{I.scrollLeft=-j}}:e.vertical===!0?{get:I=>I.scrollTop,set:(I,j)=>{I.scrollTop=j}}:{get:I=>I.scrollLeft,set:(I,j)=>{I.scrollLeft=j}});function O(I){const j=g.value,{get:ie,set:Oe}=Be.value;let Ie=!1,ke=ie(j);const ve=I<ke?-1:1;return ke+=ve*5,ke<0?(Ie=!0,ke=0):(ve===-1&&ke<=I||ve===1&&ke>=I)&&(Ie=!0,ke=I),Oe(j,ke),W(),Ie}function xe(I,j){for(const ie in I)if(I[ie]!==j[ie])return!1;return!0}function wt(){let I=null,j={matchedLen:0,queryDiff:9999,hrefLen:0};const ie=p.filter(ve=>ve.routeData!==void 0&&ve.routeData.hasRouterLink.value===!0),{hash:Oe,query:Ie}=a.$route,ke=Object.keys(Ie).length;for(const ve of ie){const Ue=ve.routeData.exact.value===!0;if(ve.routeData[Ue===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:We,query:Ct,matched:yn,href:ll}=ve.routeData.resolvedLink.value,nn=Object.keys(Ct).length;if(Ue===!0){if(We!==Oe||nn!==ke||xe(Ie,Ct)===!1)continue;I=ve.name.value;break}if(We!==""&&We!==Oe||nn!==0&&xe(Ct,Ie)===!1)continue;const ct={matchedLen:yn.length,queryDiff:ke-nn,hrefLen:ll.length-We.length};if(ct.matchedLen>j.matchedLen){I=ve.name.value,j=ct;continue}else if(ct.matchedLen!==j.matchedLen)continue;if(ct.queryDiff<j.queryDiff)I=ve.name.value,j=ct;else if(ct.queryDiff!==j.queryDiff)continue;ct.hrefLen>j.hrefLen&&(I=ve.name.value,j=ct)}I===null&&p.some(ve=>ve.routeData===void 0&&ve.name.value===C.value)===!0||X({name:I,setCurrent:!0})}function $t(I){if(u(),D.value!==!0&&y.value!==null&&I.target&&typeof I.target.closest=="function"){const j=I.target.closest(".q-tab");j&&y.value.contains(j)===!0&&(D.value=!0,w.value===!0&&A(j))}}function ut(){o(()=>{D.value=!1},30)}function Et(){Wt.avoidRouteWatcher===!1?d(wt):v()}function St(){if($===void 0){const I=de(()=>a.$route.fullPath,Et);$=()=>{I(),$=void 0}}}function zt(I){p.push(I),b.value++,qe(),I.routeData===void 0||a.$route===void 0?d(()=>{if(w.value===!0){const j=C.value,ie=j!=null&&j!==""?p.find(Oe=>Oe.name.value===j):null;ie&&A(ie.rootRef.value)}}):(St(),I.routeData.hasRouterLink.value===!0&&Et())}function gn(I){p.splice(p.indexOf(I),1),b.value--,qe(),$!==void 0&&I.routeData!==void 0&&(p.every(j=>j.routeData===void 0)===!0&&$(),Et())}const Wt={currentModel:C,tabProps:Z,hasFocus:D,hasActiveTab:J,registerTab:zt,unregisterTab:gn,verifyRouteModel:Et,updateModel:X,onKbdNavigate:ae,avoidRouteWatcher:!1};Mo(yr,Wt);function vn(){V!==null&&clearTimeout(V),ee(),$!==void 0&&$()}let ze;return Je(vn),Va(()=>{ze=$!==void 0,vn()}),Ba(()=>{ze===!0&&St(),qe()}),()=>k("div",{ref:y,class:Ee.value,role:"tablist",onFocusin:$t,onFocusout:ut},[k(Fo,{onResize:Ve}),k("div",{ref:g,class:x.value,onScroll:W},Le(t.default)),k(Ke,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(M.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||l.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:ge,onTouchstartPassive:ge,onMouseupPassive:ee,onMouseleavePassive:ee,onTouchendPassive:ee}),k(Ke,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(T.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||l.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:_e,onTouchstartPassive:_e,onMouseupPassive:ee,onMouseleavePassive:ee,onTouchendPassive:ee})])}}),vc=Se({name:"QField",inheritAttrs:!1,props:jl,emits:br,setup(){return _r(kr())}});function Ki(e,t,n){if(n<=t)return t;const a=n-t+1;let l=t+(e-t)%a;return l<t&&(l=a+l),l===0?0:l}const Gi=e=>["add","add-unique","toggle"].includes(e),yc=".*+?^${}()|[]\\",pc=Object.keys(jl);var Wn=Se({name:"QSelect",inheritAttrs:!1,props:{...Pr,...Do,...jl,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Gi},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...br,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:t,emit:n}){const{proxy:a}=Fe(),{$q:l}=a,i=K(!1),r=K(!1),s=K(-1),o=K(""),u=K(!1),d=K(!1);let v=null,y,g,C,w=null,M,T,q,p;const b=K(null),D=K(null),V=K(null),E=K(null),$=K(null),Z=To(e),J=$o($i),ce=S(()=>Array.isArray(e.options)?e.options.length:0),Ee=S(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:x,virtualScrollSliceSizeComputed:se,localResetVirtualScroll:ye,padVirtualScroll:we,onVirtualScrollEvt:X,scrollTo:qe,setVirtualScrollSize:Ve}=$r({virtualScrollLength:ce,getVirtualScrollTarget:Ws,getVirtualScrollEl:qi,virtualScrollItemSizeComputed:Ee}),N=kr(),A=S(()=>{const m=e.mapOptions===!0&&e.multiple!==!0,F=e.modelValue!==void 0&&(e.modelValue!==null||m===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const R=e.mapOptions===!0&&y!==void 0?y:[],le=F.map(De=>ll(De,R));return e.modelValue===null&&m===!0?le.filter(De=>De!==null):le}return F}),W=S(()=>{const m={};return pc.forEach(F=>{const R=e[F];R!==void 0&&(m[F]=R)}),m}),z=S(()=>e.optionsDark===null?N.isDark.value:e.optionsDark),ge=S(()=>Ri(A.value)),_e=S(()=>{let m="q-field__input q-placeholder col";return e.hideSelected===!0||A.value.length===0?[m,e.inputClass]:(m+=" q-field__input--padding",e.inputClass===void 0?m:[m,e.inputClass])}),ee=S(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),ae=S(()=>ce.value===0),Be=S(()=>A.value.map(m=>I.value(m)).join(", ")),O=S(()=>e.displayValue!==void 0?e.displayValue:Be.value),xe=S(()=>e.optionsHtml===!0?()=>!0:m=>m!=null&&m.html===!0),wt=S(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||A.value.some(xe.value))),$t=S(()=>N.focused.value===!0?e.tabindex:-1),ut=S(()=>{const m={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":i.value===!0?"true":"false","aria-controls":`${N.targetUid.value}_lb`};return s.value>=0&&(m["aria-activedescendant"]=`${N.targetUid.value}_${s.value}`),m}),Et=S(()=>({id:`${N.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),St=S(()=>A.value.map((m,F)=>({index:F,opt:m,html:xe.value(m),selected:!0,removeAtIndex:ve,toggleOption:We,tabindex:$t.value}))),zt=S(()=>{if(ce.value===0)return[];const{from:m,to:F}=x.value;return e.options.slice(m,F).map((R,le)=>{const De=j.value(R)===!0,Ce=m+le,Ne={clickable:!0,active:!1,activeClass:vn.value,manualFocus:!0,focused:!1,disable:De,tabindex:-1,dense:e.optionsDense,dark:z.value,role:"option",id:`${N.targetUid.value}_${Ce}`,onClick:()=>{We(R)}};return De!==!0&&(ct(R)===!0&&(Ne.active=!0),s.value===Ce&&(Ne.focused=!0),Ne["aria-selected"]=Ne.active===!0?"true":"false",l.platform.is.desktop===!0&&(Ne.onMousemove=()=>{i.value===!0&&Ct(Ce)})),{index:Ce,opt:R,html:xe.value(R),label:I.value(R),selected:Ne.active,focused:Ne.focused,toggleOption:We,setOptionIndex:Ct,itemProps:Ne}})}),gn=S(()=>e.dropdownIcon!==void 0?e.dropdownIcon:l.iconSet.arrow.dropdown),Wt=S(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),vn=S(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),ze=S(()=>nn(e.optionValue,"value")),I=S(()=>nn(e.optionLabel,"label")),j=S(()=>nn(e.optionDisable,"disable")),ie=S(()=>A.value.map(m=>ze.value(m))),Oe=S(()=>{const m={onInput:$i,onChange:J,onKeydown:Ti,onKeyup:Mi,onKeypress:Di,onFocus:Si,onClick(F){g===!0&&on(F)}};return m.onCompositionstart=m.onCompositionupdate=m.onCompositionend=J,m});de(A,m=>{y=m,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&N.innerLoading.value!==!0&&(r.value!==!0&&i.value!==!0||ge.value!==!0)&&(C!==!0&&kn(),(r.value===!0||i.value===!0)&&pn(""))},{immediate:!0}),de(()=>e.fillInput,kn),de(i,il),de(ce,lo);function Ie(m){return e.emitValue===!0?ze.value(m):m}function ke(m){if(m>-1&&m<A.value.length)if(e.multiple===!0){const F=e.modelValue.slice();n("remove",{index:m,value:F.splice(m,1)[0]}),n("update:modelValue",F)}else n("update:modelValue",null)}function ve(m){ke(m),N.focus()}function Ue(m,F){const R=Ie(m);if(e.multiple!==!0){e.fillInput===!0&&Bn(I.value(m),!0,!0),n("update:modelValue",R);return}if(A.value.length===0){n("add",{index:0,value:R}),n("update:modelValue",e.multiple===!0?[R]:R);return}if(F===!0&&ct(m)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const le=e.modelValue.slice();n("add",{index:le.length,value:R}),le.push(R),n("update:modelValue",le)}function We(m,F){if(N.editable.value!==!0||m===void 0||j.value(m)===!0)return;const R=ze.value(m);if(e.multiple!==!0){F!==!0&&(Bn(e.fillInput===!0?I.value(m):"",!0,!0),an()),D.value!==null&&D.value.focus(),(A.value.length===0||Cn(ze.value(A.value[0]),R)!==!0)&&n("update:modelValue",e.emitValue===!0?R:m);return}if((g!==!0||u.value===!0)&&N.focus(),Si(),A.value.length===0){const Ce=e.emitValue===!0?R:m;n("add",{index:0,value:Ce}),n("update:modelValue",e.multiple===!0?[Ce]:Ce);return}const le=e.modelValue.slice(),De=ie.value.findIndex(Ce=>Cn(Ce,R));if(De>-1)n("remove",{index:De,value:le.splice(De,1)[0]});else{if(e.maxValues!==void 0&&le.length>=e.maxValues)return;const Ce=e.emitValue===!0?R:m;n("add",{index:le.length,value:Ce}),le.push(Ce)}n("update:modelValue",le)}function Ct(m){if(l.platform.is.desktop!==!0)return;const F=m>-1&&m<ce.value?m:-1;s.value!==F&&(s.value=F)}function yn(m=1,F){if(i.value===!0){let R=s.value;do R=Ki(R+m,-1,ce.value-1);while(R!==-1&&R!==s.value&&j.value(e.options[R])===!0);s.value!==R&&(Ct(R),qe(R),F!==!0&&e.useInput===!0&&e.fillInput===!0&&da(R>=0?I.value(e.options[R]):M))}}function ll(m,F){const R=le=>Cn(ze.value(le),m);return e.options.find(R)||F.find(R)||m}function nn(m,F){const R=m!==void 0?m:F;return typeof R=="function"?R:le=>le!==null&&typeof le=="object"&&R in le?le[R]:le}function ct(m){const F=ze.value(m);return ie.value.find(R=>Cn(R,F))!==void 0}function Si(m){e.useInput===!0&&D.value!==null&&(m===void 0||D.value===m.target&&m.target.value===Be.value)&&D.value.select()}function Ci(m){aa(m,27)===!0&&i.value===!0&&(on(m),an(),kn()),n("keyup",m)}function Mi(m){const{value:F}=m.target;if(m.keyCode!==void 0){Ci(m);return}if(m.target.value="",v!==null&&(clearTimeout(v),v=null),kn(),typeof F=="string"&&F.length!==0){const R=F.toLocaleLowerCase(),le=Ce=>{const Ne=e.options.find(tt=>Ce.value(tt).toLocaleLowerCase()===R);return Ne===void 0?!1:(A.value.indexOf(Ne)===-1?We(Ne):an(),!0)},De=Ce=>{le(ze)!==!0&&(le(I)===!0||Ce===!0||pn(F,!0,()=>De(!0)))};De()}else N.clearValue(m)}function Di(m){n("keypress",m)}function Ti(m){if(n("keydown",m),pr(m)===!0)return;const F=o.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),R=m.shiftKey!==!0&&e.multiple!==!0&&(s.value>-1||F===!0);if(m.keyCode===27){jn(m);return}if(m.keyCode===9&&R===!1){bn();return}if(m.target===void 0||m.target.id!==N.targetUid.value||N.editable.value!==!0)return;if(m.keyCode===40&&N.innerLoading.value!==!0&&i.value===!1){je(m),_n();return}if(m.keyCode===8&&e.hideSelected!==!0&&o.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?ke(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(m.keyCode===35||m.keyCode===36)&&(typeof o.value!="string"||o.value.length===0)&&(je(m),s.value=-1,yn(m.keyCode===36?1:-1,e.multiple)),(m.keyCode===33||m.keyCode===34)&&se.value!==void 0&&(je(m),s.value=Math.max(-1,Math.min(ce.value,s.value+(m.keyCode===33?-1:1)*se.value.view)),yn(m.keyCode===33?1:-1,e.multiple)),(m.keyCode===38||m.keyCode===40)&&(je(m),yn(m.keyCode===38?-1:1,e.multiple));const le=ce.value;if((q===void 0||p<Date.now())&&(q=""),le>0&&e.useInput!==!0&&m.key!==void 0&&m.key.length===1&&m.altKey===!1&&m.ctrlKey===!1&&m.metaKey===!1&&(m.keyCode!==32||q.length!==0)){i.value!==!0&&_n(m);const De=m.key.toLocaleLowerCase(),Ce=q.length===1&&q[0]===De;p=Date.now()+1500,Ce===!1&&(je(m),q+=De);const Ne=new RegExp("^"+q.split("").map(rl=>yc.indexOf(rl)>-1?"\\"+rl:rl).join(".*"),"i");let tt=s.value;if(Ce===!0||tt<0||Ne.test(I.value(e.options[tt]))!==!0)do tt=Ki(tt+1,-1,le-1);while(tt!==s.value&&(j.value(e.options[tt])===!0||Ne.test(I.value(e.options[tt]))!==!0));s.value!==tt&&dt(()=>{Ct(tt),qe(tt),tt>=0&&e.useInput===!0&&e.fillInput===!0&&da(I.value(e.options[tt]))});return}if(!(m.keyCode!==13&&(m.keyCode!==32||e.useInput===!0||q!=="")&&(m.keyCode!==9||R===!1))){if(m.keyCode!==9&&je(m),s.value>-1&&s.value<le){We(e.options[s.value]);return}if(F===!0){const De=(Ce,Ne)=>{if(Ne){if(Gi(Ne)!==!0)return}else Ne=e.newValueMode;if(Ce==null)return;Bn("",e.multiple!==!0,!0),(Ne==="toggle"?We:Ue)(Ce,Ne==="add-unique"),e.multiple!==!0&&(D.value!==null&&D.value.focus(),an())};if(e.onNewValue!==void 0?n("newValue",o.value,De):De(o.value),e.multiple!==!0)return}i.value===!0?bn():N.innerLoading.value!==!0&&_n()}}function qi(){return g===!0?$.value:V.value!==null&&V.value.contentEl!==null?V.value.contentEl:void 0}function Ws(){return qi()}function js(){return e.hideSelected===!0?[]:t["selected-item"]!==void 0?St.value.map(m=>t["selected-item"](m)).slice():t.selected!==void 0?[].concat(t.selected()):e.useChips===!0?St.value.map((m,F)=>k(ia,{key:"option-"+F,removable:N.editable.value===!0&&j.value(m.opt)!==!0,dense:!0,textColor:e.color,tabindex:$t.value,onRemove(){m.removeAtIndex(F)}},()=>k("span",{class:"ellipsis",[m.html===!0?"innerHTML":"textContent"]:I.value(m.opt)}))):[k("span",{[wt.value===!0?"innerHTML":"textContent"]:O.value})]}function Pi(){if(ae.value===!0)return t["no-option"]!==void 0?t["no-option"]({inputValue:o.value}):void 0;const m=t.option!==void 0?t.option:R=>k(Qe,{key:R.index,...R.itemProps},()=>k(te,()=>k(re,()=>k("span",{[R.html===!0?"innerHTML":"textContent"]:R.label}))));let F=we("div",zt.value.map(m));return t["before-options"]!==void 0&&(F=t["before-options"]().concat(F)),Rn(t["after-options"],F)}function Qs(m,F){const R=F===!0?{...ut.value,...N.splitAttrs.attributes.value}:void 0,le={ref:F===!0?D:void 0,key:"i_t",class:_e.value,style:e.inputStyle,value:o.value!==void 0?o.value:"",type:"search",...R,id:F===!0?N.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":m===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Oe.value};return m!==!0&&g===!0&&(Array.isArray(le.class)===!0?le.class=[...le.class,"no-pointer-events"]:le.class+=" no-pointer-events"),k("input",le)}function $i(m){v!==null&&(clearTimeout(v),v=null),!(m&&m.target&&m.target.qComposing===!0)&&(da(m.target.value||""),C=!0,M=o.value,N.focused.value!==!0&&(g!==!0||u.value===!0)&&N.focus(),e.onFilter!==void 0&&(v=setTimeout(()=>{v=null,pn(o.value)},e.inputDebounce)))}function da(m){o.value!==m&&(o.value=m,n("inputValue",m))}function Bn(m,F,R){C=R!==!0,e.useInput===!0&&(da(m),(F===!0||R!==!0)&&(M=m),F!==!0&&pn(m))}function pn(m,F,R){if(e.onFilter===void 0||F!==!0&&N.focused.value!==!0)return;N.innerLoading.value===!0?n("filterAbort"):(N.innerLoading.value=!0,d.value=!0),m!==""&&e.multiple!==!0&&A.value.length!==0&&C!==!0&&m===I.value(A.value[0])&&(m="");const le=setTimeout(()=>{i.value===!0&&(i.value=!1)},10);w!==null&&clearTimeout(w),w=le,n("filter",m,(De,Ce)=>{(F===!0||N.focused.value===!0)&&w===le&&(clearTimeout(w),typeof De=="function"&&De(),d.value=!1,dt(()=>{N.innerLoading.value=!1,N.editable.value===!0&&(F===!0?i.value===!0&&an():i.value===!0?il(!0):i.value=!0),typeof Ce=="function"&&dt(()=>{Ce(a)}),typeof R=="function"&&dt(()=>{R(a)})}))},()=>{N.focused.value===!0&&w===le&&(clearTimeout(w),N.innerLoading.value=!1,d.value=!1),i.value===!0&&(i.value=!1)})}function Ks(){return k(Er,{ref:V,class:ee.value,style:e.popupContentStyle,modelValue:i.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&ae.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:z.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Wt.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Et.value,onScrollPassive:X,onBeforeShow:Ii,onBeforeHide:Gs,onShow:Zs},Pi)}function Gs(m){Ai(m),bn()}function Zs(){Ve()}function Js(m){on(m),D.value!==null&&D.value.focus(),u.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Xs(m){on(m),dt(()=>{u.value=!1})}function eo(){const m=[k(vc,{class:`col-auto ${N.fieldClass.value}`,...W.value,for:N.targetUid.value,dark:z.value,square:!0,loading:d.value,itemAligned:!1,filled:!0,stackLabel:o.value.length!==0,...N.splitAttrs.listeners.value,onFocus:Js,onBlur:Xs},{...t,rawControl:()=>N.getControl(!0),before:void 0,after:void 0})];return i.value===!0&&m.push(k("div",{ref:$,class:ee.value+" scroll",style:e.popupContentStyle,...Et.value,onClick:jn,onScrollPassive:X},Pi())),k(Cl,{ref:E,modelValue:r.value,position:e.useInput===!0?"top":void 0,transitionShow:T,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Ii,onBeforeHide:to,onHide:no,onShow:ao},()=>k("div",{class:"q-select__dialog"+(z.value===!0?" q-select__dialog--dark q-dark":"")+(u.value===!0?" q-select__dialog--focused":"")},m))}function to(m){Ai(m),E.value!==null&&E.value.__updateRefocusTarget(N.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),N.focused.value=!1}function no(m){an(),N.focused.value===!1&&n("blur",m),kn()}function ao(){const m=document.activeElement;(m===null||m.id!==N.targetUid.value)&&D.value!==null&&D.value!==m&&D.value.focus(),Ve()}function bn(){r.value!==!0&&(s.value=-1,i.value===!0&&(i.value=!1),N.focused.value===!1&&(w!==null&&(clearTimeout(w),w=null),N.innerLoading.value===!0&&(n("filterAbort"),N.innerLoading.value=!1,d.value=!1)))}function _n(m){N.editable.value===!0&&(g===!0?(N.onControlFocusin(m),r.value=!0,dt(()=>{N.focus()})):N.focus(),e.onFilter!==void 0?pn(o.value):(ae.value!==!0||t["no-option"]!==void 0)&&(i.value=!0))}function an(){r.value=!1,bn()}function kn(){e.useInput===!0&&Bn(e.multiple!==!0&&e.fillInput===!0&&A.value.length!==0&&I.value(A.value[0])||"",!0,!0)}function il(m){let F=-1;if(m===!0){if(A.value.length!==0){const R=ze.value(A.value[0]);F=e.options.findIndex(le=>Cn(ze.value(le),R))}ye(F)}Ct(F)}function lo(m,F){i.value===!0&&N.innerLoading.value===!1&&(ye(-1,!0),dt(()=>{i.value===!0&&N.innerLoading.value===!1&&(m>F?ye():il(!0))}))}function Ei(){r.value===!1&&V.value!==null&&V.value.updatePosition()}function Ii(m){m!==void 0&&on(m),n("popupShow",m),N.hasPopupOpen=!0,N.onControlFocusin(m)}function Ai(m){m!==void 0&&on(m),n("popupHide",m),N.hasPopupOpen=!1,N.onControlFocusout(m)}function Oi(){g=l.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?t["no-option"]!==void 0||e.onFilter!==void 0||ae.value===!1:!0),T=l.platform.is.ios===!0&&g===!0&&e.useInput===!0?"fade":e.transitionShow}return qo(Oi),Po(Ei),Oi(),Je(()=>{v!==null&&clearTimeout(v)}),Object.assign(a,{showPopup:_n,hidePopup:an,removeAtIndex:ke,add:Ue,toggleOption:We,getOptionIndex:()=>s.value,setOptionIndex:Ct,moveOptionSelection:yn,filter:pn,updateMenuPosition:Ei,updateInputValue:Bn,isOptionSelected:ct,getEmittingOptionValue:Ie,isOptionDisabled:(...m)=>j.value.apply(null,m)===!0,getOptionValue:(...m)=>ze.value.apply(null,m),getOptionLabel:(...m)=>I.value.apply(null,m)}),Object.assign(N,{innerValue:A,fieldClass:S(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:b,targetRef:D,hasValue:ge,showPopup:_n,floatingLabel:S(()=>e.hideSelected!==!0&&ge.value===!0||typeof o.value=="number"||o.value.length!==0||Ri(e.displayValue)),getControlChild:()=>{if(N.editable.value!==!1&&(r.value===!0||ae.value!==!0||t["no-option"]!==void 0))return g===!0?eo():Ks();N.hasPopupOpen===!0&&(N.hasPopupOpen=!1)},controlEvents:{onFocusin(m){N.onControlFocusin(m)},onFocusout(m){N.onControlFocusout(m,()=>{kn(),bn()})},onClick(m){if(jn(m),g!==!0&&i.value===!0){bn(),D.value!==null&&D.value.focus();return}_n(m)}},getControl:m=>{const F=js(),R=m===!0||r.value!==!0||g!==!0;if(e.useInput===!0)F.push(Qs(m,R));else if(N.editable.value===!0){const De=R===!0?ut.value:void 0;F.push(k("input",{ref:R===!0?D:void 0,key:"d_t",class:"q-select__focus-target",id:R===!0?N.targetUid.value:void 0,value:O.value,readonly:!0,"data-autofocus":m===!0||e.autofocus===!0||void 0,...De,onKeydown:Ti,onKeyup:Ci,onKeypress:Di})),R===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&F.push(k("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Mi}))}if(Z.value!==void 0&&e.disable!==!0&&ie.value.length!==0){const De=ie.value.map(Ce=>k("option",{value:Ce,selected:!0}));F.push(k("select",{class:"hidden",name:Z.value,multiple:e.multiple},De))}const le=e.useInput===!0||R!==!0?void 0:N.splitAttrs.attributes.value;return k("div",{class:"q-field__native row items-center",...le,...N.splitAttrs.listeners.value},F)},getInnerAppend:()=>e.loading!==!0&&d.value!==!0&&e.hideDropdownIcon!==!0?[k(Ke,{class:"q-select__dropdown-icon"+(i.value===!0?" rotate-180":""),name:gn.value})]:null}),_r(N)}});const ni={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},bc=Object.keys(ni);ni.all=!0;function Zi(e){const t={};for(const n of bc)e[n]===!0&&(t[n]=!0);return Object.keys(t).length===0?ni:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const _c=["INPUT","TEXTAREA"];function Ji(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&_c.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function kc(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((n,a)=>{const l=parseFloat(n);l&&(t[a]=l)}),t}var wc=vr({name:"touch-swipe",beforeMount(e,{value:t,arg:n,modifiers:a}){if(a.mouse!==!0&&Sn.has.touch!==!0)return;const l=a.mouseCapture===!0?"Capture":"",i={handler:t,sensitivity:kc(n),direction:Zi(a),noop:sr,mouseStart(r){Ji(r,i)&&Eo(r)&&(Kt(i,"temp",[[document,"mousemove","move",`notPassive${l}`],[document,"mouseup","end","notPassiveCapture"]]),i.start(r,!0))},touchStart(r){if(Ji(r,i)){const s=r.target;Kt(i,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","notPassiveCapture"],[s,"touchend","end","notPassiveCapture"]]),i.start(r)}},start(r,s){Sn.is.firefox===!0&&sl(e,!0);const o=Sl(r);i.event={x:o.left,y:o.top,time:Date.now(),mouse:s===!0,dir:!1}},move(r){if(i.event===void 0)return;if(i.event.dir!==!1){je(r);return}const s=Date.now()-i.event.time;if(s===0)return;const o=Sl(r),u=o.left-i.event.x,d=Math.abs(u),v=o.top-i.event.y,y=Math.abs(v);if(i.event.mouse!==!0){if(d<i.sensitivity[1]&&y<i.sensitivity[1]){i.end(r);return}}else if(window.getSelection().toString()!==""){i.end(r);return}else if(d<i.sensitivity[2]&&y<i.sensitivity[2])return;const g=d/s,C=y/s;i.direction.vertical===!0&&d<y&&d<100&&C>i.sensitivity[0]&&(i.event.dir=v<0?"up":"down"),i.direction.horizontal===!0&&d>y&&y<100&&g>i.sensitivity[0]&&(i.event.dir=u<0?"left":"right"),i.direction.up===!0&&d<y&&v<0&&d<100&&C>i.sensitivity[0]&&(i.event.dir="up"),i.direction.down===!0&&d<y&&v>0&&d<100&&C>i.sensitivity[0]&&(i.event.dir="down"),i.direction.left===!0&&d>y&&u<0&&y<100&&g>i.sensitivity[0]&&(i.event.dir="left"),i.direction.right===!0&&d>y&&u>0&&y<100&&g>i.sensitivity[0]&&(i.event.dir="right"),i.event.dir!==!1?(je(r),i.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ca(),i.styleCleanup=w=>{i.styleCleanup=void 0,document.body.classList.remove("non-selectable");const M=()=>{document.body.classList.remove("no-pointer-events--children")};w===!0?setTimeout(M,50):M()}),i.handler({evt:r,touch:i.event.mouse!==!0,mouse:i.event.mouse,direction:i.event.dir,duration:s,distance:{x:d,y}})):i.end(r)},end(r){i.event!==void 0&&(Tn(i,"temp"),Sn.is.firefox===!0&&sl(e,!1),i.styleCleanup!==void 0&&i.styleCleanup(!0),r!==void 0&&i.event.dir!==!1&&je(r),i.event=void 0)}};if(e.__qtouchswipe=i,a.mouse===!0){const r=a.mouseCapture===!0||a.mousecapture===!0?"Capture":"";Kt(i,"main",[[e,"mousedown","mouseStart",`passive${r}`]])}Sn.has.touch===!0&&Kt(i,"main",[[e,"touchstart","touchStart",`passive${a.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const n=e.__qtouchswipe;n!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&n.end(),n.handler=t.value),n.direction=Zi(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(Tn(t,"main"),Tn(t,"temp"),Sn.is.firefox===!0&&sl(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchswipe)}});function Sc(){const e=new Map;return{getCache:function(t,n){return e[t]===void 0?e[t]=n:e[t]},getCacheWithFn:function(t,n){return e[t]===void 0?e[t]=n():e[t]}}}const Kr={name:{required:!0},disable:Boolean},Xi={setup(e,{slots:t}){return()=>k("div",{class:"q-panel scroll",role:"tabpanel"},Le(t.default))}},Gr={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Zr=["update:modelValue","beforeTransition","transition"];function Jr(){const{props:e,emit:t,proxy:n}=Fe(),{getCacheWithFn:a}=Sc();let l,i;const r=K(null),s=K(null);function o(x){const se=e.vertical===!0?"up":"left";E((n.$q.lang.rtl===!0?-1:1)*(x.direction===se?1:-1))}const u=S(()=>[[wc,o,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),d=S(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),v=S(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),y=S(()=>`--q-transition-duration: ${e.transitionDuration}ms`),g=S(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),C=S(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),w=S(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);de(()=>e.modelValue,(x,se)=>{const ye=p(x)===!0?b(x):-1;i!==!0&&V(ye===-1?0:ye<b(se)?-1:1),r.value!==ye&&(r.value=ye,t("beforeTransition",x,se),dt(()=>{t("transition",x,se)}))});function M(){E(1)}function T(){E(-1)}function q(x){t("update:modelValue",x)}function p(x){return x!=null&&x!==""}function b(x){return l.findIndex(se=>se.props.name===x&&se.props.disable!==""&&se.props.disable!==!0)}function D(){return l.filter(x=>x.props.disable!==""&&x.props.disable!==!0)}function V(x){const se=x!==0&&e.animated===!0&&r.value!==-1?"q-transition--"+(x===-1?d.value:v.value):null;s.value!==se&&(s.value=se)}function E(x,se=r.value){let ye=se+x;for(;ye>-1&&ye<l.length;){const we=l[ye];if(we!==void 0&&we.props.disable!==""&&we.props.disable!==!0){V(x),i=!0,t("update:modelValue",we.props.name),setTimeout(()=>{i=!1});return}ye+=x}e.infinite===!0&&l.length!==0&&se!==-1&&se!==l.length&&E(x,x===-1?l.length:-1)}function $(){const x=b(e.modelValue);return r.value!==x&&(r.value=x),!0}function Z(){const x=p(e.modelValue)===!0&&$()&&l[r.value];return e.keepAlive===!0?[k(Io,C.value,[k(w.value===!0?a(g.value,()=>({...Xi,name:g.value})):Xi,{key:g.value,style:y.value},()=>x)])]:[k("div",{class:"q-panel scroll",style:y.value,key:g.value,role:"tabpanel"},[x])]}function J(){if(l.length!==0)return e.animated===!0?[k(la,{name:s.value},Z)]:Z()}function ce(x){return l=gr(Le(x.default,[])).filter(se=>se.props!==null&&se.props.slot===void 0&&p(se.props.name)===!0),l.length}function Ee(){return l}return Object.assign(n,{next:M,previous:T,goTo:q}),{panelIndex:r,panelDirectives:u,updatePanelsList:ce,updatePanelIndex:$,getPanelContent:J,getEnabledPanels:D,getPanels:Ee,isValidPanelName:p,keepAliveProps:C,needsUniqueKeepAliveWrapper:w,goToPanelByOffset:E,goToPanel:q,nextPanel:M,previousPanel:T}}var pl=Se({name:"QTabPanel",props:Kr,setup(e,{slots:t}){return()=>k("div",{class:"q-tab-panel",role:"tabpanel"},Le(t.default))}}),Cc=Se({name:"QTabPanels",props:{...Gr,...Ft},emits:Zr,setup(e,{slots:t}){const n=Fe(),a=Yt(e,n.proxy.$q),{updatePanelsList:l,getPanelContent:i,panelDirectives:r}=Jr(),s=S(()=>"q-tab-panels q-panel-parent"+(a.value===!0?" q-tab-panels--dark q-dark":""));return()=>(l(t),Hl("div",{class:s.value},i(),"pan",e.swipeable,()=>r.value))}});const Mc=it({name:"EssentialLink",props:["market","profiles","relays-data","read-notes"],data:function(){return{tab:"marketplace",merchantPubkey:null,relayUrl:null,marketData:{pubkey:null,relays:[],opts:{identifier:null,name:null,about:null,merchants:[],ui:{picture:null,banner:null,theme:null,darkMode:!1}}},themeOptions:["classic","bitcoin","flamingo","cyber","freedom","mint","autumn","monochrome","salvador"]}},methods:{addMerchant:async function(){if(!isValidKey(this.merchantPubkey,"npub")){$q.notify({message:"Invalid Public Key!",type:"warning"});return}const e=isValidKeyHex(this.merchantPubkey)?this.merchantPubkey:NostrTools.nip19.decode(this.merchantPubkey).data;this.marketData.opts.merchants.push(e),this.updateMarketData(),this.merchantPubkey=null},removeMerchant:async function(e){console.log("### removeMerchant",e),this.marketData.opts.merchants=this.marketData.opts.merchants.filter(t=>t!==e),this.updateMarketData()},addRelay:async function(){const e=(this.relayUrl||"").trim();if(!e.startsWith("wss://")&&!e.startsWith("ws://")){this.relayUrl=null,$q.notify({timeout:5e3,type:"warning",message:"Invalid relay URL.",caption:"Should start with 'wss://'' or 'ws://'"});return}try{new URL(e),this.marketData.relays.push(e),this.updateMarketData()}catch(t){$q.notify({timeout:5e3,type:"warning",message:"Invalid relay URL.",caption:`Error: ${t}`})}this.relayUrl=null},removeRelay:async function(e){this.marketData.relays=this.marketData.relays.filter(t=>t!==e),this.updateMarketData()},updateMarketData:function(){this.$emit("market-update",this.cloneMarketData())},publishNaddr(){this.$emit("publish-naddr")},deleteMarket(){this.$emit("delete-market",this.cloneMarketData())},applyLookAndFeel(){this.$emit("apply-ui",this.cloneMarketData())},markNoteAsRead(e){this.$emit("note-read",e)},cloneMarketData(){return JSON.parse(JSON.stringify(this.marketData))},merchantProfile(e){var t;return(t=this.profiles)==null?void 0:t.find(n=>n.pubkey===e)},relayData(e){return(this.relaysData||[]).find(t=>t.relayUrl===e)||{connected:!1,error:null}}},created:async function(){var e;this.marketData={...this.marketData,...JSON.parse(JSON.stringify(this.market||{}))},(e=this.readNotes)!=null&&e.merchants||(this.tab="merchants"),console.log("### relaysData",this.relaysData)}}),Dc={class:"q-pt-md"},Tc={class:"q-gutter-y-md"},qc={class:"q-pa-md"},Pc={class:"q-gutter-y-md"},$c=h("strong",null,"Note",-1),Ec=h("div",{class:"text-caption"},[h("ul",null,[h("li",null,[h("span",{class:"text-subtitle1"}," Here one can customize the look and feel of the Market. ")]),h("li",null,[h("span",{class:"text-subtitle1"},[ne(" When the Market Profile is shared (via "),h("code",null,"naddr"),ne(" ) these customisations will be available to the customers. ")])])])],-1),Ic=h("div",{class:"q-mb-md"},[h("strong",null,"Information")],-1),Ac=h("div",{class:"q-mb-md q-mt-lg"},[h("strong",null,"UI Configurations")],-1),Oc=h("div",{class:"lt-md q-mt-lg"},null,-1),xc=h("strong",null,"Note",-1),Nc=h("div",{class:"text-caption"},[h("ul",null,[h("li",null,[h("span",{class:"text-subtitle1"}," Here all the mercants of the marketplace are listed. ")]),h("li",null,[h("span",{class:"text-subtitle1"}," You can easily add a new merchant by entering its public key in the input below. ")]),h("li",null,[h("span",{class:"text-subtitle1"}," When a merchant is added all its products and stalls will be available in the Market page. ")])])],-1),Rc=["src"],Lc=["src"],Vc={class:"text-caption text-grey ellipsis-2-lines"},Bc={key:0,class:"text-caption text-grey ellipsis-2-lines"},Fc={class:"float-right"};function Yc(e,t,n,a,l,i){return _(),U(lt,null,{default:f(()=>[c(he,null,{default:f(()=>[h("div",Dc,[h("div",Tc,[c(gc,{modelValue:e.tab,"onUpdate:modelValue":t[3]||(t[3]=r=>e.tab=r),"active-color":"primary",align:"justify"},{default:f(()=>[c(yl,{name:"marketplace",label:"Look And Feel",onUpdate:t[0]||(t[0]=r=>e.tab=r.name)}),c(yl,{name:"merchants",label:"Merchants",onUpdate:t[1]||(t[1]=r=>e.tab=r.name)}),c(yl,{name:"relays",label:"Relays",onUpdate:t[2]||(t[2]=r=>e.tab=r.name)})]),_:1},8,["modelValue"])])])]),_:1}),c(Te),c(he,null,{default:f(()=>[h("div",qc,[h("div",Pc,[c(Cc,{modelValue:e.tab,"onUpdate:modelValue":t[14]||(t[14]=r=>e.tab=r)},{default:f(()=>[c(pl,{name:"marketplace"},{default:f(()=>{var r;return[(r=e.readNotes)!=null&&r.marketUi?fe("",!0):(_(),U(Nt,{key:0,class:"q-mb-lg gt-sm",bordered:""},{default:f(()=>[c(Qe,null,{default:f(()=>[c(te,{avatar:""},{default:f(()=>[c(yt,null,{default:f(()=>[c(Ke,{color:"primary",name:"info",size:"xl"})]),_:1})]),_:1}),c(te,{class:"q-mt-sm q-ml-lg"},{default:f(()=>[c(re,null,{default:f(()=>[$c]),_:1}),c(re,null,{default:f(()=>[Ec]),_:1})]),_:1}),c(te,{side:""},{default:f(()=>[c(Q,{onClick:t[4]||(t[4]=s=>e.markNoteAsRead("marketUi")),size:"lg",outline:"",color:"primary",label:"Got it!",icon:"check_small"})]),_:1})]),_:1})]),_:1})),Ic,c(He,{onChange:e.updateMarketData,outlined:"",modelValue:e.marketData.opts.name,"onUpdate:modelValue":t[5]||(t[5]=s=>e.marketData.opts.name=s),type:"text",label:"Market Name",hint:"Short name for the market",class:"q-mb-md"},null,8,["onChange","modelValue"]),c(He,{onChange:e.updateMarketData,outlined:"",modelValue:e.marketData.opts.about,"onUpdate:modelValue":t[6]||(t[6]=s=>e.marketData.opts.about=s),type:"textarea",rows:"3",label:"Marketplace Description",hint:"It will be displayed on top of the banner image. Can be a longer text.",class:"q-mb-lg"},null,8,["onChange","modelValue"]),Ac,c(He,{onChange:e.updateMarketData,outlined:"",modelValue:e.marketData.opts.ui.picture,"onUpdate:modelValue":t[7]||(t[7]=s=>e.marketData.opts.ui.picture=s),type:"text",label:"Logo",hint:"It will be displayed next to the search input. Can be png, jpg, ico, gif, svg.",class:"q-mb-md"},null,8,["onChange","modelValue"]),c(He,{onChange:e.updateMarketData,outlined:"",modelValue:e.marketData.opts.ui.banner,"onUpdate:modelValue":t[8]||(t[8]=s=>e.marketData.opts.ui.banner=s),type:"text",label:"Banner",hint:"It represents the visual identity of the market. Can be png, jpg, ico, gif, svg.",class:"q-mb-md"},null,8,["onChange","modelValue"]),c(Wn,{onInput:e.updateMarketData,"onUpdate:modelValue":[e.updateMarketData,t[9]||(t[9]=s=>e.marketData.opts.ui.theme=s)],filled:"",modelValue:e.marketData.opts.ui.theme,hint:"The colors of the market will vary based on the theme. It applies to all components (buttons, labels, inputs, etc)",options:e.themeOptions,label:"Marketplace Theme"},null,8,["onInput","onUpdate:modelValue","modelValue","options"]),Oc,c(ya,{onInput:e.updateMarketData,onClick:e.updateMarketData,modelValue:e.marketData.opts.ui.darkMode,"onUpdate:modelValue":t[10]||(t[10]=s=>e.marketData.opts.ui.darkMode=s),label:"Dark Mode",size:"sm",class:"q-mt-sm"},null,8,["onInput","onClick","modelValue"])]}),_:1}),c(pl,{name:"merchants"},{default:f(()=>{var r;return[(r=e.readNotes)!=null&&r.merchants?fe("",!0):(_(),U(Nt,{key:0,class:"q-mb-lg",bordered:""},{default:f(()=>[c(Qe,null,{default:f(()=>[c(te,{avatar:""},{default:f(()=>[c(yt,null,{default:f(()=>[c(Ke,{color:"primary",name:"info",size:"xl"})]),_:1})]),_:1}),c(te,{class:"q-mt-sm q-ml-lg"},{default:f(()=>[c(re,null,{default:f(()=>[xc]),_:1}),c(re,null,{default:f(()=>[Nc]),_:1})]),_:1}),c(te,{side:""},{default:f(()=>[c(Q,{onClick:t[11]||(t[11]=s=>e.markNoteAsRead("merchants")),size:"lg",outline:"",color:"primary",label:"Got it!",icon:"check_small"})]),_:1})]),_:1})]),_:1})),h("div",null,[c(He,{outlined:"",modelValue:e.merchantPubkey,"onUpdate:modelValue":t[12]||(t[12]=s=>e.merchantPubkey=s),onKeydown:Ml(e.addMerchant,["enter"]),type:"text",label:"Pubkey/Npub",hint:"Add merchants"},{default:f(()=>[c(Q,{onClick:e.addMerchant,dense:"",flat:"",icon:"add"},null,8,["onClick"])]),_:1},8,["modelValue","onKeydown"]),c(Nt,{class:"q-mt-md"},{default:f(()=>[(_(!0),B(Ge,null,nt(e.marketData.opts.merchants,s=>(_(),U(Qe,{key:s},{default:f(()=>[c(te,{avatar:""},{default:f(()=>[c(yt,null,{default:f(()=>{var o;return[(o=e.merchantProfile(s))!=null&&o.picture?(_(),B("img",{key:0,src:e.merchantProfile(s).picture},null,8,Rc)):(_(),B("img",{key:1,src:e.$q.config.staticPath+"/images/blank-avatar.webp"},null,8,Lc))]}),_:2},1024)]),_:2},1024),c(te,{class:"q-mt-sm"},{default:f(()=>[c(re,null,{default:f(()=>{var o,u;return[h("strong",null,H(((o=e.merchantProfile(s))==null?void 0:o.name)||((u=e.merchantProfile(s))==null?void 0:u.display_name)),1)]}),_:2},1024),c(re,null,{default:f(()=>[h("div",Vc,[h("p",null,H(s),1)])]),_:2},1024),c(Qt,null,{default:f(()=>[ne(H(s),1)]),_:2},1024)]),_:2},1024),c(te,{side:""},{default:f(()=>[c(Q,{size:"12px",flat:"",dense:"",round:"",icon:"delete",onClick:o=>e.removeMerchant(s)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]}),_:1}),c(pl,{name:"relays"},{default:f(()=>[h("div",null,[h("div",null,[c(He,{outlined:"",modelValue:e.relayUrl,"onUpdate:modelValue":t[13]||(t[13]=r=>e.relayUrl=r),onKeydown:Ml(e.addRelay,["enter"]),type:"text",label:"wss://",hint:"Add realays"},{default:f(()=>[c(Q,{onClick:e.addRelay,dense:"",flat:"",icon:"add"},null,8,["onClick"])]),_:1},8,["modelValue","onKeydown"]),c(Nt,{class:"q-mt-md"},{default:f(()=>[(_(!0),B(Ge,null,nt(e.marketData.relays,r=>(_(),U(Qe,{key:r},{default:f(()=>[c(te,{avatar:""},{default:f(()=>[c(yt,null,{default:f(()=>[c(Ke,{name:"router",color:e.relayData(r).connected?"green":"pink"},null,8,["color"])]),_:2},1024)]),_:2},1024),c(te,{class:"q-mt-sm"},{default:f(()=>[c(re,null,{default:f(()=>[h("strong",null,H(r),1),e.relayData(r).error?(_(),B("div",Bc,[h("p",null,"Error: "+H(e.relayData(r).error),1)])):fe("",!0)]),_:2},1024)]),_:2},1024),c(te,{side:""},{default:f(()=>[c(Q,{size:"12px",flat:"",dense:"",round:"",icon:"delete",onClick:s=>e.removeRelay(r)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),c(Te),c(he,null,{default:f(()=>[h("div",Fc,[c(Q,{onClick:e.deleteMarket,flat:"",label:"Delete Market",icon:"delete",class:"q-ml-lg",color:"negative"},null,8,["onClick"]),c(Q,{onClick:e.applyLookAndFeel,flat:"",label:"Apply Look and Feel",icon:"palette",class:"q-ml-lg",color:"secondary"},null,8,["onClick"]),c(Q,{onClick:e.publishNaddr,flat:"",label:"Share Market Profile",icon:"share",class:"q-ml-lg",color:"primary"},null,8,["onClick"])])]),_:1}),c(he,{class:"lt-md"}),c(he,{class:"lt-md"}),c(he)]),_:1})}var Xr=ht(Mc,[["render",Yc]]);const Uc=it({name:"UserConfig",props:["account"],data:function(){return{accountData:null}},watch:{account(){this.accountData=this.account&&JSON.parse(JSON.stringify(this.account))}},methods:{logout:async function(){this.$q.dialog(confirm("Please make sure you save your private key! You will not be able to recover it later!")).onOk(async()=>{this.$emit("logout")})},copyText(e){this.$emit("copy-text",e)},clearAllData(){this.$emit("clear-all-data")}},created:async function(){this.accountData=this.account&&JSON.parse(JSON.stringify(this.account))}}),Hc={class:"row"},zc={class:"col-10"},Wc={class:"col-2 auto-width"},jc={class:"row"},Qc={class:"col-10"},Kc={class:"col-2 auto-width"},Gc=h("div",null,[h("strong",null,"No Account")],-1),Zc={class:"float-right"};function Jc(e,t,n,a,l,i){return _(),U(lt,null,{default:f(()=>[e.accountData?(_(),U(he,{key:0},{default:f(()=>[h("div",Hc,[h("div",zc,[c(He,{modelValue:e.accountData.npub,"onUpdate:modelValue":t[1]||(t[1]=r=>e.accountData.npub=r),readonly:"",disbled:"",outlined:"",hint:e.accountData.pubkey,type:"text",label:"Public Key",class:"q-mb-md"},{append:f(()=>[c(Q,{onClick:t[0]||(t[0]=r=>e.copyText(e.accountData.npub)),icon:"content_copy",label:"Npub",flat:"",color:"gray float-right q-mt-sm"})]),_:1},8,["modelValue","hint"])]),h("div",Wc,[c(Q,{onClick:t[2]||(t[2]=r=>e.copyText(e.accountData.pubkey)),icon:"content_copy",label:"Hex",flat:"",color:"gray float-right q-mt-sm"})])]),h("div",jc,[h("div",Qc,[c(He,{modelValue:e.accountData.nsec,"onUpdate:modelValue":t[4]||(t[4]=r=>e.accountData.nsec=r),readonly:"",disbled:"",outlined:"",type:"password",label:"Private Key",class:"q-mb-md"},{append:f(()=>[c(Q,{onClick:t[3]||(t[3]=r=>e.copyText(e.accountData.nsec)),icon:"content_copy",label:"Nsec",flat:"",color:"gray float-right q-mt-sm"})]),_:1},8,["modelValue"])]),h("div",Kc,[c(Q,{onClick:t[5]||(t[5]=r=>e.copyText(e.accountData.privkey)),icon:"content_copy",label:"Hex",flat:"",color:"gray float-right q-mt-sm"})])])]),_:1})):(_(),U(he,{key:1},{default:f(()=>[Gc]),_:1})),c(Te),c(he,null,{default:f(()=>[h("div",Zc,[c(Q,{onClick:e.clearAllData,flat:"",label:"Clear All Data",icon:"delete",class:"q-ml-lg",color:"negative"},null,8,["onClick"]),e.accountData?(_(),U(Q,{key:0,onClick:e.logout,flat:"",label:"Logout",icon:"logout",class:"q-ml-lg",color:"primary"},null,8,["onClick"])):(_(),U(Q,{key:1,onClick:t[6]||(t[6]=r=>e.$emit("login")),flat:"",label:"Login",icon:"login",class:"q-ml-lg",color:"primary"}))])]),_:1}),c(he)]),_:1})}var Xc=ht(Uc,[["render",Jc]]);const ed=it({name:"UserChat",props:["user"],data:function(){return{}},methods:{},created:async function(){}}),td=h("div",{class:"q-pa-md"},[h("div",{class:"q-gutter-y-md"}," User Chat ")],-1);function nd(e,t,n,a,l,i){return _(),U(lt,null,{default:f(()=>[td]),_:1})}var ad=ht(ed,[["render",nd]]);const ld=it({name:"ShoppingCartList",props:["carts","profiles"],data:function(){return{}},computed:{},methods:{formatCurrency:function(e,t){return formatCurrency(e,t)},cartTotalFormatted(e){var n;if(!((n=e.products)!=null&&n.length))return"";const t=e.products.reduce((a,l)=>l.price+a,0);return formatCurrency(t,e.products[0].currency)},removeProduct:function(e,t){this.$emit("remove-from-cart",{stallId:e,productId:t})},removeCart:function(e){this.$emit("remove-cart",e)},quantityChanged:function(e){this.$emit("add-to-cart",e)},proceedToCheckout:function(e){this.$emit("checkout-cart",e)},merchantProfile(e){var t;return(t=this.profiles)==null?void 0:t.find(n=>n.pubkey===e)}},created(){}}),id=h("strong",null,"No products in cart!",-1),rd=["src"],sd=["src"],od=["textContent"],ud=["textContent"],cd=["src"],dd=["src"],fd={class:"text-caption text-grey ellipsis-2-lines"},hd={class:"q-ma-md"};function md(e,t,n,a,l,i){var r;return _(),B("div",null,[(r=e.carts)!=null&&r.length?fe("",!0):(_(),U(lt,{key:0,bordered:"",class:"q-mb-md"},{default:f(()=>[c(he,null,{default:f(()=>[id]),_:1})]),_:1})),(_(!0),B(Ge,null,nt(e.carts,s=>(_(),B("div",{key:s.id},[c(lt,{bordered:"",class:"q-mb-md"},{default:f(()=>[c(Qe,null,{default:f(()=>[c(te,{avatar:""},{default:f(()=>[c(yt,null,{default:f(()=>{var o,u;return[(o=e.merchantProfile(s.merchant))!=null&&o.picture?(_(),B("img",{key:0,src:(u=e.merchantProfile(s.merchant))==null?void 0:u.picture},null,8,rd)):(_(),B("img",{key:1,src:e.$q.config.staticPath+"/images/blank-avatar.webp"},null,8,sd))]}),_:2},1024)]),_:2},1024),c(te,null,{default:f(()=>[c(re,null,{default:f(()=>{var o;return[h("strong",null,[h("span",{textContent:H((o=s.products[0])==null?void 0:o.stallName)},null,8,od)])]}),_:2},1024),c(re,{caption:""},{default:f(()=>{var o,u;return[ne(" By "),h("span",{class:"ellipsis-2-lines text-wrap",textContent:H(((o=e.merchantProfile(s.merchant))==null?void 0:o.name)||((u=s.merchant)==null?void 0:u.publicKey))},null,8,ud)]}),_:2},1024)]),_:2},1024),c(te,{side:""},{default:f(()=>[h("div",null,[c(Q,{onClick:o=>e.removeCart(s.id),flat:"",color:"pink"},{default:f(()=>[ne(" Clear Cart ")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024),c(Te),c(he,{horizontal:""},{default:f(()=>[c(he,{class:"col-12"},{default:f(()=>[c(Nt,{class:"q-mt-md"},{default:f(()=>[(_(!0),B(Ge,null,nt(s.products,o=>(_(),U(Qe,{key:o.id},{default:f(()=>[c(te,{avatar:""},{default:f(()=>[c(yt,null,{default:f(()=>[o.images[0]||o.image?(_(),B("img",{key:0,src:o.images[0]||o.image},null,8,cd)):(_(),B("img",{key:1,src:e.$q.config.staticPath+"/images/placeholder.png"},null,8,dd))]),_:2},1024)]),_:2},1024),c(te,{class:"q-mt-sm"},{default:f(()=>[c(re,null,{default:f(()=>[ne(H(o.name),1)]),_:2},1024),c(re,{class:"gt-sm"},{default:f(()=>[h("div",fd,[h("p",null,H(o.description),1)])]),_:2},1024)]),_:2},1024),c(te,{class:"q-mt-sm gt-sm"},{default:f(()=>[c(re,null,{default:f(()=>[h("strong",null,H(e.formatCurrency(o.price,o.currency)),1)]),_:2},1024),c(re)]),_:2},1024),c(te,{class:"q-ma-sm"},{default:f(()=>[c(He,{modelValue:o.orderedQuantity,"onUpdate:modelValue":u=>o.orderedQuantity=u,modelModifiers:{number:!0},onChange:u=>e.quantityChanged(o),type:"number",rounded:"",outlined:"",min:"1",max:o.quantity},null,8,["modelValue","onUpdate:modelValue","onChange","max"])]),_:2},1024),c(te,null,{default:f(()=>[c(re,null,{default:f(()=>[h("strong",null,H(e.formatCurrency(o.price*o.orderedQuantity,o.currency)),1)]),_:2},1024)]),_:2},1024),c(te,{side:""},{default:f(()=>[h("div",null,[c(Q,{flat:"",dense:"",round:"",icon:"delete",onClick:u=>e.removeProduct(o.stall_id,o.id)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024),c(Te),c(fn,{align:"right"},{default:f(()=>[ne(" Total: "),h("strong",hd,H(e.cartTotalFormatted(s)),1),c(Q,{onClick:o=>e.proceedToCheckout(s),flat:"",color:"primary"},{default:f(()=>[ne(" Proceed to Checkout ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))])}var gd=ht(ld,[["render",md]]);const vd=it({name:"ShoppingCartCheckout",props:["cart","stall","customer-pubkey","profiles"],data:function(){return{orderConfirmed:!1,paymentMethod:"ln",shippingZone:null,contactData:{email:null,npub:null,address:null,message:null},paymentOptions:[{label:"Lightning Network",value:"ln"},{label:"BTC Onchain",value:"btc"},{label:"Cashu",value:"cashu"}]}},computed:{cartTotal(){var e;return(e=this.cart.products)!=null&&e.length?this.cart.products.reduce((t,n)=>n.price+t,0):0},cartTotalWithShipping(){return this.shippingZone?this.cartTotal+this.shippingZone.cost:this.cartTotal},shippingZoneLabel(){var t;if(!this.shippingZone)return"Shipping Zone";const e=this.shippingZone.name.substring(0,10);return((t=this.shippingZone)==null?void 0:t.name.length)<10?e:e+"..."}},methods:{formatCurrency:function(e,t){return formatCurrency(e,t)},selectShippingZone:function(e){this.shippingZone=e},confirmOrder:function(){if(!this.shippingZone){this.$q.notify({timeout:5e3,type:"warning",message:"Please select a shipping zone!"});return}this.orderConfirmed=!0},async placeOrder(){if(!this.shippingZone){this.$q.notify({timeout:5e3,type:"warning",message:"Please select a shipping zone!"});return}if(!this.customerPubkey){this.$emit("login-required");return}const e={address:this.contactData.address,message:this.contactData.message,contact:{nostr:this.contactData.npub,email:this.contactData.email},items:Array.from(this.cart.products,a=>({product_id:a.id,quantity:a.orderedQuantity})),shipping_id:this.shippingZone.id,type:0},t=Math.floor(Date.now()/1e3);e.id=await hash([this.customerPubkey,t,JSON.stringify(e)].join(":"));const n={...await NostrTools.getBlankEvent(),kind:4,created_at:t,tags:[["p",this.stall.pubkey]],pubkey:this.customerPubkey};this.$emit("place-order",{event:n,order:e,cartId:this.cart.id})},goToShoppingCart:function(){this.$emit("change-page","shopping-cart-list")},merchantProfile(e){var t;return(t=this.profiles)==null?void 0:t.find(n=>n.pubkey===e)}},created(){var e;((e=this.stall.shipping)==null?void 0:e.length)===1&&(this.shippingZone=this.stall.shipping[0])}}),yd=["src"],pd=["src"],bd=["textContent"],_d=["textContent"],kd={class:"row q-mt-md q-ml-md q-pr-md"},wd=h("div",{class:"col-xs-12 col-sm-12 col-md-2 q-mt-md"},[h("strong",null,"Message:")],-1),Sd={class:"col-xs-12 col-sm-12 col-md-10"},Cd={class:"row q-mt-md q-ml-md q-pr-md"},Md=h("div",{class:"col-xs-12 col-sm-12 col-md-2 q-mt-md"},[h("strong",null,"Address:")],-1),Dd={class:"col-xs-12 col-sm-12 col-md-10"},Td={class:"row q-mt-md q-ml-md q-pr-md"},qd=h("div",{class:"col-xs-12 col-sm-12 col-md-2 q-mt-md"},[h("strong",null,"Email:")],-1),Pd={class:"col-xs-12 col-sm-12 col-md-10"},$d={class:"row q-mt-md q-ml-md q-pr-md"},Ed=h("div",{class:"col-xs-12 col-sm-12 col-md-2 q-mt-md"},[h("strong",null,"Npub:")],-1),Id={class:"col-xs-12 col-sm-12 col-md-10"},Ad={class:"row q-mt-md"},Od=h("div",{class:"col-xs-12 col-sm-12 col-md-4"},[h("strong",null,"Subtotal:")],-1),xd={class:"col-xs-12 col-sm-12 col-md-4"},Nd=h("div",{class:"col-xs-12 col-sm-12 col-md-4"},null,-1),Rd={class:"row q-mt-md"},Ld=h("div",{class:"col-xs-12 col-sm-12 col-md-4"},[h("strong",null,"Shipping:")],-1),Vd={class:"col-xs-12 col-sm-12 col-md-4"},Bd={key:0},Fd={class:"col-xs-12 col-sm-12 col-md-4"},Yd=["textContent"],Ud=["textContent"],Hd={class:"row q-mt-md"},zd=h("div",{class:"col-xs-12 col-sm-12 col-md-4"},[h("strong",null,"Total:")],-1),Wd={class:"col-xs-12 col-sm-12 col-md-4"},jd=h("div",{class:"col-xs-12 col-sm-12 col-md-4"},null,-1),Qd=h("strong",null,"Payment Method",-1),Kd={key:0},Gd={key:1};function Zd(e,t,n,a,l,i){return _(),B("div",null,[e.cart&&e.stall?(_(),U(lt,{key:0,bordered:"",class:"q-mb-md"},{default:f(()=>[c(Qe,null,{default:f(()=>[c(te,{avatar:""},{default:f(()=>[c(yt,null,{default:f(()=>{var r,s;return[(r=e.merchantProfile(e.cart.merchant))!=null&&r.picture?(_(),B("img",{key:0,src:(s=e.merchantProfile(e.cart.merchant))==null?void 0:s.picture},null,8,yd)):(_(),B("img",{key:1,src:e.$q.config.staticPath+"/images/blank-avatar.webp"},null,8,pd))]}),_:1})]),_:1}),c(te,null,{default:f(()=>[c(re,null,{default:f(()=>{var r;return[h("strong",null,[h("span",{textContent:H((r=e.cart.products[0])==null?void 0:r.stallName)},null,8,bd)])]}),_:1}),c(re,{caption:""},{default:f(()=>{var r,s;return[ne(" By "),h("span",{class:"ellipsis-2-lines text-wrap",textContent:H(((r=e.merchantProfile(e.cart.merchant))==null?void 0:r.name)||((s=e.cart.merchant)==null?void 0:s.publicKey))},null,8,_d)]}),_:1})]),_:1}),c(te,{side:""})]),_:1}),c(Te),e.orderConfirmed?(_(),U(he,{key:0},{default:f(()=>[h("div",kd,[wd,h("div",Sd,[c(He,{modelValue:e.contactData.message,"onUpdate:modelValue":t[0]||(t[0]=r=>e.contactData.message=r),modelModifiers:{trim:!0},outlined:"",type:"textarea",rows:"3",label:"Message (optional)",hint:"Message merchant about additional order needs"},null,8,["modelValue"])])]),h("div",Cd,[Md,h("div",Dd,[c(He,{modelValue:e.contactData.address,"onUpdate:modelValue":t[1]||(t[1]=r=>e.contactData.address=r),modelModifiers:{trim:!0},outlined:"",type:"textarea",rows:"3",label:"Address (optional)",hint:"Must provide for physical shipping"},null,8,["modelValue"])])]),h("div",Td,[qd,h("div",Pd,[c(He,{modelValue:e.contactData.email,"onUpdate:modelValue":t[2]||(t[2]=r=>e.contactData.email=r),modelModifiers:{trim:!0},type:"email",outlined:"",label:"Email (optional)",hint:"Merchant may not use email"},null,8,["modelValue"])])]),h("div",$d,[Ed,h("div",Id,[c(He,{modelValue:e.contactData.npub,"onUpdate:modelValue":t[3]||(t[3]=r=>e.contactData.npub=r),modelModifiers:{trim:!0},outlined:"",label:"Alternative Npub (optional)",hint:"Use a different Npub to communicate with the merchant"},null,8,["modelValue"])])])]),_:1})):(_(),U(he,{key:1,horizontal:""},{default:f(()=>[c(he,{class:"col-7"},{default:f(()=>[h("div",Ad,[Od,h("div",xd,[h("strong",null,H(e.formatCurrency(e.cartTotal,e.stall.currency)),1)]),Nd]),h("div",Rd,[Ld,h("div",Vd,[e.shippingZone?(_(),B("strong",Bd,H(e.formatCurrency(e.shippingZone.cost,e.stall.currency)),1)):fe("",!0)]),h("div",Fd,[c(Ir,{unelevated:"",color:"secondary",rounded:"",label:e.shippingZoneLabel},{default:f(()=>[(_(!0),B(Ge,null,nt(e.stall.shipping,r=>jt((_(),U(Qe,{onClick:s=>e.selectShippingZone(r),key:r.id,clickable:""},{default:f(()=>[c(te,null,{default:f(()=>[c(re,null,{default:f(()=>[h("span",{textContent:H(r.name)},null,8,Yd)]),_:2},1024),c(re,{caption:""},{default:f(()=>{var s;return[h("span",{textContent:H((s=r.countries)==null?void 0:s.join(", "))},null,8,Ud)]}),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[zn]])),128))]),_:1},8,["label"])])]),c(Te,{class:"q-mt-sm"}),h("div",Hd,[zd,h("div",Wd,[h("strong",null,H(e.formatCurrency(e.cartTotalWithShipping,e.stall.currency)),1)]),jd])]),_:1}),c(Te,{vertical:""}),c(he,null,{default:f(()=>[Qd,c(Ao,{modelValue:e.paymentMethod,"onUpdate:modelValue":t[4]||(t[4]=r=>e.paymentMethod=r),options:e.paymentOptions,color:"green",disable:""},null,8,["modelValue","options"])]),_:1})]),_:1})),c(Te),c(fn,{align:"right"},{default:f(()=>[e.orderConfirmed?(_(),B("div",Kd,[c(Q,{onClick:t[5]||(t[5]=r=>e.orderConfirmed=!1),flat:"",color:"grey"},{default:f(()=>[ne(" Back ")]),_:1}),c(Q,{onClick:t[6]||(t[6]=r=>e.placeOrder()),flat:"",color:"primary"},{default:f(()=>[ne(" Place Order ")]),_:1})])):(_(),B("div",Gd,[c(Q,{onClick:e.goToShoppingCart,flat:"",color:"grey"},{default:f(()=>[ne(" Back ")]),_:1},8,["onClick"]),c(Q,{onClick:e.confirmOrder,flat:"",color:"primary"},{default:f(()=>[ne(" Confirm ")]),_:1},8,["onClick"])]))]),_:1})]),_:1})):fe("",!0)])}var Jd=ht(vd,[["render",Zd]]);const{passive:ln}=In;var Xd=Se({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:{default:void 0},initialIndex:Number,disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:t,emit:n}){const a=K(!1),l=K(!0),i=K(null),r=K(null);let s=e.initialIndex||0,o,u;const d=S(()=>"q-infinite-scroll__loading"+(a.value===!0?"":" invisible"));function v(){if(e.disable===!0||a.value===!0||l.value===!1)return;const E=fa(o),$=ol(o),Z=Li(o);e.reverse===!1?Math.round($+Z+e.offset)>=Math.round(E)&&y():Math.round($)<=e.offset&&y()}function y(){if(e.disable===!0||a.value===!0||l.value===!1)return;s++,a.value=!0;const E=fa(o);n("load",s,$=>{l.value===!0&&(a.value=!1,dt(()=>{if(e.reverse===!0){const Z=fa(o),J=ol(o),ce=Z-E;ul(o,J+ce)}$===!0?w():i.value&&i.value.closest("body")&&u()}))})}function g(){s=0}function C(){l.value===!1&&(l.value=!0,o.addEventListener("scroll",u,ln)),v()}function w(){l.value===!0&&(l.value=!1,a.value=!1,o.removeEventListener("scroll",u,ln),u!==void 0&&u.cancel!==void 0&&u.cancel())}function M(){if(o&&l.value===!0&&o.removeEventListener("scroll",u,ln),o=La(i.value,e.scrollTarget),l.value===!0){if(o.addEventListener("scroll",u,ln),e.reverse===!0){const E=fa(o),$=Li(o);ul(o,E-$)}v()}}function T(E){s=E}function q(E){E=parseInt(E,10);const $=u;u=E<=0?v:or(v,isNaN(E)===!0?100:E),o&&l.value===!0&&($!==void 0&&o.removeEventListener("scroll",$,ln),o.addEventListener("scroll",u,ln))}function p(E){if(b.value===!0){if(r.value===null){E!==!0&&dt(()=>{p(!0)});return}const $=`${a.value===!0?"un":""}pauseAnimations`;Array.from(r.value.getElementsByTagName("svg")).forEach(Z=>{Z[$]()})}}const b=S(()=>e.disable!==!0&&l.value===!0);de([a,b],()=>{p()}),de(()=>e.disable,E=>{E===!0?w():C()}),de(()=>e.reverse,()=>{a.value===!1&&l.value===!0&&v()}),de(()=>e.scrollTarget,M),de(()=>e.debounce,q);let D=!1;Ba(()=>{D!==!1&&o&&ul(o,D)}),Va(()=>{D=o?ol(o):!1}),Je(()=>{l.value===!0&&o.removeEventListener("scroll",u,ln)}),hn(()=>{q(e.debounce),M(),a.value===!1&&p()});const V=Fe();return Object.assign(V.proxy,{poll:()=>{u!==void 0&&u()},trigger:y,stop:w,reset:g,resume:C,setIndex:T}),()=>{const E=dr(t.default,[]);return b.value===!0&&E[e.reverse===!1?"push":"unshift"](k("div",{ref:r,class:d.value},Le(t.loading))),k("div",{class:"q-infinite-scroll",ref:i},E)}}});const ef=it({name:"ProductCard",props:["product","is-stall"],data:function(){return{}},methods:{},created(){}}),tf={class:"row no-wrap items-center"},nf={class:"col text-subtitle2 ellipsis-2-lines"},af={key:0},lf={class:"text-h6"},rf={key:1},sf={class:"text-h6"},of={class:"q-ml-md text-caption text-green-8 text-weight-bolder q-mt-md"},uf={key:0,class:"text-subtitle1"},cf=["textContent"],df={key:1,class:"text-subtitle1"},ff={class:"text-caption text-grey ellipsis-2-lines",style:{"min-height":"40px"}},hf={key:0},mf={class:"text-caption text-weight-bolder"},gf={class:"q-ml-auto"};function vf(e,t,n,a,l,i){return _(),U(lt,{class:"card--product"},{default:f(()=>[c(Gl,{src:e.product.images&&e.product.images.length>0&&e.product.images[0]?e.product.images[0]:e.$q.config.staticPath+"/images/placeholder.png",alt:"Product Image",loading:"lazy","spinner-color":"white",fit:"contain",height:"300px"},null,8,["src"]),c(he,{class:"q-pb-xs q-pt-md"},{default:f(()=>[c(Q,{round:"",disabled:e.product.quantity<1,color:"primary",rounded:"",icon:"shopping_cart",size:"lg",style:{position:"absolute",top:"0",right:"0",transform:"translate(-50%, -50%)"},onClick:t[0]||(t[0]=r=>e.$emit("add-to-cart",e.product))},{default:f(()=>[c(Qt,null,{default:f(()=>[ne(" Add to cart ")]),_:1})]),_:1},8,["disabled"]),h("div",tf,[h("div",nf,H(e.product.name),1)])]),_:1}),c(he,{class:"q-py-sm"},{default:f(()=>[h("div",null,[e.product.currency=="sat"?(_(),B("span",af,[h("span",lf,H(e.product.price)+" sats",1),c(Qt,null,{default:f(()=>[ne(" BTC "+H((e.product.price/1e8).toFixed(8)),1)]),_:1})])):(_(),B("span",rf,[h("span",sf,H(e.product.formatedPrice),1)])),h("span",of,H(e.product.quantity)+" left",1)]),e.product.categories?(_(),B("div",uf,[c(Kl,{items:e.product.categories||[],"virtual-scroll-horizontal":""},{default:f(({item:r,index:s})=>[(_(),U(ia,{key:s,dense:""},{default:f(()=>[h("span",{textContent:H(r)},null,8,cf)]),_:2},1024))]),_:1},8,["items"])])):(_(),B("div",df," \xA0 ")),h("div",ff,[e.product.description?(_(),B("p",hf,H(e.product.description),1)):fe("",!0)])]),_:1}),c(Te),c(fn,null,{default:f(()=>[h("div",mf,H(e.product.stallName),1)]),_:1}),c(Te),c(fn,null,{default:f(()=>[h("div",gf,[e.isStall?fe("",!0):(_(),U(Q,{key:0,flat:"",class:"text-weight-bold text-capitalize q-ml-auto float-left",dense:"",color:"primary",onClick:t[1]||(t[1]=r=>e.$emit("change-page","stall",{stall:e.product.stall_id}))},{default:f(()=>[ne(" Visit Stall ")]),_:1})),c(Q,{flat:"",class:"text-weight-bold text-capitalize q-ml-auto",dense:"",color:"primary",onClick:t[2]||(t[2]=r=>e.$emit("change-page","stall",{stall:e.product.stall_id,product:e.product.id}))},{default:f(()=>[ne(" View details ")]),_:1})])]),_:1})]),_:1})}var es=ht(ef,[["render",vf]]);const yf=it({name:"CustomerMarket",components:{ProductCard:es},props:["filtered-products","search-text","filter-categories"],data:function(){return{search:null,partialProducts:[],productsPerPage:12,startIndex:0,lastProductIndex:0,showProducts:!0}},watch:{searchText:function(){this.refreshProducts()},filteredProducts:function(){this.refreshProducts()},filterCategories:function(){this.refreshProducts()}},methods:{refreshProducts:function(){this.showProducts=!1,this.partialProducts=[],this.startIndex=0,this.lastProductIndex=Math.min(this.filteredProducts.length,this.productsPerPage),this.partialProducts.push(...this.filteredProducts.slice(0,this.lastProductIndex)),setTimeout(()=>{this.showProducts=!0},0)},addToCart(e){this.$emit("add-to-cart",e)},changePageM(e,t){this.$emit("change-page",e,t)},onLoad(e,t){setTimeout(()=>{if(this.startIndex>=this.filteredProducts.length){t();return}this.startIndex=this.lastProductIndex,this.lastProductIndex=Math.min(this.filteredProducts.length,this.lastProductIndex+this.productsPerPage),this.partialProducts.push(...this.filteredProducts.slice(this.startIndex,this.lastProductIndex)),t()},100)}},created(){this.lastProductIndex=Math.min(this.filteredProducts.length,24),this.partialProducts.push(...this.filteredProducts.slice(0,this.lastProductIndex))}}),pf={class:"row q-col-gutter-md"},bf={class:"row justify-center q-my-md"};function _f(e,t,n,a,l,i){const r=Dl("product-card");return _(),B("div",null,[e.showProducts?(_(),U(Xd,{key:0,onLoad:e.onLoad,offset:250},wr({default:f(()=>[h("div",pf,[(_(!0),B(Ge,null,nt(e.partialProducts,(s,o)=>(_(),B("div",{class:"col-xs-12 col-sm-6 col-md-4 col-lg-3",key:o},[c(r,{product:s,onChangePage:e.changePageM,onAddToCart:e.addToCart},null,8,["product","onChangePage","onAddToCart"])]))),128))])]),_:2},[e.lastProductIndex<e.filteredProducts.length?{name:"loading",fn:f(()=>[h("div",bf,[c(ql,{color:"primary",size:"40px"})])]),key:"0"}:void 0]),1032,["onLoad"])):fe("",!0)])}var kf=ht(yf,[["render",_f]]),wf=Se({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:t,emit:n}){let a=!1,l,i,r=null,s=null,o,u;function d(){l&&l(),l=null,a=!1,r!==null&&(clearTimeout(r),r=null),s!==null&&(clearTimeout(s),s=null),i!==void 0&&i.removeEventListener("transitionend",o),o=null}function v(w,M,T){M!==void 0&&(w.style.height=`${M}px`),w.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,a=!0,l=T}function y(w,M){w.style.overflowY=null,w.style.height=null,w.style.transition=null,d(),M!==u&&n(M)}function g(w,M){let T=0;i=w,a===!0?(d(),T=w.offsetHeight===w.scrollHeight?0:void 0):(u="hide",w.style.overflowY="hidden"),v(w,T,M),r=setTimeout(()=>{r=null,w.style.height=`${w.scrollHeight}px`,o=q=>{s=null,(Object(q)!==q||q.target===w)&&y(w,"show")},w.addEventListener("transitionend",o),s=setTimeout(o,e.duration*1.1)},100)}function C(w,M){let T;i=w,a===!0?d():(u="show",w.style.overflowY="hidden",T=w.scrollHeight),v(w,T,M),r=setTimeout(()=>{r=null,w.style.height=0,o=q=>{s=null,(Object(q)!==q||q.target===w)&&y(w,"hide")},w.addEventListener("transitionend",o),s=setTimeout(o,e.duration*1.1)},100)}return Je(()=>{a===!0&&d()}),()=>k(la,{css:!1,appear:e.appear,onEnter:g,onLeave:C},t.default)}});const rn=Oo({}),Sf=Object.keys(Fa);var Cf=Se({name:"QExpansionItem",props:{...Fa,...Bl,...Ft,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Yl,"click","afterShow","afterHide"],setup(e,{slots:t,emit:n}){const{proxy:{$q:a}}=Fe(),l=Yt(e,a),i=K(e.modelValue!==null?e.modelValue:e.defaultOpened),r=K(null),s=wa(),{show:o,hide:u,toggle:d}=Ul({showing:i});let v,y;const g=S(()=>`q-expansion-item q-item-type q-expansion-item--${i.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),C=S(()=>{if(e.contentInsetLevel===void 0)return null;const X=a.lang.rtl===!0?"Right":"Left";return{["padding"+X]:e.contentInsetLevel*56+"px"}}),w=S(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),M=S(()=>{const X={};return Sf.forEach(qe=>{X[qe]=e[qe]}),X}),T=S(()=>w.value===!0||e.expandIconToggle!==!0),q=S(()=>e.expandedIcon!==void 0&&i.value===!0?e.expandedIcon:e.expandIcon||a.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),p=S(()=>e.disable!==!0&&(w.value===!0||e.expandIconToggle===!0)),b=S(()=>({expanded:i.value===!0,detailsId:e.targetUid,toggle:d,show:o,hide:u})),D=S(()=>{const X=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:a.lang.label[i.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":i.value===!0?"true":"false","aria-controls":s,"aria-label":X}});de(()=>e.group,X=>{y!==void 0&&y(),X!==void 0&&ce()});function V(X){w.value!==!0&&d(X),n("click",X)}function E(X){X.keyCode===13&&$(X,!0)}function $(X,qe){qe!==!0&&r.value!==null&&r.value.focus(),d(X),je(X)}function Z(){n("afterShow")}function J(){n("afterHide")}function ce(){v===void 0&&(v=wa()),i.value===!0&&(rn[e.group]=v);const X=de(i,Ve=>{Ve===!0?rn[e.group]=v:rn[e.group]===v&&delete rn[e.group]}),qe=de(()=>rn[e.group],(Ve,N)=>{N===v&&Ve!==void 0&&Ve!==v&&u()});y=()=>{X(),qe(),rn[e.group]===v&&delete rn[e.group],y=void 0}}function Ee(){const X={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},qe=[k(Ke,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&i.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:q.value})];return p.value===!0&&(Object.assign(X,{tabindex:0,...D.value,onClick:$,onKeyup:E}),qe.unshift(k("div",{ref:r,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),k(te,X,()=>qe)}function x(){let X;return t.header!==void 0?X=[].concat(t.header(b.value)):(X=[k(te,()=>[k(re,{lines:e.labelLines},()=>e.label||""),e.caption?k(re,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&X[e.switchToggleSide===!0?"push":"unshift"](k(te,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>k(Ke,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&X[e.switchToggleSide===!0?"unshift":"push"](Ee()),X}function se(){const X={ref:"item",style:e.headerStyle,class:e.headerClass,dark:l.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return T.value===!0&&(X.clickable=!0,X.onClick=V,Object.assign(X,w.value===!0?M.value:D.value)),k(Qe,X,x)}function ye(){return jt(k("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:C.value,id:s},Le(t.default)),[[xo,i.value]])}function we(){const X=[se(),k(wf,{duration:e.duration,onShow:Z,onHide:J},ye)];return e.expandSeparator===!0&&X.push(k(Te,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:l.value}),k(Te,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:l.value})),X}return e.group!==void 0&&ce(),Je(()=>{y!==void 0&&y()}),()=>k("div",{class:g.value},[k("div",{class:"q-expansion-item__container relative-position"},we())])}});//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var ts;function L(){return ts.apply(null,arguments)}function Mf(e){ts=e}function bt(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function dn(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function pe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ai(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(pe(e,t))return!1;return!0}function at(e){return e===void 0}function Bt(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function sa(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function ns(e,t){var n=[],a,l=e.length;for(a=0;a<l;++a)n.push(t(e[a],a));return n}function Jt(e,t){for(var n in t)pe(t,n)&&(e[n]=t[n]);return pe(t,"toString")&&(e.toString=t.toString),pe(t,"valueOf")&&(e.valueOf=t.valueOf),e}function qt(e,t,n,a){return Ds(e,t,n,a,!0).utc()}function Df(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function oe(e){return e._pf==null&&(e._pf=Df()),e._pf}var Al;Array.prototype.some?Al=Array.prototype.some:Al=function(e){var t=Object(this),n=t.length>>>0,a;for(a=0;a<n;a++)if(a in t&&e.call(this,t[a],a,t))return!0;return!1};function li(e){if(e._isValid==null){var t=oe(e),n=Al.call(t.parsedDateParts,function(l){return l!=null}),a=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(a=a&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=a;else return a}return e._isValid}function Wa(e){var t=qt(NaN);return e!=null?Jt(oe(t),e):oe(t).userInvalidated=!0,t}var er=L.momentProperties=[],bl=!1;function ii(e,t){var n,a,l,i=er.length;if(at(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),at(t._i)||(e._i=t._i),at(t._f)||(e._f=t._f),at(t._l)||(e._l=t._l),at(t._strict)||(e._strict=t._strict),at(t._tzm)||(e._tzm=t._tzm),at(t._isUTC)||(e._isUTC=t._isUTC),at(t._offset)||(e._offset=t._offset),at(t._pf)||(e._pf=oe(t)),at(t._locale)||(e._locale=t._locale),i>0)for(n=0;n<i;n++)a=er[n],l=t[a],at(l)||(e[a]=l);return e}function oa(e){ii(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),bl===!1&&(bl=!0,L.updateOffset(this),bl=!1)}function _t(e){return e instanceof oa||e!=null&&e._isAMomentObject!=null}function as(e){L.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function mt(e,t){var n=!0;return Jt(function(){if(L.deprecationHandler!=null&&L.deprecationHandler(null,e),n){var a=[],l,i,r,s=arguments.length;for(i=0;i<s;i++){if(l="",typeof arguments[i]=="object"){l+=`
[`+i+"] ";for(r in arguments[0])pe(arguments[0],r)&&(l+=r+": "+arguments[0][r]+", ");l=l.slice(0,-2)}else l=arguments[i];a.push(l)}as(e+`
Arguments: `+Array.prototype.slice.call(a).join("")+`
`+new Error().stack),n=!1}return t.apply(this,arguments)},t)}var tr={};function ls(e,t){L.deprecationHandler!=null&&L.deprecationHandler(e,t),tr[e]||(as(t),tr[e]=!0)}L.suppressDeprecationWarnings=!1;L.deprecationHandler=null;function Pt(e){return typeof Function!="undefined"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function Tf(e){var t,n;for(n in e)pe(e,n)&&(t=e[n],Pt(t)?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Ol(e,t){var n=Jt({},e),a;for(a in t)pe(t,a)&&(dn(e[a])&&dn(t[a])?(n[a]={},Jt(n[a],e[a]),Jt(n[a],t[a])):t[a]!=null?n[a]=t[a]:delete n[a]);for(a in e)pe(e,a)&&!pe(t,a)&&dn(e[a])&&(n[a]=Jt({},n[a]));return n}function ri(e){e!=null&&this.set(e)}var xl;Object.keys?xl=Object.keys:xl=function(e){var t,n=[];for(t in e)pe(e,t)&&n.push(t);return n};var qf={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Pf(e,t,n){var a=this._calendar[e]||this._calendar.sameElse;return Pt(a)?a.call(t,n):a}function Dt(e,t,n){var a=""+Math.abs(e),l=t-a.length,i=e>=0;return(i?n?"+":"":"-")+Math.pow(10,Math.max(0,l)).toString().substr(1)+a}var si=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ga=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,_l={},Pn={};function G(e,t,n,a){var l=a;typeof a=="string"&&(l=function(){return this[a]()}),e&&(Pn[e]=l),t&&(Pn[t[0]]=function(){return Dt(l.apply(this,arguments),t[1],t[2])}),n&&(Pn[n]=function(){return this.localeData().ordinal(l.apply(this,arguments),e)})}function $f(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Ef(e){var t=e.match(si),n,a;for(n=0,a=t.length;n<a;n++)Pn[t[n]]?t[n]=Pn[t[n]]:t[n]=$f(t[n]);return function(l){var i="",r;for(r=0;r<a;r++)i+=Pt(t[r])?t[r].call(l,e):t[r];return i}}function pa(e,t){return e.isValid()?(t=is(t,e.localeData()),_l[t]=_l[t]||Ef(t),_l[t](e)):e.localeData().invalidDate()}function is(e,t){var n=5;function a(l){return t.longDateFormat(l)||l}for(ga.lastIndex=0;n>=0&&ga.test(e);)e=e.replace(ga,a),ga.lastIndex=0,n-=1;return e}var If={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Af(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(si).map(function(a){return a==="MMMM"||a==="MM"||a==="DD"||a==="dddd"?a.slice(1):a}).join(""),this._longDateFormat[e])}var Of="Invalid date";function xf(){return this._invalidDate}var Nf="%d",Rf=/\d{1,2}/;function Lf(e){return this._ordinal.replace("%d",e)}var Vf={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Bf(e,t,n,a){var l=this._relativeTime[n];return Pt(l)?l(e,t,n,a):l.replace(/%d/i,e)}function Ff(e,t){var n=this._relativeTime[e>0?"future":"past"];return Pt(n)?n(t):n.replace(/%s/i,t)}var Gn={};function Xe(e,t){var n=e.toLowerCase();Gn[n]=Gn[n+"s"]=Gn[t]=e}function gt(e){return typeof e=="string"?Gn[e]||Gn[e.toLowerCase()]:void 0}function oi(e){var t={},n,a;for(a in e)pe(e,a)&&(n=gt(a),n&&(t[n]=e[a]));return t}var rs={};function et(e,t){rs[e]=t}function Yf(e){var t=[],n;for(n in e)pe(e,n)&&t.push({unit:n,priority:rs[n]});return t.sort(function(a,l){return a.priority-l.priority}),t}function ja(e){return e%4===0&&e%100!==0||e%400===0}function ft(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ue(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=ft(t)),n}function Ln(e,t){return function(n){return n!=null?(ss(this,e,n),L.updateOffset(this,t),this):Ia(this,e)}}function Ia(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function ss(e,t,n){e.isValid()&&!isNaN(n)&&(t==="FullYear"&&ja(e.year())&&e.month()===1&&e.date()===29?(n=ue(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Xa(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function Uf(e){return e=gt(e),Pt(this[e])?this[e]():this}function Hf(e,t){if(typeof e=="object"){e=oi(e);var n=Yf(e),a,l=n.length;for(a=0;a<l;a++)this[n[a].unit](e[n[a].unit])}else if(e=gt(e),Pt(this[e]))return this[e](t);return this}var os=/\d/,ot=/\d\d/,us=/\d{3}/,ui=/\d{4}/,Qa=/[+-]?\d{6}/,$e=/\d\d?/,cs=/\d\d\d\d?/,ds=/\d\d\d\d\d\d?/,Ka=/\d{1,3}/,ci=/\d{1,4}/,Ga=/[+-]?\d{1,6}/,Vn=/\d+/,Za=/[+-]?\d+/,zf=/Z|[+-]\d\d:?\d\d/gi,Ja=/Z|[+-]\d\d(?::?\d\d)?/gi,Wf=/[+-]?\d+(\.\d{1,3})?/,ua=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Aa;Aa={};function Y(e,t,n){Aa[e]=Pt(t)?t:function(a,l){return a&&n?n:t}}function jf(e,t){return pe(Aa,e)?Aa[e](t._strict,t._locale):new RegExp(Qf(e))}function Qf(e){return rt(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,n,a,l,i){return n||a||l||i}))}function rt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Nl={};function Me(e,t){var n,a=t,l;for(typeof e=="string"&&(e=[e]),Bt(t)&&(a=function(i,r){r[t]=ue(i)}),l=e.length,n=0;n<l;n++)Nl[e[n]]=a}function ca(e,t){Me(e,function(n,a,l,i){l._w=l._w||{},t(n,l._w,l,i)})}function Kf(e,t,n){t!=null&&pe(Nl,e)&&Nl[e](t,n._a,n,e)}var Ze=0,Rt=1,Mt=2,Ye=3,pt=4,Lt=5,un=6,Gf=7,Zf=8;function Jf(e,t){return(e%t+t)%t}var Re;Array.prototype.indexOf?Re=Array.prototype.indexOf:Re=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Xa(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=Jf(t,12);return e+=(t-n)/12,n===1?ja(e)?29:28:31-n%7%2}G("M",["MM",2],"Mo",function(){return this.month()+1});G("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});G("MMMM",0,0,function(e){return this.localeData().months(this,e)});Xe("month","M");et("month",8);Y("M",$e);Y("MM",$e,ot);Y("MMM",function(e,t){return t.monthsShortRegex(e)});Y("MMMM",function(e,t){return t.monthsRegex(e)});Me(["M","MM"],function(e,t){t[Rt]=ue(e)-1});Me(["MMM","MMMM"],function(e,t,n,a){var l=n._locale.monthsParse(e,a,n._strict);l!=null?t[Rt]=l:oe(n).invalidMonth=e});var Xf="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),fs="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),hs=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,eh=ua,th=ua;function nh(e,t){return e?bt(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||hs).test(t)?"format":"standalone"][e.month()]:bt(this._months)?this._months:this._months.standalone}function ah(e,t){return e?bt(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[hs.test(t)?"format":"standalone"][e.month()]:bt(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function lh(e,t,n){var a,l,i,r=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],a=0;a<12;++a)i=qt([2e3,a]),this._shortMonthsParse[a]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[a]=this.months(i,"").toLocaleLowerCase();return n?t==="MMM"?(l=Re.call(this._shortMonthsParse,r),l!==-1?l:null):(l=Re.call(this._longMonthsParse,r),l!==-1?l:null):t==="MMM"?(l=Re.call(this._shortMonthsParse,r),l!==-1?l:(l=Re.call(this._longMonthsParse,r),l!==-1?l:null)):(l=Re.call(this._longMonthsParse,r),l!==-1?l:(l=Re.call(this._shortMonthsParse,r),l!==-1?l:null))}function ih(e,t,n){var a,l,i;if(this._monthsParseExact)return lh.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(l=qt([2e3,a]),n&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(l,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(l,"").replace(".","")+"$","i")),!n&&!this._monthsParse[a]&&(i="^"+this.months(l,"")+"|^"+this.monthsShort(l,""),this._monthsParse[a]=new RegExp(i.replace(".",""),"i")),n&&t==="MMMM"&&this._longMonthsParse[a].test(e))return a;if(n&&t==="MMM"&&this._shortMonthsParse[a].test(e))return a;if(!n&&this._monthsParse[a].test(e))return a}}function ms(e,t){var n;if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=ue(t);else if(t=e.localeData().monthsParse(t),!Bt(t))return e}return n=Math.min(e.date(),Xa(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function gs(e){return e!=null?(ms(this,e),L.updateOffset(this,!0),this):Ia(this,"Month")}function rh(){return Xa(this.year(),this.month())}function sh(e){return this._monthsParseExact?(pe(this,"_monthsRegex")||vs.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(pe(this,"_monthsShortRegex")||(this._monthsShortRegex=eh),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function oh(e){return this._monthsParseExact?(pe(this,"_monthsRegex")||vs.call(this),e?this._monthsStrictRegex:this._monthsRegex):(pe(this,"_monthsRegex")||(this._monthsRegex=th),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function vs(){function e(r,s){return s.length-r.length}var t=[],n=[],a=[],l,i;for(l=0;l<12;l++)i=qt([2e3,l]),t.push(this.monthsShort(i,"")),n.push(this.months(i,"")),a.push(this.months(i,"")),a.push(this.monthsShort(i,""));for(t.sort(e),n.sort(e),a.sort(e),l=0;l<12;l++)t[l]=rt(t[l]),n[l]=rt(n[l]);for(l=0;l<24;l++)a[l]=rt(a[l]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}G("Y",0,0,function(){var e=this.year();return e<=9999?Dt(e,4):"+"+e});G(0,["YY",2],0,function(){return this.year()%100});G(0,["YYYY",4],0,"year");G(0,["YYYYY",5],0,"year");G(0,["YYYYYY",6,!0],0,"year");Xe("year","y");et("year",1);Y("Y",Za);Y("YY",$e,ot);Y("YYYY",ci,ui);Y("YYYYY",Ga,Qa);Y("YYYYYY",Ga,Qa);Me(["YYYYY","YYYYYY"],Ze);Me("YYYY",function(e,t){t[Ze]=e.length===2?L.parseTwoDigitYear(e):ue(e)});Me("YY",function(e,t){t[Ze]=L.parseTwoDigitYear(e)});Me("Y",function(e,t){t[Ze]=parseInt(e,10)});function Zn(e){return ja(e)?366:365}L.parseTwoDigitYear=function(e){return ue(e)+(ue(e)>68?1900:2e3)};var ys=Ln("FullYear",!0);function uh(){return ja(this.year())}function ch(e,t,n,a,l,i,r){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,a,l,i,r),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,a,l,i,r),s}function ea(e){var t,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Oa(e,t,n){var a=7+t-n,l=(7+ea(e,0,a).getUTCDay()-t)%7;return-l+a-1}function ps(e,t,n,a,l){var i=(7+n-a)%7,r=Oa(e,a,l),s=1+7*(t-1)+i+r,o,u;return s<=0?(o=e-1,u=Zn(o)+s):s>Zn(e)?(o=e+1,u=s-Zn(e)):(o=e,u=s),{year:o,dayOfYear:u}}function ta(e,t,n){var a=Oa(e.year(),t,n),l=Math.floor((e.dayOfYear()-a-1)/7)+1,i,r;return l<1?(r=e.year()-1,i=l+Vt(r,t,n)):l>Vt(e.year(),t,n)?(i=l-Vt(e.year(),t,n),r=e.year()+1):(r=e.year(),i=l),{week:i,year:r}}function Vt(e,t,n){var a=Oa(e,t,n),l=Oa(e+1,t,n);return(Zn(e)-a+l)/7}G("w",["ww",2],"wo","week");G("W",["WW",2],"Wo","isoWeek");Xe("week","w");Xe("isoWeek","W");et("week",5);et("isoWeek",5);Y("w",$e);Y("ww",$e,ot);Y("W",$e);Y("WW",$e,ot);ca(["w","ww","W","WW"],function(e,t,n,a){t[a.substr(0,1)]=ue(e)});function dh(e){return ta(e,this._week.dow,this._week.doy).week}var fh={dow:0,doy:6};function hh(){return this._week.dow}function mh(){return this._week.doy}function gh(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function vh(e){var t=ta(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}G("d",0,"do","day");G("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});G("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});G("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});G("e",0,0,"weekday");G("E",0,0,"isoWeekday");Xe("day","d");Xe("weekday","e");Xe("isoWeekday","E");et("day",11);et("weekday",11);et("isoWeekday",11);Y("d",$e);Y("e",$e);Y("E",$e);Y("dd",function(e,t){return t.weekdaysMinRegex(e)});Y("ddd",function(e,t){return t.weekdaysShortRegex(e)});Y("dddd",function(e,t){return t.weekdaysRegex(e)});ca(["dd","ddd","dddd"],function(e,t,n,a){var l=n._locale.weekdaysParse(e,a,n._strict);l!=null?t.d=l:oe(n).invalidWeekday=e});ca(["d","e","E"],function(e,t,n,a){t[a]=ue(e)});function yh(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function ph(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function di(e,t){return e.slice(t,7).concat(e.slice(0,t))}var bh="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),bs="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),_h="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),kh=ua,wh=ua,Sh=ua;function Ch(e,t){var n=bt(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?di(n,this._week.dow):e?n[e.day()]:n}function Mh(e){return e===!0?di(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Dh(e){return e===!0?di(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Th(e,t,n){var a,l,i,r=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],a=0;a<7;++a)i=qt([2e3,1]).day(a),this._minWeekdaysParse[a]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[a]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[a]=this.weekdays(i,"").toLocaleLowerCase();return n?t==="dddd"?(l=Re.call(this._weekdaysParse,r),l!==-1?l:null):t==="ddd"?(l=Re.call(this._shortWeekdaysParse,r),l!==-1?l:null):(l=Re.call(this._minWeekdaysParse,r),l!==-1?l:null):t==="dddd"?(l=Re.call(this._weekdaysParse,r),l!==-1||(l=Re.call(this._shortWeekdaysParse,r),l!==-1)?l:(l=Re.call(this._minWeekdaysParse,r),l!==-1?l:null)):t==="ddd"?(l=Re.call(this._shortWeekdaysParse,r),l!==-1||(l=Re.call(this._weekdaysParse,r),l!==-1)?l:(l=Re.call(this._minWeekdaysParse,r),l!==-1?l:null)):(l=Re.call(this._minWeekdaysParse,r),l!==-1||(l=Re.call(this._weekdaysParse,r),l!==-1)?l:(l=Re.call(this._shortWeekdaysParse,r),l!==-1?l:null))}function qh(e,t,n){var a,l,i;if(this._weekdaysParseExact)return Th.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),a=0;a<7;a++){if(l=qt([2e3,1]).day(a),n&&!this._fullWeekdaysParse[a]&&(this._fullWeekdaysParse[a]=new RegExp("^"+this.weekdays(l,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[a]=new RegExp("^"+this.weekdaysShort(l,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[a]=new RegExp("^"+this.weekdaysMin(l,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[a]||(i="^"+this.weekdays(l,"")+"|^"+this.weekdaysShort(l,"")+"|^"+this.weekdaysMin(l,""),this._weekdaysParse[a]=new RegExp(i.replace(".",""),"i")),n&&t==="dddd"&&this._fullWeekdaysParse[a].test(e))return a;if(n&&t==="ddd"&&this._shortWeekdaysParse[a].test(e))return a;if(n&&t==="dd"&&this._minWeekdaysParse[a].test(e))return a;if(!n&&this._weekdaysParse[a].test(e))return a}}function Ph(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=yh(e,this.localeData()),this.add(e-t,"d")):t}function $h(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Eh(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=ph(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function Ih(e){return this._weekdaysParseExact?(pe(this,"_weekdaysRegex")||fi.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(pe(this,"_weekdaysRegex")||(this._weekdaysRegex=kh),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ah(e){return this._weekdaysParseExact?(pe(this,"_weekdaysRegex")||fi.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(pe(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=wh),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Oh(e){return this._weekdaysParseExact?(pe(this,"_weekdaysRegex")||fi.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(pe(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Sh),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function fi(){function e(d,v){return v.length-d.length}var t=[],n=[],a=[],l=[],i,r,s,o,u;for(i=0;i<7;i++)r=qt([2e3,1]).day(i),s=rt(this.weekdaysMin(r,"")),o=rt(this.weekdaysShort(r,"")),u=rt(this.weekdays(r,"")),t.push(s),n.push(o),a.push(u),l.push(s),l.push(o),l.push(u);t.sort(e),n.sort(e),a.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function hi(){return this.hours()%12||12}function xh(){return this.hours()||24}G("H",["HH",2],0,"hour");G("h",["hh",2],0,hi);G("k",["kk",2],0,xh);G("hmm",0,0,function(){return""+hi.apply(this)+Dt(this.minutes(),2)});G("hmmss",0,0,function(){return""+hi.apply(this)+Dt(this.minutes(),2)+Dt(this.seconds(),2)});G("Hmm",0,0,function(){return""+this.hours()+Dt(this.minutes(),2)});G("Hmmss",0,0,function(){return""+this.hours()+Dt(this.minutes(),2)+Dt(this.seconds(),2)});function _s(e,t){G(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}_s("a",!0);_s("A",!1);Xe("hour","h");et("hour",13);function ks(e,t){return t._meridiemParse}Y("a",ks);Y("A",ks);Y("H",$e);Y("h",$e);Y("k",$e);Y("HH",$e,ot);Y("hh",$e,ot);Y("kk",$e,ot);Y("hmm",cs);Y("hmmss",ds);Y("Hmm",cs);Y("Hmmss",ds);Me(["H","HH"],Ye);Me(["k","kk"],function(e,t,n){var a=ue(e);t[Ye]=a===24?0:a});Me(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e});Me(["h","hh"],function(e,t,n){t[Ye]=ue(e),oe(n).bigHour=!0});Me("hmm",function(e,t,n){var a=e.length-2;t[Ye]=ue(e.substr(0,a)),t[pt]=ue(e.substr(a)),oe(n).bigHour=!0});Me("hmmss",function(e,t,n){var a=e.length-4,l=e.length-2;t[Ye]=ue(e.substr(0,a)),t[pt]=ue(e.substr(a,2)),t[Lt]=ue(e.substr(l)),oe(n).bigHour=!0});Me("Hmm",function(e,t,n){var a=e.length-2;t[Ye]=ue(e.substr(0,a)),t[pt]=ue(e.substr(a))});Me("Hmmss",function(e,t,n){var a=e.length-4,l=e.length-2;t[Ye]=ue(e.substr(0,a)),t[pt]=ue(e.substr(a,2)),t[Lt]=ue(e.substr(l))});function Nh(e){return(e+"").toLowerCase().charAt(0)==="p"}var Rh=/[ap]\.?m?\.?/i,Lh=Ln("Hours",!0);function Vh(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var ws={calendar:qf,longDateFormat:If,invalidDate:Of,ordinal:Nf,dayOfMonthOrdinalParse:Rf,relativeTime:Vf,months:Xf,monthsShort:fs,week:fh,weekdays:bh,weekdaysMin:_h,weekdaysShort:bs,meridiemParse:Rh},Ae={},Yn={},na;function Bh(e,t){var n,a=Math.min(e.length,t.length);for(n=0;n<a;n+=1)if(e[n]!==t[n])return n;return a}function nr(e){return e&&e.toLowerCase().replace("_","-")}function Fh(e){for(var t=0,n,a,l,i;t<e.length;){for(i=nr(e[t]).split("-"),n=i.length,a=nr(e[t+1]),a=a?a.split("-"):null;n>0;){if(l=el(i.slice(0,n).join("-")),l)return l;if(a&&a.length>=n&&Bh(i,a)>=n-1)break;n--}t++}return na}function Yh(e){return e.match("^[^/\\\\]*$")!=null}function el(e){var t=null,n;if(Ae[e]===void 0&&typeof module!="undefined"&&module&&module.exports&&Yh(e))try{t=na._abbr,n=require,n("./locale/"+e),en(t)}catch{Ae[e]=null}return Ae[e]}function en(e,t){var n;return e&&(at(t)?n=Ut(e):n=mi(e,t),n?na=n:typeof console!="undefined"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),na._abbr}function mi(e,t){if(t!==null){var n,a=ws;if(t.abbr=e,Ae[e]!=null)ls("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),a=Ae[e]._config;else if(t.parentLocale!=null)if(Ae[t.parentLocale]!=null)a=Ae[t.parentLocale]._config;else if(n=el(t.parentLocale),n!=null)a=n._config;else return Yn[t.parentLocale]||(Yn[t.parentLocale]=[]),Yn[t.parentLocale].push({name:e,config:t}),null;return Ae[e]=new ri(Ol(a,t)),Yn[e]&&Yn[e].forEach(function(l){mi(l.name,l.config)}),en(e),Ae[e]}else return delete Ae[e],null}function Uh(e,t){if(t!=null){var n,a,l=ws;Ae[e]!=null&&Ae[e].parentLocale!=null?Ae[e].set(Ol(Ae[e]._config,t)):(a=el(e),a!=null&&(l=a._config),t=Ol(l,t),a==null&&(t.abbr=e),n=new ri(t),n.parentLocale=Ae[e],Ae[e]=n),en(e)}else Ae[e]!=null&&(Ae[e].parentLocale!=null?(Ae[e]=Ae[e].parentLocale,e===en()&&en(e)):Ae[e]!=null&&delete Ae[e]);return Ae[e]}function Ut(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return na;if(!bt(e)){if(t=el(e),t)return t;e=[e]}return Fh(e)}function Hh(){return xl(Ae)}function gi(e){var t,n=e._a;return n&&oe(e).overflow===-2&&(t=n[Rt]<0||n[Rt]>11?Rt:n[Mt]<1||n[Mt]>Xa(n[Ze],n[Rt])?Mt:n[Ye]<0||n[Ye]>24||n[Ye]===24&&(n[pt]!==0||n[Lt]!==0||n[un]!==0)?Ye:n[pt]<0||n[pt]>59?pt:n[Lt]<0||n[Lt]>59?Lt:n[un]<0||n[un]>999?un:-1,oe(e)._overflowDayOfYear&&(t<Ze||t>Mt)&&(t=Mt),oe(e)._overflowWeeks&&t===-1&&(t=Gf),oe(e)._overflowWeekday&&t===-1&&(t=Zf),oe(e).overflow=t),e}var zh=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Wh=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,jh=/Z|[+-]\d\d(?::?\d\d)?/,va=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],kl=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Qh=/^\/?Date\((-?\d+)/i,Kh=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Gh={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Ss(e){var t,n,a=e._i,l=zh.exec(a)||Wh.exec(a),i,r,s,o,u=va.length,d=kl.length;if(l){for(oe(e).iso=!0,t=0,n=u;t<n;t++)if(va[t][1].exec(l[1])){r=va[t][0],i=va[t][2]!==!1;break}if(r==null){e._isValid=!1;return}if(l[3]){for(t=0,n=d;t<n;t++)if(kl[t][1].exec(l[3])){s=(l[2]||" ")+kl[t][0];break}if(s==null){e._isValid=!1;return}}if(!i&&s!=null){e._isValid=!1;return}if(l[4])if(jh.exec(l[4]))o="Z";else{e._isValid=!1;return}e._f=r+(s||"")+(o||""),yi(e)}else e._isValid=!1}function Zh(e,t,n,a,l,i){var r=[Jh(e),fs.indexOf(t),parseInt(n,10),parseInt(a,10),parseInt(l,10)];return i&&r.push(parseInt(i,10)),r}function Jh(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Xh(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function em(e,t,n){if(e){var a=bs.indexOf(e),l=new Date(t[0],t[1],t[2]).getDay();if(a!==l)return oe(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function tm(e,t,n){if(e)return Gh[e];if(t)return 0;var a=parseInt(n,10),l=a%100,i=(a-l)/100;return i*60+l}function Cs(e){var t=Kh.exec(Xh(e._i)),n;if(t){if(n=Zh(t[4],t[3],t[2],t[5],t[6],t[7]),!em(t[1],n,e))return;e._a=n,e._tzm=tm(t[8],t[9],t[10]),e._d=ea.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),oe(e).rfc2822=!0}else e._isValid=!1}function nm(e){var t=Qh.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(Ss(e),e._isValid===!1)delete e._isValid;else return;if(Cs(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:L.createFromInputFallback(e)}L.createFromInputFallback=mt("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Mn(e,t,n){return e!=null?e:t!=null?t:n}function am(e){var t=new Date(L.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function vi(e){var t,n,a=[],l,i,r;if(!e._d){for(l=am(e),e._w&&e._a[Mt]==null&&e._a[Rt]==null&&lm(e),e._dayOfYear!=null&&(r=Mn(e._a[Ze],l[Ze]),(e._dayOfYear>Zn(r)||e._dayOfYear===0)&&(oe(e)._overflowDayOfYear=!0),n=ea(r,0,e._dayOfYear),e._a[Rt]=n.getUTCMonth(),e._a[Mt]=n.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=a[t]=l[t];for(;t<7;t++)e._a[t]=a[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Ye]===24&&e._a[pt]===0&&e._a[Lt]===0&&e._a[un]===0&&(e._nextDay=!0,e._a[Ye]=0),e._d=(e._useUTC?ea:ch).apply(null,a),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ye]=24),e._w&&typeof e._w.d!="undefined"&&e._w.d!==i&&(oe(e).weekdayMismatch=!0)}}function lm(e){var t,n,a,l,i,r,s,o,u;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(i=1,r=4,n=Mn(t.GG,e._a[Ze],ta(Pe(),1,4).year),a=Mn(t.W,1),l=Mn(t.E,1),(l<1||l>7)&&(o=!0)):(i=e._locale._week.dow,r=e._locale._week.doy,u=ta(Pe(),i,r),n=Mn(t.gg,e._a[Ze],u.year),a=Mn(t.w,u.week),t.d!=null?(l=t.d,(l<0||l>6)&&(o=!0)):t.e!=null?(l=t.e+i,(t.e<0||t.e>6)&&(o=!0)):l=i),a<1||a>Vt(n,i,r)?oe(e)._overflowWeeks=!0:o!=null?oe(e)._overflowWeekday=!0:(s=ps(n,a,l,i,r),e._a[Ze]=s.year,e._dayOfYear=s.dayOfYear)}L.ISO_8601=function(){};L.RFC_2822=function(){};function yi(e){if(e._f===L.ISO_8601){Ss(e);return}if(e._f===L.RFC_2822){Cs(e);return}e._a=[],oe(e).empty=!0;var t=""+e._i,n,a,l,i,r,s=t.length,o=0,u,d;for(l=is(e._f,e._locale).match(si)||[],d=l.length,n=0;n<d;n++)i=l[n],a=(t.match(jf(i,e))||[])[0],a&&(r=t.substr(0,t.indexOf(a)),r.length>0&&oe(e).unusedInput.push(r),t=t.slice(t.indexOf(a)+a.length),o+=a.length),Pn[i]?(a?oe(e).empty=!1:oe(e).unusedTokens.push(i),Kf(i,a,e)):e._strict&&!a&&oe(e).unusedTokens.push(i);oe(e).charsLeftOver=s-o,t.length>0&&oe(e).unusedInput.push(t),e._a[Ye]<=12&&oe(e).bigHour===!0&&e._a[Ye]>0&&(oe(e).bigHour=void 0),oe(e).parsedDateParts=e._a.slice(0),oe(e).meridiem=e._meridiem,e._a[Ye]=im(e._locale,e._a[Ye],e._meridiem),u=oe(e).era,u!==null&&(e._a[Ze]=e._locale.erasConvertYear(u,e._a[Ze])),vi(e),gi(e)}function im(e,t,n){var a;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):(e.isPM!=null&&(a=e.isPM(n),a&&t<12&&(t+=12),!a&&t===12&&(t=0)),t)}function rm(e){var t,n,a,l,i,r,s=!1,o=e._f.length;if(o===0){oe(e).invalidFormat=!0,e._d=new Date(NaN);return}for(l=0;l<o;l++)i=0,r=!1,t=ii({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[l],yi(t),li(t)&&(r=!0),i+=oe(t).charsLeftOver,i+=oe(t).unusedTokens.length*10,oe(t).score=i,s?i<a&&(a=i,n=t):(a==null||i<a||r)&&(a=i,n=t,r&&(s=!0));Jt(e,n||t)}function sm(e){if(!e._d){var t=oi(e._i),n=t.day===void 0?t.date:t.day;e._a=ns([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(a){return a&&parseInt(a,10)}),vi(e)}}function om(e){var t=new oa(gi(Ms(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Ms(e){var t=e._i,n=e._f;return e._locale=e._locale||Ut(e._l),t===null||n===void 0&&t===""?Wa({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),_t(t)?new oa(gi(t)):(sa(t)?e._d=t:bt(n)?rm(e):n?yi(e):um(e),li(e)||(e._d=null),e))}function um(e){var t=e._i;at(t)?e._d=new Date(L.now()):sa(t)?e._d=new Date(t.valueOf()):typeof t=="string"?nm(e):bt(t)?(e._a=ns(t.slice(0),function(n){return parseInt(n,10)}),vi(e)):dn(t)?sm(e):Bt(t)?e._d=new Date(t):L.createFromInputFallback(e)}function Ds(e,t,n,a,l){var i={};return(t===!0||t===!1)&&(a=t,t=void 0),(n===!0||n===!1)&&(a=n,n=void 0),(dn(e)&&ai(e)||bt(e)&&e.length===0)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=l,i._l=n,i._i=e,i._f=t,i._strict=a,om(i)}function Pe(e,t,n,a){return Ds(e,t,n,a,!1)}var cm=mt("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Pe.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Wa()}),dm=mt("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Pe.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Wa()});function Ts(e,t){var n,a;if(t.length===1&&bt(t[0])&&(t=t[0]),!t.length)return Pe();for(n=t[0],a=1;a<t.length;++a)(!t[a].isValid()||t[a][e](n))&&(n=t[a]);return n}function fm(){var e=[].slice.call(arguments,0);return Ts("isBefore",e)}function hm(){var e=[].slice.call(arguments,0);return Ts("isAfter",e)}var mm=function(){return Date.now?Date.now():+new Date},Un=["year","quarter","month","week","day","hour","minute","second","millisecond"];function gm(e){var t,n=!1,a,l=Un.length;for(t in e)if(pe(e,t)&&!(Re.call(Un,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(a=0;a<l;++a)if(e[Un[a]]){if(n)return!1;parseFloat(e[Un[a]])!==ue(e[Un[a]])&&(n=!0)}return!0}function vm(){return this._isValid}function ym(){return kt(NaN)}function tl(e){var t=oi(e),n=t.year||0,a=t.quarter||0,l=t.month||0,i=t.week||t.isoWeek||0,r=t.day||0,s=t.hour||0,o=t.minute||0,u=t.second||0,d=t.millisecond||0;this._isValid=gm(t),this._milliseconds=+d+u*1e3+o*6e4+s*1e3*60*60,this._days=+r+i*7,this._months=+l+a*3+n*12,this._data={},this._locale=Ut(),this._bubble()}function ba(e){return e instanceof tl}function Rl(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function pm(e,t,n){var a=Math.min(e.length,t.length),l=Math.abs(e.length-t.length),i=0,r;for(r=0;r<a;r++)(n&&e[r]!==t[r]||!n&&ue(e[r])!==ue(t[r]))&&i++;return i+l}function qs(e,t){G(e,0,0,function(){var n=this.utcOffset(),a="+";return n<0&&(n=-n,a="-"),a+Dt(~~(n/60),2)+t+Dt(~~n%60,2)})}qs("Z",":");qs("ZZ","");Y("Z",Ja);Y("ZZ",Ja);Me(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=pi(Ja,e)});var bm=/([\+\-]|\d\d)/gi;function pi(e,t){var n=(t||"").match(e),a,l,i;return n===null?null:(a=n[n.length-1]||[],l=(a+"").match(bm)||["-",0,0],i=+(l[1]*60)+ue(l[2]),i===0?0:l[0]==="+"?i:-i)}function bi(e,t){var n,a;return t._isUTC?(n=t.clone(),a=(_t(e)||sa(e)?e.valueOf():Pe(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+a),L.updateOffset(n,!1),n):Pe(e).local()}function Ll(e){return-Math.round(e._d.getTimezoneOffset())}L.updateOffset=function(){};function _m(e,t,n){var a=this._offset||0,l;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=pi(Ja,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&t&&(l=Ll(this)),this._offset=e,this._isUTC=!0,l!=null&&this.add(l,"m"),a!==e&&(!t||this._changeInProgress?Es(this,kt(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,L.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?a:Ll(this)}function km(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function wm(e){return this.utcOffset(0,e)}function Sm(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ll(this),"m")),this}function Cm(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=pi(zf,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Mm(e){return this.isValid()?(e=e?Pe(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Dm(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Tm(){if(!at(this._isDSTShifted))return this._isDSTShifted;var e={},t;return ii(e,this),e=Ms(e),e._a?(t=e._isUTC?qt(e._a):Pe(e._a),this._isDSTShifted=this.isValid()&&pm(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function qm(){return this.isValid()?!this._isUTC:!1}function Pm(){return this.isValid()?this._isUTC:!1}function Ps(){return this.isValid()?this._isUTC&&this._offset===0:!1}var $m=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Em=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function kt(e,t){var n=e,a=null,l,i,r;return ba(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:Bt(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(a=$m.exec(e))?(l=a[1]==="-"?-1:1,n={y:0,d:ue(a[Mt])*l,h:ue(a[Ye])*l,m:ue(a[pt])*l,s:ue(a[Lt])*l,ms:ue(Rl(a[un]*1e3))*l}):(a=Em.exec(e))?(l=a[1]==="-"?-1:1,n={y:sn(a[2],l),M:sn(a[3],l),w:sn(a[4],l),d:sn(a[5],l),h:sn(a[6],l),m:sn(a[7],l),s:sn(a[8],l)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(r=Im(Pe(n.from),Pe(n.to)),n={},n.ms=r.milliseconds,n.M=r.months),i=new tl(n),ba(e)&&pe(e,"_locale")&&(i._locale=e._locale),ba(e)&&pe(e,"_isValid")&&(i._isValid=e._isValid),i}kt.fn=tl.prototype;kt.invalid=ym;function sn(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function ar(e,t){var n={};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Im(e,t){var n;return e.isValid()&&t.isValid()?(t=bi(t,e),e.isBefore(t)?n=ar(e,t):(n=ar(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function $s(e,t){return function(n,a){var l,i;return a!==null&&!isNaN(+a)&&(ls(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=a,a=i),l=kt(n,a),Es(this,l,e),this}}function Es(e,t,n,a){var l=t._milliseconds,i=Rl(t._days),r=Rl(t._months);!e.isValid()||(a=a==null?!0:a,r&&ms(e,Ia(e,"Month")+r*n),i&&ss(e,"Date",Ia(e,"Date")+i*n),l&&e._d.setTime(e._d.valueOf()+l*n),a&&L.updateOffset(e,i||r))}var Am=$s(1,"add"),Om=$s(-1,"subtract");function Is(e){return typeof e=="string"||e instanceof String}function xm(e){return _t(e)||sa(e)||Is(e)||Bt(e)||Rm(e)||Nm(e)||e===null||e===void 0}function Nm(e){var t=dn(e)&&!ai(e),n=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],l,i,r=a.length;for(l=0;l<r;l+=1)i=a[l],n=n||pe(e,i);return t&&n}function Rm(e){var t=bt(e),n=!1;return t&&(n=e.filter(function(a){return!Bt(a)&&Is(e)}).length===0),t&&n}function Lm(e){var t=dn(e)&&!ai(e),n=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],l,i;for(l=0;l<a.length;l+=1)i=a[l],n=n||pe(e,i);return t&&n}function Vm(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Bm(e,t){arguments.length===1&&(arguments[0]?xm(arguments[0])?(e=arguments[0],t=void 0):Lm(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Pe(),a=bi(n,this).startOf("day"),l=L.calendarFormat(this,a)||"sameElse",i=t&&(Pt(t[l])?t[l].call(this,n):t[l]);return this.format(i||this.localeData().calendar(l,this,Pe(n)))}function Fm(){return new oa(this)}function Ym(e,t){var n=_t(e)?e:Pe(e);return this.isValid()&&n.isValid()?(t=gt(t)||"millisecond",t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function Um(e,t){var n=_t(e)?e:Pe(e);return this.isValid()&&n.isValid()?(t=gt(t)||"millisecond",t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function Hm(e,t,n,a){var l=_t(e)?e:Pe(e),i=_t(t)?t:Pe(t);return this.isValid()&&l.isValid()&&i.isValid()?(a=a||"()",(a[0]==="("?this.isAfter(l,n):!this.isBefore(l,n))&&(a[1]===")"?this.isBefore(i,n):!this.isAfter(i,n))):!1}function zm(e,t){var n=_t(e)?e:Pe(e),a;return this.isValid()&&n.isValid()?(t=gt(t)||"millisecond",t==="millisecond"?this.valueOf()===n.valueOf():(a=n.valueOf(),this.clone().startOf(t).valueOf()<=a&&a<=this.clone().endOf(t).valueOf())):!1}function Wm(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function jm(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Qm(e,t,n){var a,l,i;if(!this.isValid())return NaN;if(a=bi(e,this),!a.isValid())return NaN;switch(l=(a.utcOffset()-this.utcOffset())*6e4,t=gt(t),t){case"year":i=_a(this,a)/12;break;case"month":i=_a(this,a);break;case"quarter":i=_a(this,a)/3;break;case"second":i=(this-a)/1e3;break;case"minute":i=(this-a)/6e4;break;case"hour":i=(this-a)/36e5;break;case"day":i=(this-a-l)/864e5;break;case"week":i=(this-a-l)/6048e5;break;default:i=this-a}return n?i:ft(i)}function _a(e,t){if(e.date()<t.date())return-_a(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),a=e.clone().add(n,"months"),l,i;return t-a<0?(l=e.clone().add(n-1,"months"),i=(t-a)/(a-l)):(l=e.clone().add(n+1,"months"),i=(t-a)/(l-a)),-(n+i)||0}L.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";L.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Km(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Gm(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?pa(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Pt(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",pa(n,"Z")):pa(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Zm(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",n,a,l,i;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),n="["+e+'("]',a=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",l="-MM-DD[T]HH:mm:ss.SSS",i=t+'[")]',this.format(n+a+l+i)}function Jm(e){e||(e=this.isUtc()?L.defaultFormatUtc:L.defaultFormat);var t=pa(this,e);return this.localeData().postformat(t)}function Xm(e,t){return this.isValid()&&(_t(e)&&e.isValid()||Pe(e).isValid())?kt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function eg(e){return this.from(Pe(),e)}function tg(e,t){return this.isValid()&&(_t(e)&&e.isValid()||Pe(e).isValid())?kt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ng(e){return this.to(Pe(),e)}function As(e){var t;return e===void 0?this._locale._abbr:(t=Ut(e),t!=null&&(this._locale=t),this)}var Os=mt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function xs(){return this._locale}var xa=1e3,$n=60*xa,Na=60*$n,Ns=(365*400+97)*24*Na;function En(e,t){return(e%t+t)%t}function Rs(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-Ns:new Date(e,t,n).valueOf()}function Ls(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-Ns:Date.UTC(e,t,n)}function ag(e){var t,n;if(e=gt(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Ls:Rs,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=En(t+(this._isUTC?0:this.utcOffset()*$n),Na);break;case"minute":t=this._d.valueOf(),t-=En(t,$n);break;case"second":t=this._d.valueOf(),t-=En(t,xa);break}return this._d.setTime(t),L.updateOffset(this,!0),this}function lg(e){var t,n;if(e=gt(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Ls:Rs,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Na-En(t+(this._isUTC?0:this.utcOffset()*$n),Na)-1;break;case"minute":t=this._d.valueOf(),t+=$n-En(t,$n)-1;break;case"second":t=this._d.valueOf(),t+=xa-En(t,xa)-1;break}return this._d.setTime(t),L.updateOffset(this,!0),this}function ig(){return this._d.valueOf()-(this._offset||0)*6e4}function rg(){return Math.floor(this.valueOf()/1e3)}function sg(){return new Date(this.valueOf())}function og(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function ug(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function cg(){return this.isValid()?this.toISOString():null}function dg(){return li(this)}function fg(){return Jt({},oe(this))}function hg(){return oe(this).overflow}function mg(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}G("N",0,0,"eraAbbr");G("NN",0,0,"eraAbbr");G("NNN",0,0,"eraAbbr");G("NNNN",0,0,"eraName");G("NNNNN",0,0,"eraNarrow");G("y",["y",1],"yo","eraYear");G("y",["yy",2],0,"eraYear");G("y",["yyy",3],0,"eraYear");G("y",["yyyy",4],0,"eraYear");Y("N",_i);Y("NN",_i);Y("NNN",_i);Y("NNNN",Mg);Y("NNNNN",Dg);Me(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,a){var l=n._locale.erasParse(e,a,n._strict);l?oe(n).era=l:oe(n).invalidEra=e});Y("y",Vn);Y("yy",Vn);Y("yyy",Vn);Y("yyyy",Vn);Y("yo",Tg);Me(["y","yy","yyy","yyyy"],Ze);Me(["yo"],function(e,t,n,a){var l;n._locale._eraYearOrdinalRegex&&(l=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Ze]=n._locale.eraYearOrdinalParse(e,l):t[Ze]=parseInt(e,10)});function gg(e,t){var n,a,l,i=this._eras||Ut("en")._eras;for(n=0,a=i.length;n<a;++n){switch(typeof i[n].since){case"string":l=L(i[n].since).startOf("day"),i[n].since=l.valueOf();break}switch(typeof i[n].until){case"undefined":i[n].until=1/0;break;case"string":l=L(i[n].until).startOf("day").valueOf(),i[n].until=l.valueOf();break}}return i}function vg(e,t,n){var a,l,i=this.eras(),r,s,o;for(e=e.toUpperCase(),a=0,l=i.length;a<l;++a)if(r=i[a].name.toUpperCase(),s=i[a].abbr.toUpperCase(),o=i[a].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(s===e)return i[a];break;case"NNNN":if(r===e)return i[a];break;case"NNNNN":if(o===e)return i[a];break}else if([r,s,o].indexOf(e)>=0)return i[a]}function yg(e,t){var n=e.since<=e.until?1:-1;return t===void 0?L(e.since).year():L(e.since).year()+(t-e.offset)*n}function pg(){var e,t,n,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),a[e].since<=n&&n<=a[e].until||a[e].until<=n&&n<=a[e].since)return a[e].name;return""}function bg(){var e,t,n,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),a[e].since<=n&&n<=a[e].until||a[e].until<=n&&n<=a[e].since)return a[e].narrow;return""}function _g(){var e,t,n,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),a[e].since<=n&&n<=a[e].until||a[e].until<=n&&n<=a[e].since)return a[e].abbr;return""}function kg(){var e,t,n,a,l=this.localeData().eras();for(e=0,t=l.length;e<t;++e)if(n=l[e].since<=l[e].until?1:-1,a=this.clone().startOf("day").valueOf(),l[e].since<=a&&a<=l[e].until||l[e].until<=a&&a<=l[e].since)return(this.year()-L(l[e].since).year())*n+l[e].offset;return this.year()}function wg(e){return pe(this,"_erasNameRegex")||ki.call(this),e?this._erasNameRegex:this._erasRegex}function Sg(e){return pe(this,"_erasAbbrRegex")||ki.call(this),e?this._erasAbbrRegex:this._erasRegex}function Cg(e){return pe(this,"_erasNarrowRegex")||ki.call(this),e?this._erasNarrowRegex:this._erasRegex}function _i(e,t){return t.erasAbbrRegex(e)}function Mg(e,t){return t.erasNameRegex(e)}function Dg(e,t){return t.erasNarrowRegex(e)}function Tg(e,t){return t._eraYearOrdinalRegex||Vn}function ki(){var e=[],t=[],n=[],a=[],l,i,r=this.eras();for(l=0,i=r.length;l<i;++l)t.push(rt(r[l].name)),e.push(rt(r[l].abbr)),n.push(rt(r[l].narrow)),a.push(rt(r[l].name)),a.push(rt(r[l].abbr)),a.push(rt(r[l].narrow));this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}G(0,["gg",2],0,function(){return this.weekYear()%100});G(0,["GG",2],0,function(){return this.isoWeekYear()%100});function nl(e,t){G(0,[e,e.length],0,t)}nl("gggg","weekYear");nl("ggggg","weekYear");nl("GGGG","isoWeekYear");nl("GGGGG","isoWeekYear");Xe("weekYear","gg");Xe("isoWeekYear","GG");et("weekYear",1);et("isoWeekYear",1);Y("G",Za);Y("g",Za);Y("GG",$e,ot);Y("gg",$e,ot);Y("GGGG",ci,ui);Y("gggg",ci,ui);Y("GGGGG",Ga,Qa);Y("ggggg",Ga,Qa);ca(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,a){t[a.substr(0,2)]=ue(e)});ca(["gg","GG"],function(e,t,n,a){t[a]=L.parseTwoDigitYear(e)});function qg(e){return Vs.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Pg(e){return Vs.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function $g(){return Vt(this.year(),1,4)}function Eg(){return Vt(this.isoWeekYear(),1,4)}function Ig(){var e=this.localeData()._week;return Vt(this.year(),e.dow,e.doy)}function Ag(){var e=this.localeData()._week;return Vt(this.weekYear(),e.dow,e.doy)}function Vs(e,t,n,a,l){var i;return e==null?ta(this,a,l).year:(i=Vt(e,a,l),t>i&&(t=i),Og.call(this,e,t,n,a,l))}function Og(e,t,n,a,l){var i=ps(e,t,n,a,l),r=ea(i.year,0,i.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}G("Q",0,"Qo","quarter");Xe("quarter","Q");et("quarter",7);Y("Q",os);Me("Q",function(e,t){t[Rt]=(ue(e)-1)*3});function xg(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}G("D",["DD",2],"Do","date");Xe("date","D");et("date",9);Y("D",$e);Y("DD",$e,ot);Y("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Me(["D","DD"],Mt);Me("Do",function(e,t){t[Mt]=ue(e.match($e)[0])});var Bs=Ln("Date",!0);G("DDD",["DDDD",3],"DDDo","dayOfYear");Xe("dayOfYear","DDD");et("dayOfYear",4);Y("DDD",Ka);Y("DDDD",us);Me(["DDD","DDDD"],function(e,t,n){n._dayOfYear=ue(e)});function Ng(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}G("m",["mm",2],0,"minute");Xe("minute","m");et("minute",14);Y("m",$e);Y("mm",$e,ot);Me(["m","mm"],pt);var Rg=Ln("Minutes",!1);G("s",["ss",2],0,"second");Xe("second","s");et("second",15);Y("s",$e);Y("ss",$e,ot);Me(["s","ss"],Lt);var Lg=Ln("Seconds",!1);G("S",0,0,function(){return~~(this.millisecond()/100)});G(0,["SS",2],0,function(){return~~(this.millisecond()/10)});G(0,["SSS",3],0,"millisecond");G(0,["SSSS",4],0,function(){return this.millisecond()*10});G(0,["SSSSS",5],0,function(){return this.millisecond()*100});G(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});G(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});G(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});G(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Xe("millisecond","ms");et("millisecond",16);Y("S",Ka,os);Y("SS",Ka,ot);Y("SSS",Ka,us);var Xt,Fs;for(Xt="SSSS";Xt.length<=9;Xt+="S")Y(Xt,Vn);function Vg(e,t){t[un]=ue(("0."+e)*1e3)}for(Xt="S";Xt.length<=9;Xt+="S")Me(Xt,Vg);Fs=Ln("Milliseconds",!1);G("z",0,0,"zoneAbbr");G("zz",0,0,"zoneName");function Bg(){return this._isUTC?"UTC":""}function Fg(){return this._isUTC?"Coordinated Universal Time":""}var P=oa.prototype;P.add=Am;P.calendar=Bm;P.clone=Fm;P.diff=Qm;P.endOf=lg;P.format=Jm;P.from=Xm;P.fromNow=eg;P.to=tg;P.toNow=ng;P.get=Uf;P.invalidAt=hg;P.isAfter=Ym;P.isBefore=Um;P.isBetween=Hm;P.isSame=zm;P.isSameOrAfter=Wm;P.isSameOrBefore=jm;P.isValid=dg;P.lang=Os;P.locale=As;P.localeData=xs;P.max=dm;P.min=cm;P.parsingFlags=fg;P.set=Hf;P.startOf=ag;P.subtract=Om;P.toArray=og;P.toObject=ug;P.toDate=sg;P.toISOString=Gm;P.inspect=Zm;typeof Symbol!="undefined"&&Symbol.for!=null&&(P[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});P.toJSON=cg;P.toString=Km;P.unix=rg;P.valueOf=ig;P.creationData=mg;P.eraName=pg;P.eraNarrow=bg;P.eraAbbr=_g;P.eraYear=kg;P.year=ys;P.isLeapYear=uh;P.weekYear=qg;P.isoWeekYear=Pg;P.quarter=P.quarters=xg;P.month=gs;P.daysInMonth=rh;P.week=P.weeks=gh;P.isoWeek=P.isoWeeks=vh;P.weeksInYear=Ig;P.weeksInWeekYear=Ag;P.isoWeeksInYear=$g;P.isoWeeksInISOWeekYear=Eg;P.date=Bs;P.day=P.days=Ph;P.weekday=$h;P.isoWeekday=Eh;P.dayOfYear=Ng;P.hour=P.hours=Lh;P.minute=P.minutes=Rg;P.second=P.seconds=Lg;P.millisecond=P.milliseconds=Fs;P.utcOffset=_m;P.utc=wm;P.local=Sm;P.parseZone=Cm;P.hasAlignedHourOffset=Mm;P.isDST=Dm;P.isLocal=qm;P.isUtcOffset=Pm;P.isUtc=Ps;P.isUTC=Ps;P.zoneAbbr=Bg;P.zoneName=Fg;P.dates=mt("dates accessor is deprecated. Use date instead.",Bs);P.months=mt("months accessor is deprecated. Use month instead",gs);P.years=mt("years accessor is deprecated. Use year instead",ys);P.zone=mt("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",km);P.isDSTShifted=mt("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Tm);function Yg(e){return Pe(e*1e3)}function Ug(){return Pe.apply(null,arguments).parseZone()}function Ys(e){return e}var be=ri.prototype;be.calendar=Pf;be.longDateFormat=Af;be.invalidDate=xf;be.ordinal=Lf;be.preparse=Ys;be.postformat=Ys;be.relativeTime=Bf;be.pastFuture=Ff;be.set=Tf;be.eras=gg;be.erasParse=vg;be.erasConvertYear=yg;be.erasAbbrRegex=Sg;be.erasNameRegex=wg;be.erasNarrowRegex=Cg;be.months=nh;be.monthsShort=ah;be.monthsParse=ih;be.monthsRegex=oh;be.monthsShortRegex=sh;be.week=dh;be.firstDayOfYear=mh;be.firstDayOfWeek=hh;be.weekdays=Ch;be.weekdaysMin=Dh;be.weekdaysShort=Mh;be.weekdaysParse=qh;be.weekdaysRegex=Ih;be.weekdaysShortRegex=Ah;be.weekdaysMinRegex=Oh;be.isPM=Nh;be.meridiem=Vh;function Ra(e,t,n,a){var l=Ut(),i=qt().set(a,t);return l[n](i,e)}function Us(e,t,n){if(Bt(e)&&(t=e,e=void 0),e=e||"",t!=null)return Ra(e,t,n,"month");var a,l=[];for(a=0;a<12;a++)l[a]=Ra(e,a,n,"month");return l}function wi(e,t,n,a){typeof e=="boolean"?(Bt(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,Bt(t)&&(n=t,t=void 0),t=t||"");var l=Ut(),i=e?l._week.dow:0,r,s=[];if(n!=null)return Ra(t,(n+i)%7,a,"day");for(r=0;r<7;r++)s[r]=Ra(t,(r+i)%7,a,"day");return s}function Hg(e,t){return Us(e,t,"months")}function zg(e,t){return Us(e,t,"monthsShort")}function Wg(e,t,n){return wi(e,t,n,"weekdays")}function jg(e,t,n){return wi(e,t,n,"weekdaysShort")}function Qg(e,t,n){return wi(e,t,n,"weekdaysMin")}en("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=ue(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});L.lang=mt("moment.lang is deprecated. Use moment.locale instead.",en);L.langData=mt("moment.langData is deprecated. Use moment.localeData instead.",Ut);var At=Math.abs;function Kg(){var e=this._data;return this._milliseconds=At(this._milliseconds),this._days=At(this._days),this._months=At(this._months),e.milliseconds=At(e.milliseconds),e.seconds=At(e.seconds),e.minutes=At(e.minutes),e.hours=At(e.hours),e.months=At(e.months),e.years=At(e.years),this}function Hs(e,t,n,a){var l=kt(t,n);return e._milliseconds+=a*l._milliseconds,e._days+=a*l._days,e._months+=a*l._months,e._bubble()}function Gg(e,t){return Hs(this,e,t,1)}function Zg(e,t){return Hs(this,e,t,-1)}function lr(e){return e<0?Math.floor(e):Math.ceil(e)}function Jg(){var e=this._milliseconds,t=this._days,n=this._months,a=this._data,l,i,r,s,o;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=lr(Vl(n)+t)*864e5,t=0,n=0),a.milliseconds=e%1e3,l=ft(e/1e3),a.seconds=l%60,i=ft(l/60),a.minutes=i%60,r=ft(i/60),a.hours=r%24,t+=ft(r/24),o=ft(zs(t)),n+=o,t-=lr(Vl(o)),s=ft(n/12),n%=12,a.days=t,a.months=n,a.years=s,this}function zs(e){return e*4800/146097}function Vl(e){return e*146097/4800}function Xg(e){if(!this.isValid())return NaN;var t,n,a=this._milliseconds;if(e=gt(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+a/864e5,n=this._months+zs(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Vl(this._months)),e){case"week":return t/7+a/6048e5;case"day":return t+a/864e5;case"hour":return t*24+a/36e5;case"minute":return t*1440+a/6e4;case"second":return t*86400+a/1e3;case"millisecond":return Math.floor(t*864e5)+a;default:throw new Error("Unknown unit "+e)}}function ev(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+ue(this._months/12)*31536e6:NaN}function Ht(e){return function(){return this.as(e)}}var tv=Ht("ms"),nv=Ht("s"),av=Ht("m"),lv=Ht("h"),iv=Ht("d"),rv=Ht("w"),sv=Ht("M"),ov=Ht("Q"),uv=Ht("y");function cv(){return kt(this)}function dv(e){return e=gt(e),this.isValid()?this[e+"s"]():NaN}function mn(e){return function(){return this.isValid()?this._data[e]:NaN}}var fv=mn("milliseconds"),hv=mn("seconds"),mv=mn("minutes"),gv=mn("hours"),vv=mn("days"),yv=mn("months"),pv=mn("years");function bv(){return ft(this.days()/7)}var Ot=Math.round,Dn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function _v(e,t,n,a,l){return l.relativeTime(t||1,!!n,e,a)}function kv(e,t,n,a){var l=kt(e).abs(),i=Ot(l.as("s")),r=Ot(l.as("m")),s=Ot(l.as("h")),o=Ot(l.as("d")),u=Ot(l.as("M")),d=Ot(l.as("w")),v=Ot(l.as("y")),y=i<=n.ss&&["s",i]||i<n.s&&["ss",i]||r<=1&&["m"]||r<n.m&&["mm",r]||s<=1&&["h"]||s<n.h&&["hh",s]||o<=1&&["d"]||o<n.d&&["dd",o];return n.w!=null&&(y=y||d<=1&&["w"]||d<n.w&&["ww",d]),y=y||u<=1&&["M"]||u<n.M&&["MM",u]||v<=1&&["y"]||["yy",v],y[2]=t,y[3]=+e>0,y[4]=a,_v.apply(null,y)}function wv(e){return e===void 0?Ot:typeof e=="function"?(Ot=e,!0):!1}function Sv(e,t){return Dn[e]===void 0?!1:t===void 0?Dn[e]:(Dn[e]=t,e==="s"&&(Dn.ss=t-1),!0)}function Cv(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,a=Dn,l,i;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(n=e),typeof t=="object"&&(a=Object.assign({},Dn,t),t.s!=null&&t.ss==null&&(a.ss=t.s-1)),l=this.localeData(),i=kv(this,!n,a,l),n&&(i=l.pastFuture(+this,i)),l.postformat(i)}var wl=Math.abs;function wn(e){return(e>0)-(e<0)||+e}function al(){if(!this.isValid())return this.localeData().invalidDate();var e=wl(this._milliseconds)/1e3,t=wl(this._days),n=wl(this._months),a,l,i,r,s=this.asSeconds(),o,u,d,v;return s?(a=ft(e/60),l=ft(a/60),e%=60,a%=60,i=ft(n/12),n%=12,r=e?e.toFixed(3).replace(/\.?0+$/,""):"",o=s<0?"-":"",u=wn(this._months)!==wn(s)?"-":"",d=wn(this._days)!==wn(s)?"-":"",v=wn(this._milliseconds)!==wn(s)?"-":"",o+"P"+(i?u+i+"Y":"")+(n?u+n+"M":"")+(t?d+t+"D":"")+(l||a||e?"T":"")+(l?v+l+"H":"")+(a?v+a+"M":"")+(e?v+r+"S":"")):"P0D"}var me=tl.prototype;me.isValid=vm;me.abs=Kg;me.add=Gg;me.subtract=Zg;me.as=Xg;me.asMilliseconds=tv;me.asSeconds=nv;me.asMinutes=av;me.asHours=lv;me.asDays=iv;me.asWeeks=rv;me.asMonths=sv;me.asQuarters=ov;me.asYears=uv;me.valueOf=ev;me._bubble=Jg;me.clone=cv;me.get=dv;me.milliseconds=fv;me.seconds=hv;me.minutes=mv;me.hours=gv;me.days=vv;me.weeks=bv;me.months=yv;me.years=pv;me.humanize=Cv;me.toISOString=al;me.toString=al;me.toJSON=al;me.locale=As;me.localeData=xs;me.toIsoString=mt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",al);me.lang=Os;G("X",0,0,"unix");G("x",0,0,"valueOf");Y("x",Za);Y("X",Wf);Me("X",function(e,t,n){n._d=new Date(parseFloat(e)*1e3)});Me("x",function(e,t,n){n._d=new Date(ue(e))});//! moment.js
L.version="2.29.4";Mf(Pe);L.fn=P;L.min=fm;L.max=hm;L.now=mm;L.utc=qt;L.unix=Yg;L.months=Hg;L.isDate=sa;L.locale=en;L.invalid=Wa;L.duration=kt;L.isMoment=_t;L.weekdays=Wg;L.parseZone=Ug;L.localeData=Ut;L.isDuration=ba;L.monthsShort=zg;L.weekdaysMin=Qg;L.defineLocale=mi;L.updateLocale=Uh;L.locales=Hh;L.weekdaysShort=jg;L.normalizeUnits=gt;L.relativeTimeRounding=wv;L.relativeTimeThreshold=Sv;L.calendarFormat=Vm;L.prototype=P;L.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const Mv=it({name:"CustomerOrders",props:["orders","products","stalls"],data:function(){return{}},computed:{merchantOrders:function(){return Object.keys(this.orders).map(e=>({pubkey:e,profile:this.merchantProfile(e),orders:this.orders[e].map(this.enrichOrder)}))}},methods:{enrichOrder:function(e){var n;const t=this.stallForOrder(e);return{...e,stallName:(t==null?void 0:t.name)||"Stall",shippingZone:((n=t==null?void 0:t.shipping)==null?void 0:n.find(a=>a.id===e.shipping_id))||{id:e.shipping_id,name:e.shipping_id},invoice:this.invoiceForOrder(e),products:this.getProductsForOrder(e)}},stallForOrder:function(e){var t;try{const n=e.items&&((t=e.items[0])==null?void 0:t.product_id);if(!n)return;const a=this.products.find(i=>i.id===n);if(!a)return;const l=this.stalls.find(i=>i.id===a.stall_id);return l||void 0}catch(n){console.log(n)}},invoiceForOrder:function(e){var t;try{const n=(t=e==null?void 0:e.payment_options)==null?void 0:t.find(a=>a.type==="ln");return n!=null&&n.link?decode(n.link):void 0}catch(n){console.warn(n)}},merchantProfile:function(e){},getProductsForOrder:function(e){var t;return(t=e==null?void 0:e.items)!=null&&t.length?e.items.map(n=>({...this.products.find(l=>l.id===n.product_id)||{id:n.product_id,name:n.product_id},orderedQuantity:n.quantity})):[]},showInvoice:function(e){var n;if(e.paid)return;const t=(n=e==null?void 0:e.payment_options)==null?void 0:n.find(a=>a.type==="ln").link;!t||this.$emit("show-invoice",t)},formatCurrency:function(e,t){return formatCurrency(e,t)},fromNow:function(e){return e?L(e*1e3).fromNow():""}},created(){}}),Dv=h("strong",null,"No orders!",-1),Tv=["src"],qv=["src"],Pv=["textContent"],$v=["textContent"],Ev=["textContent"],Iv=["textContent"],Av={class:"text-caption text-grey ellipsis-2-lines"},Ov={key:0},xv=["textContent"],Nv=["textContent"],Rv=["textContent"],Lv={class:"text-caption text-grey ellipsis-2-lines"},Vv=["textContent"],Bv=["textContent"],Fv=h("strong",null,"Order ID: ",-1),Yv=["textContent"],Uv=h("strong",null,"Products",-1),Hv=["src"],zv=["src"],Wv={class:"text-caption text-grey ellipsis-2-lines"},jv=h("strong",null,"Shipping Zone: ",-1),Qv=["textContent"],Kv=h("strong",null,"Message: ",-1),Gv=["textContent"],Zv=h("strong",null,"Invoice: ",-1),Jv=["textContent"];function Xv(e,t,n,a,l,i){var r;return _(),B("div",null,[(r=e.merchantOrders)!=null&&r.length?fe("",!0):(_(),U(lt,{key:0,bordered:"",class:"q-mb-md"},{default:f(()=>[c(he,null,{default:f(()=>[Dv]),_:1})]),_:1})),(_(!0),B(Ge,null,nt(e.merchantOrders,s=>(_(),B("div",{key:s.id},[c(lt,{bordered:"",class:"q-mb-md"},{default:f(()=>[c(Qe,null,{default:f(()=>[c(te,{avatar:""},{default:f(()=>[c(yt,null,{default:f(()=>{var o,u;return[(o=s.profile)!=null&&o.picture?(_(),B("img",{key:0,src:(u=s.profile)==null?void 0:u.picture},null,8,Tv)):(_(),B("img",{key:1,src:e.$q.config.staticPath+"/images/blank-avatar.webp"},null,8,qv))]}),_:2},1024)]),_:2},1024),c(te,null,{default:f(()=>[c(re,null,{default:f(()=>{var o;return[h("strong",null,[h("span",{textContent:H((o=s.profile)==null?void 0:o.name)},null,8,Pv)])]}),_:2},1024),c(re,{caption:""},{default:f(()=>[h("span",{class:"ellipsis-2-lines text-wrap",textContent:H(s.pubkey)},null,8,$v)]),_:2},1024)]),_:2},1024)]),_:2},1024),c(Te),c(he,{class:"col-12"},{default:f(()=>[c(Nt,null,{default:f(()=>[(_(!0),B(Ge,null,nt(s.orders,o=>(_(),B("div",{key:o.id,class:"q-mb-md"},[c(Cf,{dense:"","expand-separator":""},{header:f(()=>[c(te,{class:"q-mt-sm"},{default:f(()=>[c(re,null,{default:f(()=>{var u,d;return[h("strong",null,[h("span",{textContent:H(o.stallName)},null,8,Ev)]),(d=(u=o.invoice)==null?void 0:u.human_readable_part)!=null&&d.amount?(_(),U(Gt,{key:0,onClick:v=>e.showInvoice(o),color:"orange",class:"q-ml-lg gt-sm"},{default:f(()=>{var v,y;return[h("span",{textContent:H(e.formatCurrency(((y=(v=o.invoice)==null?void 0:v.human_readable_part)==null?void 0:y.amount)/1e3,"sat"))},null,8,Iv)]}),_:2},1032,["onClick"])):fe("",!0)]}),_:2},1024),c(re,null,{default:f(()=>[h("div",Av,[o.createdAt?(_(),B("p",Ov,[h("span",{textContent:H(e.fromNow(o.createdAt))},null,8,xv)])):fe("",!0)])]),_:2},1024)]),_:2},1024),c(te,{side:""},{default:f(()=>[c(re,null,{default:f(()=>[c(Gt,{color:o.paid?"green":"grey"},{default:f(()=>[h("span",{textContent:H(o.paid?"Paid":"Not Paid")},null,8,Nv)]),_:2},1032,["color"]),c(Gt,{color:o.shipped?"green":"grey",class:"q-ml-md"},{default:f(()=>[h("span",{textContent:H(o.shipped?"Shipped":"Not Shipped")},null,8,Rv)]),_:2},1032,["color"])]),_:2},1024),c(re,null,{default:f(()=>{var u,d;return[h("div",Lv,[h("p",null,[h("span",{textContent:H((u=o.items)==null?void 0:u.length)},null,8,Vv),h("span",{textContent:H(((d=o.items)==null?void 0:d.length)===1?"product":"products")},null,8,Bv)])])]}),_:2},1024)]),_:2},1024)]),default:f(()=>[c(Te),c(he,{class:"col-12"},{default:f(()=>[c(te,null,{default:f(()=>[c(re,null,{default:f(()=>[Fv,ne(),h("span",{class:"ellipsis-2-lines text-wrap",textContent:H(o.id)},null,8,Yv)]),_:2},1024)]),_:2},1024)]),_:2},1024),c(Te),c(he,{horizontal:""},{default:f(()=>[c(he,{class:"col-7"},{default:f(()=>[c(te,{class:"q-mt-sm"},{default:f(()=>[c(re,null,{default:f(()=>[Uv]),_:1})]),_:1}),(_(!0),B(Ge,null,nt(o.products,u=>(_(),U(Qe,{key:u.id},{default:f(()=>[c(te,{avatar:""},{default:f(()=>[c(yt,null,{default:f(()=>[u.images&&u.images[0]||u.image?(_(),B("img",{key:0,src:u.images[0]||u.image},null,8,Hv)):(_(),B("img",{key:1,src:e.$q.config.staticPath+"/images/placeholder.png"},null,8,zv))]),_:2},1024)]),_:2},1024),c(te,{class:"q-mt-sm"},{default:f(()=>[c(re),c(re,null,{default:f(()=>[h("strong",null,H(u.orderedQuantity)+" x "+H(u.name),1)]),_:2},1024),c(re,null,{default:f(()=>[h("div",Wv,[h("p",null,H(u.description),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024),c(Te,{vertical:""}),c(he,null,{default:f(()=>[c(te,{class:"q-mt-md q-ml-sm"},{default:f(()=>[c(re,null,{default:f(()=>{var u;return[jv,h("span",{textContent:H(((u=o.shippingZone)==null?void 0:u.name)||"")},null,8,Qv)]}),_:2},1024)]),_:2},1024),o.message?(_(),U(te,{key:0,class:"q-mt-md q-ml-sm"},{default:f(()=>[c(re,null,{default:f(()=>[Kv,h("span",{textContent:H(o.message)},null,8,Gv)]),_:2},1024)]),_:2},1024)):fe("",!0),c(te,{class:"q-mt-md q-ml-sm"},{default:f(()=>[c(re,null,{default:f(()=>{var u,d;return[Zv,(d=(u=o.invoice)==null?void 0:u.human_readable_part)!=null&&d.amount?(_(),U(Gt,{key:0,onClick:v=>e.showInvoice(o),color:"orange",class:"cursor-pointer"},{default:f(()=>{var v,y;return[h("span",{textContent:H(e.formatCurrency(((y=(v=o.invoice)==null?void 0:v.human_readable_part)==null?void 0:y.amount)/1e3,"sat"))},null,8,Jv)]}),_:2},1032,["onClick"])):fe("",!0)]}),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),c(Te,{class:"q-mb-xl"})]),_:2},1024),c(Te)]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))])}var ey=ht(Mv,[["render",Xv]]),ty=Se({name:"QCarouselSlide",props:{...Kr,imgSrc:String},setup(e,{slots:t}){const n=S(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>k("div",{class:"q-carousel__slide",style:n.value},Le(t.default))}});let Hn=0;const ny={fullscreen:Boolean,noRouteFullscreenExit:Boolean},ay=["update:fullscreen","fullscreen"];function ly(){const e=Fe(),{props:t,emit:n,proxy:a}=e;let l,i,r;const s=K(!1);No(e)===!0&&de(()=>a.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&d()}),de(()=>t.fullscreen,v=>{s.value!==v&&o()}),de(s,v=>{n("update:fullscreen",v),n("fullscreen",v)});function o(){s.value===!0?d():u()}function u(){s.value!==!0&&(s.value=!0,r=a.$el.parentNode,r.replaceChild(i,a.$el),document.body.appendChild(a.$el),Hn++,Hn===1&&document.body.classList.add("q-body--fullscreen-mixin"),l={handler:d},Vi.add(l))}function d(){s.value===!0&&(l!==void 0&&(Vi.remove(l),l=void 0),r.replaceChild(a.$el,i),s.value=!1,Hn=Math.max(0,Hn-1),Hn===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),a.$el.scrollIntoView!==void 0&&setTimeout(()=>{a.$el.scrollIntoView()})))}return Wl(()=>{i=document.createElement("span")}),hn(()=>{t.fullscreen===!0&&u()}),Je(d),Object.assign(a,{toggleFullscreen:o,setFullscreen:u,exitFullscreen:d}),{inFullscreen:s,toggleFullscreen:o}}const iy=["top","right","bottom","left"],ry=["regular","flat","outline","push","unelevated"];var sy=Se({name:"QCarousel",props:{...Ft,...Gr,...ny,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>ry.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>iy.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...ay,...Zr],setup(e,{slots:t}){const{proxy:{$q:n}}=Fe(),a=Yt(e,n);let l=null,i;const{updatePanelsList:r,getPanelContent:s,panelDirectives:o,goToPanel:u,previousPanel:d,nextPanel:v,getEnabledPanels:y,panelIndex:g}=Jr(),{inFullscreen:C}=ly(),w=S(()=>C.value!==!0&&e.height!==void 0?{height:e.height}:{}),M=S(()=>e.vertical===!0?"vertical":"horizontal"),T=S(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(C.value===!0?" fullscreen":"")+(a.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${M.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${D.value}`:"")),q=S(()=>{const J=[e.prevIcon||n.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||n.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&n.lang.rtl===!0?J.reverse():J}),p=S(()=>e.navigationIcon||n.iconSet.carousel.navigationIcon),b=S(()=>e.navigationActiveIcon||p.value),D=S(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),V=S(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));de(()=>e.modelValue,()=>{e.autoplay&&E()}),de(()=>e.autoplay,J=>{J?E():l!==null&&(clearTimeout(l),l=null)});function E(){const J=Ro(e.autoplay)===!0?Math.abs(e.autoplay):5e3;l!==null&&clearTimeout(l),l=setTimeout(()=>{l=null,J>=0?v():d()},J)}hn(()=>{e.autoplay&&E()}),Je(()=>{l!==null&&clearTimeout(l)});function $(J,ce){return k("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${J} q-carousel__navigation--${D.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[k("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},y().map(ce))])}function Z(){const J=[];if(e.navigation===!0){const ce=t["navigation-icon"]!==void 0?t["navigation-icon"]:x=>k(Q,{key:"nav"+x.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${x.active===!0?"":"in"}active`,...x.btnProps,onClick:x.onClick}),Ee=i-1;J.push($("buttons",(x,se)=>{const ye=x.props.name,we=g.value===se;return ce({index:se,maxIndex:Ee,name:ye,active:we,btnProps:{icon:we===!0?b.value:p.value,size:"sm",...V.value},onClick:()=>{u(ye)}})}))}else if(e.thumbnails===!0){const ce=e.controlColor!==void 0?` text-${e.controlColor}`:"";J.push($("thumbnails",Ee=>{const x=Ee.props;return k("img",{key:"tmb#"+x.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${x.name===e.modelValue?"":"in"}active`+ce,src:x.imgSrc||x["img-src"],onClick:()=>{u(x.name)}})}))}return e.arrows===!0&&g.value>=0&&((e.infinite===!0||g.value>0)&&J.push(k("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${M.value} absolute flex flex-center`},[k(Q,{icon:q.value[0],...V.value,onClick:d})])),(e.infinite===!0||g.value<i-1)&&J.push(k("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${M.value} absolute flex flex-center`},[k(Q,{icon:q.value[1],...V.value,onClick:v})]))),Rn(t.control,J)}return()=>(i=r(t),k("div",{class:T.value,style:w.value},[Hl("div",{class:"q-carousel__slides-container"},s(),"sl-cont",e.swipeable,()=>o.value)].concat(Z())))}});const oy=it({name:"ProductDetail",props:["product","add-to-cart"],data:function(){return{slide:1}},computed:{},methods:{},created(){}}),uy={class:"row"},cy={class:"col-lg-5 col-md-5 col-sm-12 col-xs-12 q-mt-sm"},dy={key:0,class:"q-pr-md"},fy={key:1,class:"q-pr-md"},hy={class:"col-lg-7 col-md-7 col-sm-12 col-xs-12 q-mt-sm"},my={class:"row"},gy={class:"text-subtitle1 q-mt-sm q-pt-xs"},vy={key:0,class:"text-subtitle1"},yy={class:"q-mt-sm text-weight-bold"},py={key:0},by={class:"text-h6"},_y={class:"q-ml-sm text-grey-6"},ky={key:1},wy={class:"text-h6"},Sy={class:"q-ml-md text-caption text-green-8 text-weight-bolder q-mt-md"},Cy={class:"q-mt-md"};function My(e,t,n,a,l,i){return _(),B("div",uy,[h("div",cy,[e.product.images&&e.product.images[0]?(_(),B("div",dy,[c(sy,{swipeable:"",animated:"",modelValue:e.slide,"onUpdate:modelValue":t[0]||(t[0]=r=>e.slide=r),thumbnails:"",infinite:"",arrows:"","transition-prev":"slide-right","transition-next":"slide-left","navigation-icon":"radio_button_unchecked","control-type":"regular","control-color":"secondary","control-text-color":"white"},{default:f(()=>[(_(!0),B(Ge,null,nt(e.product.images,(r,s)=>(_(),U(ty,{name:s+1,key:s,"img-src":r},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue"])])):(_(),B("div",fy,[c(Gl,{src:e.$q.config.staticPath+"/images/placeholder.png",ratio:16/9},null,8,["src"])]))]),h("div",hy,[c(lt,null,{default:f(()=>[c(he,null,{default:f(()=>[h("div",my,[h("div",{class:Lo(["col-12",e.$q.platform.is.desktop?"":"q-px-md"])},[h("div",gy,H(e.product.name),1),e.product.categories?(_(),B("div",vy,[(_(!0),B(Ge,null,nt(e.product.categories,(r,s)=>(_(),U(ia,{key:s,dense:""},{default:f(()=>[ne(H(r),1)]),_:2},1024))),128))])):fe("",!0),h("div",yy,H(e.product.description),1),h("div",null,[e.product.currency=="sat"?(_(),B("span",py,[h("span",by,H(e.product.price)+" sats",1),h("span",_y,"BTC "+H((e.product.price/1e8).toFixed(8)),1)])):(_(),B("span",ky,[h("span",wy,H(e.product.formatedPrice),1)])),h("span",Sy,H(e.product.quantity>0?`In
                  stock. ${e.product.quantity} left.`:"Out of stock."),1)]),h("div",Cy,[c(Q,{class:"q-mt-md",color:"primary",rounded:"",icon:"shopping_cart",label:"Add to cart",onClick:t[1]||(t[1]=r=>e.$emit("add-to-cart",e.product))})])],2)])]),_:1})]),_:1})])])}var Dy=ht(oy,[["render",My]]);const Ty=it({name:"CustomerStall",components:{ProductCard:es,ProductDetail:Dy},props:["stall","products","product-detail"],data:function(){return{}},computed:{product(){if(this.productDetail)return this.products.find(e=>e.id==this.productDetail)}},methods:{changePageS(e,t){var n;e==="stall"&&(t==null?void 0:t.product)&&((n=document.getElementById("product-focus-area"))==null||n.scrollIntoView()),this.$emit("change-page",e,t)},addToCart(e){this.$emit("add-to-cart",e)}}}),qy=h("div",{id:"product-focus-area"},null,-1),Py={key:0,class:"row"},$y={class:"col-12 auto-width"},Ey={class:"col-12 q-my-lg"},Iy={class:"row q-col-gutter-md"};function Ay(e,t,n,a,l,i){const r=Dl("product-detail"),s=Dl("product-card");return _(),B("div",null,[qy,e.productDetail&&e.product?(_(),B("div",Py,[h("div",$y,[c(r,{product:e.product,onAddToCart:e.addToCart},null,8,["product","onAddToCart"])]),h("div",Ey,[c(Te)])])):fe("",!0),h("div",Iy,[(_(!0),B(Ge,null,nt(e.products,(o,u)=>(_(),B("div",{class:"col-xs-12 col-sm-6 col-md-4 col-lg-3",key:u},[c(s,{product:o,onChangePage:e.changePageS,onAddToCart:e.addToCart,"is-stall":!0},null,8,["product","onChangePage","onAddToCart"])]))),128))])])}var Oy=ht(Ty,[["render",Ay]]);const xy=it({name:"CustomerStallList",props:["stalls"],data:function(){return{showStalls:!0}},watch:{stalls(){this.showProducts=!1,setTimeout(()=>{this.showProducts=!0},0)}},computed:{},methods:{},created(){}}),Ny={key:0,class:"row q-col-gutter-md"},Ry={class:"q-pa-md q-gutter-sm",style:{height:"80px"}},Ly=["src"],Vy={class:"row no-wrap items-center"},By={class:"col text-subtitle2 ellipsis-2-lines"},Fy={class:"text-caption text-green-8 text-weight-bolder q-mt-md"},Yy=["textContent"],Uy=["textContent"],Hy={key:0,class:"text-subtitle1"},zy=["textContent"],Wy={key:1,class:"text-subtitle1"},jy={class:"text-caption text-grey ellipsis-2-lines",style:{"min-height":"40px"}},Qy={class:"q-ml-auto"};function Ky(e,t,n,a,l,i){return e.showStalls?(_(),B("div",Ny,[(_(!0),B(Ge,null,nt(e.stalls,r=>(_(),B("div",{key:r.id,class:"col-xs-12 col-sm-6 col-md-4 col-lg-3"},[c(lt,{class:"card--product"},{default:f(()=>[c(he,{class:"q-pb-xs q-pt-md"},{default:f(()=>[h("div",Ry,[(_(!0),B(Ge,null,nt(r.images,(s,o)=>(_(),U(yt,{key:o,size:"40px",class:"overlapping",style:Vo(`left: ${o*25}px; border: 2px solid white; position: absolute`)},{default:f(()=>[h("img",{src:s},null,8,Ly)]),_:2},1032,["style"]))),128))])]),_:2},1024),c(he,{class:"q-pb-xs q-pt-md"},{default:f(()=>[h("div",Vy,[h("div",By,H(r.name),1)])]),_:2},1024),c(Te),c(he,{class:"q-pl-sm"},{default:f(()=>[h("div",null,[h("span",Fy,[h("span",{textContent:H(r.productCount)},null,8,Yy),ne(" products")]),h("span",{textContent:H(r.currency),class:"float-right"},null,8,Uy)])]),_:2},1024),c(he,{class:"q-pl-sm gt-sm"},{default:f(()=>[r.categories?(_(),B("div",Hy,[c(Kl,{items:r.categories||[],"virtual-scroll-horizontal":""},{default:f(({item:s,index:o})=>[(_(),U(ia,{key:o,dense:""},{default:f(()=>[h("span",{textContent:H(s)},null,8,zy)]),_:2},1024))]),_:2},1032,["items"])])):(_(),B("div",Wy," \xA0 ")),h("div",jy,[h("p",null,H(r.description||""),1)])]),_:2},1024),c(Te),c(fn,null,{default:f(()=>[h("div",Qy,[c(Q,{flat:"",class:"text-weight-bold text-capitalize q-ml-auto float-left",dense:"",color:"primary",onClick:s=>e.$emit("change-page","stall",{stall:r.id})},{default:f(()=>[ne(" Visit Stall ")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024)]))),128))])):fe("",!0)}var Gy=ht(xy,[["render",Ky]]);const Zy=it({name:"ProductFilter",props:["filter","currencies","categories","merchants","profiles","stalls"],data:function(){return{merchantProfiles:[],filterData:{currency:null,priceFrom:0,priceTo:null,categories:[],merchants:[],stalls:[]}}},watch:{categories(e,t){this.filterData.categories=(e||[]).filter(n=>n.selected).map(n=>n.category)}},methods:{clear:function(){this.filterData={currency:null,priceFrom:0,priceTo:null,categories:[],merchants:[],stalls:[]},this.$emit("filter-update",this.filterData)},clearPrice(){this.filterData.currency=null,this.filterData.priceFrom=0,this.filterData.priceTo=null},clearMerchants(){this.filterData.merchants=[]},clearCategories(){this.filterData.categories=[]},clearStalls(){this.filterData.stalls=[]},search:function(){const e={...this.filterData,merchants:this.filterData.merchants.map(t=>t.value),stalls:this.filterData.stalls.map(t=>t.value)};this.$emit("filter-update",e)},mapMerchantProfile(e){const t=this.profiles.find(n=>n.pubkey===e);return t?{label:t.name+` (${e.substring(0,10)}...${e.substring(e.length-10)})`,value:e}:{label:e,value:e}}},created:async function(){console.log("### this.filter",this.filter),this.filterData={...this.filterData,...JSON.parse(JSON.stringify(this.filter||{}))},this.filterData.categories=[...new Set((this.filterData.categories||[]).concat((this.categories||[]).filter(e=>e.selected).map(e=>e.category)))],this.filterData.merchants=(this.filterData.merchants||[]).map(this.mapMerchantProfile),this.filterData.stalls=(this.filterData.stalls||[]).map(e=>{const t=this.stalls.find(n=>n.id===e)||{label:e,value:e};return{label:t.name,value:t.id}}),this.merchantProfiles=this.merchants.map(this.mapMerchantProfile)}}),Jy={class:"row q-mt-md q-ml-md q-pr-md"},Xy={class:"col-md-3 col-sm-12 col-xs-12 q-pt-sm"},ep={class:"col-md-3 col-sm-12 col-xs-12 q-pt-sm q-pl-md"},tp={class:"col-md-3 col-sm-12 col-xs-12 q-pt-sm q-pl-lg"},np={class:"col-md-3 col-sm-12 col-xs-12"},ap={class:"row q-mt-md q-ml-md q-pr-md"},lp={class:"col-9"},ip={class:"col-3"},rp={class:"row q-mt-md q-ml-md q-pr-md"},sp={class:"col-9"},op={class:"col-3"},up={class:"row q-mt-md q-ml-md q-pr-md"},cp={class:"col-9"},dp={class:"col-3"};function fp(e,t,n,a,l,i){return _(),U(lt,null,{default:f(()=>[c(he,null,{default:f(()=>[h("div",Jy,[h("div",Xy,[c(Wn,{options:[...e.currencies].sort(),modelValue:e.filterData.currency,"onUpdate:modelValue":t[0]||(t[0]=r=>e.filterData.currency=r),filled:"",hint:"Only this Currency",label:"Currency"},null,8,["options","modelValue"])]),h("div",ep,[c(He,{modelValue:e.filterData.priceFrom,"onUpdate:modelValue":t[1]||(t[1]=r=>e.filterData.priceFrom=r),type:"number",label:"Price From",hint:"Price Starting At"},null,8,["modelValue"])]),h("div",tp,[c(He,{modelValue:e.filterData.priceTo,"onUpdate:modelValue":t[2]||(t[2]=r=>e.filterData.priceTo=r),type:"number",label:"Price To",hint:"Maximum Price"},null,8,["modelValue"])]),h("div",np,[c(Q,{onClick:t[3]||(t[3]=r=>e.clearPrice()),flat:"",color:"grey",class:"float-right q-mt-sm"},{default:f(()=>[ne(" Clear")]),_:1})])])]),_:1}),c(he,null,{default:f(()=>[h("div",ap,[h("div",lp,[c(Wn,{options:[...e.categories.map(r=>r.category).sort()],modelValue:e.filterData.categories,"onUpdate:modelValue":t[4]||(t[4]=r=>e.filterData.categories=r),filled:"",multiple:"","use-chips":"","stack-label":"",hint:"Any of these Categories",label:"Categories"},null,8,["options","modelValue"])]),h("div",ip,[c(Q,{onClick:t[5]||(t[5]=r=>e.clearCategories()),flat:"",color:"grey",class:"float-right q-mt-sm"},{default:f(()=>[ne(" Clear")]),_:1})])]),h("div",rp,[h("div",sp,[c(Wn,{options:e.merchantProfiles,modelValue:e.filterData.merchants,"onUpdate:modelValue":t[6]||(t[6]=r=>e.filterData.merchants=r),filled:"",multiple:"","use-chips":"","stack-label":"",hint:"Only these Merchant",label:"Merchants"},null,8,["options","modelValue"])]),h("div",op,[c(Q,{onClick:t[7]||(t[7]=r=>e.clearMerchants()),flat:"",color:"grey",class:"float-right q-mt-sm"},{default:f(()=>[ne(" Clear")]),_:1})])]),h("div",up,[h("div",cp,[c(Wn,{options:e.stalls.map(r=>({label:r.name,value:r.id})),modelValue:e.filterData.stalls,"onUpdate:modelValue":t[8]||(t[8]=r=>e.filterData.stalls=r),filled:"",multiple:"","use-chips":"","stack-label":"",hint:"Only these Stalls",label:"Stalls"},null,8,["options","modelValue"])]),h("div",dp,[c(Q,{onClick:t[9]||(t[9]=r=>e.clearStalls()),flat:"",color:"grey",class:"float-right q-mt-sm"},{default:f(()=>[ne(" Clear")]),_:1})])])]),_:1}),c(Te),c(fn,{align:"right"},{default:f(()=>[c(Q,{onClick:t[10]||(t[10]=r=>e.clear()),flat:"",color:"grey"},{default:f(()=>[ne(" Clear All Filters")]),_:1}),c(Q,{onClick:t[11]||(t[11]=r=>e.search()),flat:"",icon:"search",color:"primary",class:"q-mr-md"},{default:f(()=>[ne(" Search ")]),_:1})]),_:1})]),_:1})}var hp=ht(Zy,[["render",fp]]);const mp={class:"row q-mb-md"},gp={class:"col-lg-1 col-md-1 gt-sm"},vp=["src"],yp={class:"col-lg-7 col-md-5 col-12 auto-width"},pp=h("div",{id:"search-text"},null,-1),bp={class:"col-lg-4 col-md-6 col-12"},_p={class:"float-right"},kp=["textContent"],wp=["textContent"],Sp={key:0,class:"gt-sm"},Cp=["textContent","onClick"],Mp=["textContent"],Dp={key:1,class:"row q-mb-sm"},Tp={class:"col-12 text-center"},qp={key:0,class:"absolute-bottom text-subtitle1 text-center"},Pp=["textContent"],$p={class:"row q-mb-sm"},Ep={class:"col-md-10 col-sm-7 auto-width"},Ip=["textContent"],Ap=h("strong",null,"All markets",-1),Op=["textContent"],xp=["textContent"],Np={class:"col-md-2 col-sm-5"},Rp={key:2,class:"row q-mb-sm"},Lp={class:"col-12 text-center"},Vp={key:11},Bp=h("strong",{class:"text-h4"},"Welcome to the Nostr Market!",-1),Fp=h("strong",{class:"text-h5 q-mt-lg"},"In order to start you can:",-1),Yp={class:"text-h6"},Up={class:"text-h6"},Hp={class:"text-h6"},zp=h("code",null,"naddr",-1),Wp={key:12},jp=h("div",{class:"text-h6"},"Account Setup",-1),Qp=h("p",null,"Enter your Nostr private key or generate a new one.",-1),Kp={class:"text-center q-mb-lg"},Gp={key:0,class:"q-my-lg"},Zp=["textContent"],Jp=["href"],Xp={key:0,ratio:1},e0={key:1},t0={class:"row q-mt-lg"},n0=it({name:"MarketPage",components:{MarketConfig:Xr},data:function(){return{account:null,accountMetadata:null,accountDialog:{show:!1,data:{watchOnly:!1,key:null}},relaysData:{},markets:[],shoppingCarts:[],checkoutCart:null,checkoutStall:null,activePage:"market",activeOrderId:null,dmSubscriptions:{},allMarketsSelected:!1,qrCodeDialog:{data:{payment_request:null,message:null},dismissMsg:null,show:!1},groupByStall:!1,relays:new Set,stalls:[],products:[],orders:{},profiles:[],bannerImage:null,logoImage:null,isLoading:!1,showFilterDetails:!1,searchText:null,filterData:{categories:[]},activeMarket:null,activeStall:null,activeProduct:null,pool:null,config:{opts:null},defaultBanner:this.$q.config.staticPath+"/images/nostr-cover.png",defaultLogo:this.$q.config.staticPath+"/images/nostr-avatar.png",defaultMarketNaddr:"naddr1qqjrqd3jv9skvwfc956rserz956xyeps94snwd3h95cn2ctr8ymrqdpe89jxzqg5waehxw309aex2mrp0yhxgctdw4eju6t0qyv8wumn8ghj7un9d3shjtnndehhyapwwdhkx6tpdsq36amnwvaz7tmwdaehgu3dwp6kytnhv4kxcmmjv3jhytnwv46qzxthwden5te0dehhxarj9eax2cn9v3jk2tnrd3hh2eqpramhxue69uhkummnw3ezuampd3kx2ar0veekzar0wd5xjtnrdaksyg96ypff6u56q9tk99qnp2kghg5ynuse3v7wdu0xxkurdlggj82gmspsgqqqw4psj5pe0p",readNotes:{merchants:!1,marketUi:!1}}},watch:{config(e,t){var n,a,l,i;(a=(n=e==null?void 0:e.opts)==null?void 0:n.ui)!=null&&a.banner?(this.bannerImage=null,setTimeout(()=>{var r,s;this.bannerImage=this.sanitizeImageSrc((s=(r=e==null?void 0:e.opts)==null?void 0:r.ui)==null?void 0:s.banner,this.defaultBanner)})):this.bannerImage=this.defaultBanner,(i=(l=e==null?void 0:e.opts)==null?void 0:l.ui)!=null&&i.picture?(this.logoImage=null,setTimeout(()=>{var r,s;this.logoImage=this.sanitizeImageSrc((s=(r=e==null?void 0:e.opts)==null?void 0:r.ui)==null?void 0:s.picture,this.defaultLogo)})):this.logoImage=this.defaultLogo},searchText(e,t){if(!!e&&e.toLowerCase().startsWith("naddr"))try{const{type:n,data:a}=NostrTools.nip19.decode(e);if(n!=="naddr"||a.kind!==30019)return;this.$q.dialog(confirm("Do you want to import this market profile?")).onOk(async()=>{this.searchText="",await this.addMarket(e)})}catch{}}},computed:{selectedMarketsMerchants(){return[...new Set(this.markets.filter(e=>e.selected).map(e=>e.opts.merchants).flat())]},filteredProducts(){const e=u=>{var d;return!((d=this.filterData.merchants)!=null&&d.length)||this.filterData.merchants.includes(u)},t=u=>this.selectedMarketsMerchants.includes(u),n=u=>{var d;return!((d=this.filterData.stalls)!=null&&d.length)||this.filterData.stalls.includes(u)},a=u=>!this.filterData.currency||this.filterData.currency.toLowerCase()===u.toLowerCase(),l=u=>!this.filterData.priceFrom||u>=this.filterData.priceFrom,i=u=>!this.filterData.priceTo||u<=this.filterData.priceTo,r=u=>!this.activeStall||u==this.activeStall;let s=this.products.filter(u=>this.hasCategory(u.categories)&&r(u.stall_id)&&e(u.pubkey)&&t(u.pubkey)&&n(u.stall_id)&&a(u.currency)&&l(u.price)&&i(u.price));if(!this.searchText||this.searchText.length<2)return s;const o=this.searchText.toLowerCase();return s.filter(u=>u.name.toLowerCase().includes(o)||u.description&&u.description.toLowerCase().includes(o)||u.categories&&u.categories.toString().toLowerCase().includes(o))},filterCount(){let e=0;return this.filterData.currency&&e++,this.filterData.priceFrom&&e++,this.filterData.priceTo&&e++,this.filterData.categories&&(e+=this.filterData.categories.length),this.filterData.merchants&&(e+=this.filterData.merchants.length),this.filterData.stalls&&(e+=this.filterData.stalls.length),console.log("### fiterCount",e),e},filterStalls(){const e=this.stalls.map(n=>({...n,categories:this.allStallCatgories(n.id),images:this.allStallImages(n.id).slice(0,8),productCount:this.products.filter(a=>a.stall_id===n.id).length})).filter(n=>this.hasCategory(n.categories));if(!this.searchText||this.searchText.length<2)return e;const t=this.searchText.toLowerCase();return this.stalls.filter(n=>n.name.toLowerCase().includes(t)||n.description&&n.description.toLowerCase().includes(t)||n.categories&&n.categories.toString().toLowerCase().includes(t))},marketsName(){var t,n;if(this.activeMarket)return((t=this.activeMarket.opts)==null?void 0:t.name)||"Market";const e=this.markets.filter(a=>a.selected);return e.length===0?"No Market":e.length===1?((n=e[0].opts)==null?void 0:n.name)||"Market":e.length+" Markets"},stallName(){var e;return((e=this.stalls.find(t=>t.id==this.activeStall))==null?void 0:e.name)||"Stall"},productName(){var e;return((e=this.products.find(t=>t.id==this.activeProduct))==null?void 0:e.name)||"Product"},isValidAccountKey(){return isValidKey(this.accountDialog.data.key)},allCartsItemCount(){return this.shoppingCarts.map(e=>e.products).flat().reduce((e,t)=>e+t.orderedQuantity,0)},allCategories(){const t=this.products.map(n=>n.categories).flat().filter(n=>!!n).map(n=>n.toLowerCase()).reduce((n,a)=>(n[a]=(n[a]||0)+1,n),{});return Object.keys(t).map(n=>({category:n,count:t[n],selected:this.filterData.categories.indexOf(n)!==-1})).sort((n,a)=>a.count-n.count)},allCurrencies(){const e=this.products.map(t=>t.currency.toUpperCase());return[...new Set(e)]},allMerchants(){return[...new Set(this.markets.map(e=>e.opts.merchants).flat())]},allRelays(){return[...new Set(this.markets.map(e=>e.relays).flat())]},processedEventIds(){const e=this.stalls.map(n=>n.eventId),t=this.products.map(n=>n.eventId);return e.concat(t)},activeMarketRelaysData(){return this.activeMarket?Object.values(this.relaysData).filter(e=>e&&this.activeMarket.relays.includes(e.relayUrl)):[]}},async created(){this.bannerImage=this.defaultBanner,this.logoImage=this.defaultLogo,this._restoreFromStorage();const e=new URLSearchParams(window.location.search);await this.addMarket(e.get("naddr")),await this._handleQueryParams(e),this.isLoading=!1,this._loadRelaysData()},methods:{async _handleQueryParams(e){e.get("merchant");const t=e.get("stall"),n=e.get("product");t&&(this.setActivePage("customer-stall"),n&&(this.activeProduct=n),this.activeStall=t)},_applyUiConfigs(e={}){const{name:t,about:n,ui:a}=e;this.$q.localStorage.set("nostrmarket.marketplaceConfig",{name:t,about:n,ui:a}),a!=null&&a.theme&&document.body.setAttribute("data-theme",a.theme),this.$q.dark.set(!!(a!=null&&a.darkMode))},handleFilterData(e){console.log("### handleFilterData",e),this.filterData=e,this.setActivePage("market")},async updateUiConfig(e={opts:{}}){var l;const{name:t,about:n,ui:a}=e.opts;this.config={...this.config,opts:{...this.config.opts,name:t,about:n,ui:a}},this._applyUiConfigs((l=this.config)==null?void 0:l.opts)},generateKeyPair(){this.accountDialog.data.key=NostrTools.generatePrivateKey(),this.accountDialog.data.watchOnly=!1},openAccountDialog(){this.accountDialog.show=!0},async createAccount(){if(isValidKey(this.accountDialog.data.key,"nsec")){let{key:e,watchOnly:t}=this.accountDialog.data;if(e.startsWith("n")){let{type:l,data:i}=NostrTools.nip19.decode(e);e=i}const n=t?null:e,a=t?e:NostrTools.getPublicKey(e);this.$q.localStorage.set("nostrmarket.account",{privkey:n,pubkey:a,nsec:NostrTools.nip19.nsecEncode(e),npub:NostrTools.nip19.npubEncode(a),useExtension:!1}),this.accountDialog.data={watchOnly:!1,key:null},this.accountDialog.show=!1,this.account=this.$q.localStorage.getItem("nostrmarket.account")}this.accountDialog.show=!1},logout(){window.localStorage.removeItem("nostrmarket.account"),window.location.href=window.location.origin+window.location.pathname,this.account=null,this.accountMetadata=null},clearAllData(){this.$q.dialog(confirm("This will remove all information about merchants, products, relays and others. You will NOT be logged out. Do you want to proceed?")).onOk(async()=>{this.$q.localStorage.getAllKeys().filter(e=>e!=="nostrmarket.account").forEach(e=>window.localStorage.removeItem(e)),this.orders=[],this.config={opts:null},this.shoppingCarts=[],this.checkoutCart=null,window.location.href=window.location.origin+window.location.pathname})},async _toRelayKey(e){return"relay_"+await hash(e)},async _loadRelaysData(){for(const e of this.markets)for(const t of e.relays)await this._loadRelayData(t,e.opts.merchants);Object.keys(this.relaysData).forEach(this._connectToRelay)},async _loadRelayData(e,t){const n=await this._toRelayKey(e);this.relaysData[n]=this.relaysData[n]||{relayUrl:e,connected:!1,error:null,merchants:[],lastEventAt:this.getLastEventDateForRelay(e)};const a=this.relaysData[n];a.merchants=[...new Set(a.merchants.concat(t))]},getLastEventDateForRelay(e){const t=(this.$q.localStorage.getItem("nostrmarket.relays")||[]).find(n=>n.relayUrl===e);return console.log("### getLastEventForRelay",e,t),(t==null?void 0:t.lastEventAt)||0},async _connectToRelay(e){const t=this.relaysData[e];try{t.relay=NostrTools.relayInit(t.relayUrl),t.relay.on("connect",()=>{t.connected=!0,t.error=null,this._queryRelay(e)}),t.relay.on("error",n=>{console.warn(`Error by relay ${t.relayUrl}`),t.connected=!1,t.error=n}),await t.relay.connect()}catch(n){t.connected=!1,t.error=`${n}`,console.warn(`Failed to connect to ${t.relayUrl}`)}},async _requeryRelay(e){var n;const t=this.relaysData[e];t.connected&&((n=t.sub)==null||n.unsub(),this._queryRelay(e))},_buildRelayFilters(e){var a;const t=e.merchants,n=[{kinds:[0,5,30017,30018],authors:t,since:e.lastEventAt+1}];return(a=this.account)!=null&&a.pubkey&&n.push({kinds:[4],"#p":[this.account.pubkey],since:e.lastEventAt+1},{kinds:[4],authors:[this.account.pubkey],since:e.lastEventAt+1}),n},async _queryRelay(e){const t=this.relaysData[e],n=this._buildRelayFilters(t),a=await t.relay.list(n);console.log("### _queryRelay.events",t.relayUrl,a),a!=null&&a.length&&await this._processEvents(a,t),t.sub=t.relay.sub(n),t.sub.on("event",l=>{this._processEvents([l],t)},{id:"masterSub"})},async _publishEventToRelays(e,t){let n=0;for(const a of t)await this._publishEventToRelay(e,a)&&n++;return n},async _publishEventToRelay(e,t){try{const n=await this._toRelayKey(t),a=this.relaysData[n];return a!=null&&a.connected&&await a.relay.publish(e),!0}catch(n){return console.warn(n),!1}},_findRelaysForMerchant(e){const t=this.markets.filter(n=>n.opts.merchants.includes(e)).map(n=>n.relays).flat();return[...new Set(t)]},_processEvents(e,t){if(!(e!=null&&e.length))return;console.log("### _processEvents",t.relayUrl,e);const n=e.sort((a,l)=>l.created_at-a.created_at)[0].created_at;t.lastEventAt=Math.max(n,t.lastEventAt),e=e.filter(a=>!this.processedEventIds.includes(a.id)).map(a=>({...a,relayUrl:t.relayUrl})).map(eventToObj),e.filter(a=>a.kind===0).forEach(this._processProfileEvents),e.filter(a=>a.kind===4).forEach(this._processDmEvents),e.filter(a=>a.kind===5).forEach(this._processDeleteEvents),e.filter(a=>a.kind===30017).forEach(this._processStallEvents),e.filter(a=>a.kind===30018).forEach(this._processProductEvents),this._persistStallsAndProducts(),this._persistRelaysData()},_processProfileEvents(e){try{this.profiles=this.profiles.filter(t=>t.pubkey!==e.pubkey),this.profiles.push({pubkey:e.pubkey,...e.content}),this.$q.localStorage.set("nostrmarket.profiles",this.profiles)}catch(t){console.warn(t)}},_processStallEvents(e){this._processStall({...e.content,id:e.d,pubkey:e.pubkey,createdAt:e.created_at,eventId:e.id,relayUrls:[e.relayUrl]})},_processStall(e){const t=this.stalls.findIndex(a=>a.id===e.id&&a.pubkey===e.pubkey);if(t===-1){this.stalls.push(e);return}this.stalls[t].createdAt<e.createdAt&&(this.stalls.splice(t,1,e),this.products.filter(a=>a.pubkey===e.pubkey&&a.stall_id===e.id).forEach(a=>a.stallName=e.name))},_processProductEvents(e){const t={...e.content},n=this.stalls.find(a=>a.id==t.stall_id);!n||(t.currency!="sat"&&(t.formatedPrice=this.getAmountFormated(t.price,t.currency)),this._processProduct({...t,stallName:n.name,images:t.images||[t.image],pubkey:e.pubkey,id:e.d,categories:e.t,eventId:e.id,createdAt:e.created_at,relayUrls:[e.relayUrl]}))},_processProduct(e){const t=this.products.findIndex(a=>a.id===e.id&&a.pubkey===e.pubkey);if(t===-1){this.products.push(e);return}const n=this.products[t];n.relayUrls=[...new Set(e.relayUrls.concat(n.relayUrls))],n.createdAt<e.createdAt&&this.products.splice(t,1,e)},async _processDmEvents(e){const t=e.tags.find(([l,i])=>l==="p"&&i&&i!=="")[1],n=e.pubkey===this.account.pubkey;if(t!==this.account.pubkey&&!n){console.warn("Unexpected DM. Dropped!");return}this._persistDMEvent(e);const a=n?t:e.pubkey;await this._handleIncommingDm(e,a)},async _processDeleteEvents(e){const t=(e.tags||[]).filter(i=>i[0]==="e").map(i=>i[1]),n=this.stalls.filter(i=>i.pubkey===e.pubkey&&t.includes(i.eventId)).map(i=>i.id),a=i=>i.pubkey===e.pubkey&&(t.includes(i.eventId)||n.includes(i.stall_id));this.products=this.products.filter(i=>!a(i));const l=i=>i.pubkey===e.pubkey&&t.includes(i.eventId);this.stalls=this.stalls.filter(i=>!l(i))},async createMarket(e){var t;try{this.setActivePage("loading");const n={d:crypto.randomUUID(),pubkey:((t=this.account)==null?void 0:t.pubkey)||"",relays:[...defaultRelays],selected:!0,opts:{name:"New Market",merchants:[]}};this.markets.unshift(n),this.$q.localStorage.set("nostrmarket.markets",this.markets);for(const a of n.relays)await this._handleNewRelay(a,n);e===!0&&this.showMarketConfig(0)}catch(n){console.warn(n)}finally{this.setActivePage("market-config")}},async addMarket(e){if(!!e)try{this.setActivePage("loading");const{type:t,data:n}=NostrTools.nip19.decode(e);if(t!=="naddr"||n.kind!==30019)return;const a={d:n.identifier,pubkey:n.pubkey,relays:n.relays,selected:!0},i=await new NostrTools.SimplePool().get(a.relays,{kinds:[30019],limit:1,authors:[a.pubkey],"#d":[a.d]});if(!i)return;isJson(i.content)&&(a.opts=JSON.parse(i.content),this.$q.dialog(confirm(`Do you want to use the look and feel of the '${a.opts.name}' market?`)).onOk(async()=>{this.config={...this.config,opts:a.opts},this._applyUiConfigs(a==null?void 0:a.opts)})),this.markets=this.markets.filter(r=>r.d!==a.d||r.pubkey!==a.pubkey),this.markets.unshift(a),this.$q.localStorage.set("nostrmarket.markets",this.markets);for(const r of a.relays)await this._handleNewRelay(r,a)}catch(t){console.warn(t)}finally{this.setActivePage("market")}},updateMarket(e){var t,n;try{this.isLoading=!0;const{d:a,pubkey:l}=e,i=this.markets.find(d=>d.d===a&&d.pubkey===l)||{},r=(t=e.opts)==null?void 0:t.merchants.filter(d=>{var v;return!((v=i.opts)!=null&&v.merchants.includes(d))}),s=(n=i.opts)==null?void 0:n.merchants.filter(d=>{var v;return!((v=e.opts)!=null&&v.merchants.includes(d))}),o=e.relays.filter(d=>!i.relays.includes(d)),u=i.relays.filter(d=>!e.relays.includes(d));this.markets=this.markets.filter(d=>d.d!==a||d.pubkey!==l),this.markets.unshift(e),this.$q.localStorage.set("nostrmarket.markets",this.markets),s==null||s.forEach(this._handleRemoveMerchant),r==null||r.forEach(d=>this._handleNewMerchant(e,d)),console.log("### newRelays",o),console.log("### removedRelays",u),o==null||o.forEach(d=>this._handleNewRelay(d,e)),u==null||u.forEach(this._handleRemovedRelay),this._persistStallsAndProducts(),this._persistRelaysData()}catch(a){console.warn(a)}finally{this.isLoading=!1}},deleteMarket(e){try{this.isLoading=!0;const{d:t,pubkey:n}=e;this.markets=this.markets.filter(a=>a.d!==t||a.pubkey!==n),this.$q.localStorage.set("nostrmarket.markets",this.markets),this.activeMarket&&this.activeMarket.d===t&&this.activeMarket.pubkey===n&&(this.activeMarket=null,this.navigateTo("market"),this.updateUiConfig(this.markets[0])),e.opts.merchants.forEach(this._handleRemoveMerchant),e.relays.forEach(this._handleRemovedRelay),this._persistStallsAndProducts(),this._persistRelaysData()}catch(t){console.warn(t)}finally{this.isLoading=!1}},toggleMarket(){this.allMarketsSelected=!this.markets.find(e=>!e.selected),this.$q.localStorage.set("nostrmarket.markets",this.markets)},toggleAllMarkets(){this.markets.forEach(e=>e.selected=this.allMarketsSelected),this.$q.localStorage.set("nostrmarket.markets",this.markets)},showMarketConfig(e){this.activeMarket=this.markets[e],this.transitToPage("market-config")},async publishNaddr(){var o,u,d;if(!((o=this.account)!=null&&o.privkey)){this.openAccountDialog(),this.$q.notify({message:"Login Required!",icon:"warning"});return}const e=[],{name:t,about:n,ui:a}=((u=this.config)==null?void 0:u.opts)||{},l={merchants:e,name:t,about:n,ui:a},i=(d=this.config.identifier)!=null?d:crypto.randomUUID(),r={...await NostrTools.getBlankEvent(),kind:30019,content:JSON.stringify(l),created_at:Math.floor(Date.now()/1e3),tags:[["d",i]],pubkey:this.account.pubkey};r.id=NostrTools.getEventHash(r);try{r.sig=await NostrTools.signEvent(r,this.account.privkey);const v=this.pool.publish(Array.from([]),r);v.on("ok",()=>{console.debug("Config event was sent")}),v.on("failed",y=>{console.error(y)})}catch(v){console.error(v),this.$q.notify({message:"Cannot publish market profile",caption:`Error: ${v}`,color:"negative"});return}const s=NostrTools.nip19.naddrEncode({pubkey:r.pubkey,kind:30019,identifier:i,relays:[]});this.copyText(s)},_handleNewMerchant(e,t){Object.keys(this.relaysData).forEach(async n=>{const a=this.relaysData[n];if(!e.relays.includes(a.relayUrl)||a.merchants.includes(t))return;const l=await a.relay.list([{kinds:[0,30017,30018],authors:[t]}]);await this._processEvents(l,a),a.merchants.push(t),this._requeryRelay(n)})},async _handleNewRelay(e,t){const n=await this._toRelayKey(e);if(this.relaysData[n]){const a=this.relaysData[n],l=await a.relay.list([{kinds:[0,30017,30018],authors:t.opts.merchants}]);await this._processEvents(l,a),a.merchants=[...new Set(a.merchants.concat(t.opts.merchants))],this._requeryRelay(n)}else await this._loadRelayData(e,t.opts.merchants),await this._connectToRelay(n)},_handleRemoveMerchant(e){this.markets.find(n=>n.opts.merchants.find(a=>a===e))||(this.products=this.products.filter(n=>n.pubkey!==e),this.stalls=this.stalls.filter(n=>n.pubkey!==e),this._removeSubscriptionsForMerchant(e))},_removeSubscriptionsForMerchant(e){Object.keys(this.relaysData).forEach(t=>{const n=this.relaysData[t];!n.merchants.includes(e)||(n.merchants=n.merchants.filter(a=>a!==e),this._requeryRelay(t))})},async _handleRemovedRelay(e){if(!this.markets.find(n=>n.relays.find(a=>a===e))){const n=await this._toRelayKey(e);delete this.relaysData[n],this._persistRelaysData()}},addProductToCart(e){let t=this.shoppingCarts.find(a=>a.id===e.stall_id);t||(t={id:e.stall_id,products:[]},this.shoppingCarts.push(t)),t.merchant=e.pubkey;let n=t.products.find(a=>a.id===e.id);n||(n={...e,orderedQuantity:0},t.products.push(n)),n.orderedQuantity=Math.min(n.quantity,e.orderedQuantity||n.orderedQuantity+1),this.$q.localStorage.set("nostrmarket.shoppingCarts",this.shoppingCarts),this.$q.notify({type:"positive",message:"Product added to cart!"})},removeProductFromCart(e){const t=this.shoppingCarts.find(n=>n.id===e.stallId);t&&(t.products=t.products.filter(n=>n.id!==e.productId),t.products.length||(this.shoppingCarts=this.shoppingCarts.filter(n=>n.id!==e.stallId)),this.$q.localStorage.set("nostrmarket.shoppingCarts",this.shoppingCarts))},removeCart(e){this.shoppingCarts=this.shoppingCarts.filter(t=>t.id!==e),this.$q.localStorage.set("nostrmarket.shoppingCarts",this.shoppingCarts)},checkoutStallCart(e){this.checkoutCart=e,this.checkoutStall=this.stalls.find(t=>t.id===e.id),this.setActivePage("shopping-cart-checkout")},async placeOrder({event:e,order:t,cartId:n}){var a;if(!((a=this.account)!=null&&a.privkey)){this.openAccountDialog();return}try{this.activeOrderId=t.id,e.content=await NostrTools.nip04.encrypt(this.account.privkey,this.checkoutStall.pubkey,JSON.stringify(t)),e.id=NostrTools.getEventHash(e),e.sig=await NostrTools.signEvent(e,this.account.privkey),this._sendOrderEvent(e),this._persistOrderUpdate(this.checkoutStall.pubkey,e.created_at,t),this.removeCart(n),this.setActivePage("shopping-cart-list")}catch(l){console.warn(l),this.$q.notify({type:"warning",message:"Failed to place order!"})}},async _sendOrderEvent(e){const t=e.tags.filter(l=>l[0]==="p").map(l=>l[1]),n=this._findRelaysForMerchant(t[0]),a=await this._publishEventToRelays(e,n);this.$q.notify({type:a?"positive":"warning",message:a?`The order has been placed (${a} relays)!`:"Order could not be placed"}),this.qrCodeDialog={data:{payment_request:null,message:null},dismissMsg:null,show:!!a}},_handlePaymentRequest(e){var n;if(e.id&&e.id!==this.activeOrderId)return;if(!((n=e.payment_options)!=null&&n.length)){this.qrCodeDialog.data.message=e.message||"Unexpected error";return}const t=e.payment_options.find(a=>a.type=="ln").link;!t||(this.qrCodeDialog.data.payment_request=t,this.qrCodeDialog.dismissMsg=this.$q.notify({timeout:1e4,message:"Waiting for payment..."}))},_handleOrderStatusUpdate(e){if(e.id&&e.id!==this.activeOrderId)return;this.qrCodeDialog.dismissMsg&&this.qrCodeDialog.dismissMsg(),this.qrCodeDialog.show=!1;const t=e.shipped?"Order shipped":e.paid?"Order paid":"Order notification";this.$q.notify({type:"positive",message:t,caption:e.message||""})},async _handleIncommingDm(e,t){try{const n=await NostrTools.nip04.decrypt(this.account.privkey,t,e.content);if(console.log("### plainText",n),!isJson(n))return;const a=JSON.parse(n);[0,1,2].indexOf(a.type)!==-1&&this._persistOrderUpdate(t,e.created_at,a),a.type===1?this._handlePaymentRequest(a):a.type===2&&this._handleOrderStatusUpdate(a)}catch(n){console.warn("Unable to handle incomming DM",n)}},_restoreFromStorage(){this.markets=this.$q.localStorage.getItem("nostrmarket.markets")||[],this.allMarketsSelected=!this.markets.find(l=>!l.selected),this.shoppingCarts=this.$q.localStorage.getItem("nostrmarket.shoppingCarts")||[],this.profiles=this.$q.localStorage.getItem("nostrmarket.profiles")||[],this.account=this.$q.localStorage.getItem("nostrmarket.account")||null,this.stalls=this.$q.localStorage.getItem("nostrmarket.stalls")||[],this.products=this.$q.localStorage.getItem("nostrmarket.products")||[];const e=this.$q.localStorage.getItem("nostrmarket.marketplaceConfig")||{ui:{darkMode:!1}};this.config={...this.config,opts:{...this.config.opts,...e}},this._applyUiConfigs(this.config.opts);const t="nostrmarket.orders.";this.$q.localStorage.getAllKeys().filter(l=>l.startsWith(t)).forEach(l=>{const i=l.substring(t.length);this.orders[i]=this.$q.localStorage.getItem(l)});const a=this.$q.localStorage.getItem("nostrmarket.readNotes")||{};this.readNotes={...this.readNotes,...a}},_persistStallsAndProducts(){this.$q.localStorage.set("nostrmarket.stalls",this.stalls),this.$q.localStorage.set("nostrmarket.products",this.products)},_persistRelaysData(){this.$q.localStorage.set("nostrmarket.relays",Object.values(this.relaysData).filter(e=>!!e).map(e=>({lastEventAt:e.lastEventAt,relayUrl:e.relayUrl})))},_persistDMEvent(e){const t=this.$q.localStorage.getItem(`nostrmarket.dm.${e.pubkey}`)||{events:[],lastCreatedAt:0};t.events.find(a=>a.id===e.id)||(t.events.push(e),t.events.sort((a,l)=>a-l),t.lastCreatedAt=t.events[t.events.length-1].created_at,this.$q.localStorage.set(`nostrmarket.dm.${e.pubkey}`,t))},_persistOrderUpdate(e,t,n){let a=this.$q.localStorage.getItem(`nostrmarket.orders.${e}`)||[];const l=a.findIndex(r=>r.id===n.id);if(l===-1){a.unshift({...n,eventCreatedAt:t,createdAt:t}),this.orders[e]=a,this.orders={...this.orders},this.$q.localStorage.set(`nostrmarket.orders.${e}`,a);return}let i=a[l];n.type===0?(i.createdAt=t,i={...i,...n,message:i.message||n.message}):i=i.eventCreatedAt<t?{...i,...n}:{...n,...i},a.splice(l,1,i),this.orders[e]=a,this.orders={...this.orders},this.$q.localStorage.set(`nostrmarket.orders.${e}`,a)},navigateTo(e,t={stall:null,product:null,pubkey:null}){var s;console.log("### navigateTo",e,t);const{stall:n,product:a,pubkey:l}=t,i=new URL(window.location),r=l||((s=this.stalls.find(o=>o.id==n))==null?void 0:s.pubkey);i.searchParams.set("merchant",r),e==="stall"||e==="product"?n&&(this.activeStall=n,this.setActivePage("customer-stall"),i.searchParams.set("stall",n),this.activeProduct=a,a?i.searchParams.set("product",a):i.searchParams.delete("product")):(this.activeMarket=null,this.activeStall=null,this.activeProduct=null,i.searchParams.delete("merchant"),i.searchParams.delete("stall"),i.searchParams.delete("product"),this.setActivePage(e)),window.history.pushState({},"",i)},copyUrl:function(){this.copyText(window.location)},copyText:function(e){var t=this.$q.notify;oc(e).then(function(){t({message:"Copied to clipboard!",position:"bottom"})})},getAmountFormated(e,t="USD"){return formatCurrency(e,t)},setActivePage(e="market"){this.activePage=e},transitToPage(e){this.activePage="loading",setTimeout(()=>this.setActivePage(e),100)},showInvoiceQr(e){!e||(this.qrCodeDialog={data:{payment_request:e},dismissMsg:null,show:!0})},toggleCategoryFilter(e){const t=this.filterData.categories.indexOf(e);t===-1?this.filterData.categories.push(e):this.filterData.categories.splice(t,1)},hasCategory(e=[]){var t;if(!((t=this.filterData.categories)!=null&&t.length))return!0;for(const n of e)if(this.filterData.categories.indexOf(n.toLowerCase())!==-1)return!0;return!1},allStallCatgories(e){const t=this.products.filter(n=>n.stall_id===e).map(n=>n.categories).flat().filter(n=>!!n);return Array.from(new Set(t))},allStallImages(e){const t=this.products.filter(n=>n.stall_id===e).map(n=>n.images&&n.images[0]).filter(n=>!!n);return Array.from(new Set(t))},sanitizeImageSrc(e,t){try{if(e)return new URL(e),e}catch{}return t},markNoteAsRead(e){this.readNotes[e]=!0,this.$q.localStorage.set("nostrmarket.readNotes",this.readNotes)},focusOnElement(e){var t;(t=document.getElementById(e))==null||t.scrollIntoView(),this.showFilterDetails=!0}}}),i0=Object.assign(n0,{setup(e){return window.$q=mu(),(t,n)=>(_(),B(Ge,null,[c(du,null,{default:f(()=>{var a,l,i,r;return[h("div",mp,[h("div",gp,[c(yt,{rounded:"",size:"64px",class:"q-ma-none q-pa-none gt-sm"},{default:f(()=>[t.logoImage?(_(),B("img",{key:0,src:t.logoImage},null,8,vp)):fe("",!0)]),_:1})]),h("div",yp,[pp,c(He,{class:"rounded-pill",style:{width:"100%"},rounded:"",outlined:"",clearable:"",modelValue:t.searchText,"onUpdate:modelValue":n[0]||(n[0]=s=>t.searchText=s),modelModifiers:{trim:!0},label:"Filter products, load market profile..."},wr({append:f(()=>[t.searchText?fe("",!0):(_(),U(Ke,{key:0,name:"search"}))]),_:2},[t.showFilterDetails?{name:"label",fn:f(()=>[ne(" Filter or paste a "),c(Gt,{class:"q-px-sm text-subtitle1",color:"secondary"},{default:f(()=>[ne("naddr")]),_:1}),ne(" here ")]),key:"0"}:void 0]),1032,["modelValue"])]),h("div",bp,[h("div",_p,[c(Q,{color:"gray",icon:"travel_explore",flat:"",size:"lg",onClick:n[1]||(n[1]=s=>t.navigateTo("product-filter"))},{default:f(()=>[c(Qt,null,{default:f(()=>[ne("Search for products on Nostr")]),_:1}),t.filterCount?(_(),U(Gt,{key:0,color:"secondary",floating:""},{default:f(()=>[h("span",{textContent:H(t.filterCount)},null,8,kp)]),_:1})):fe("",!0)]),_:1}),c(Q,{onClick:n[2]||(n[2]=s=>t.navigateTo("user-config")),color:"gray",icon:t.account?"perm_identity":"person_add",flat:"",size:"lg"},{default:f(()=>[c(Qt,null,{default:f(()=>[ne("User User Config")]),_:1})]),_:1},8,["icon"]),c(Q,{onClick:n[3]||(n[3]=s=>t.navigateTo("user-chat")),color:"gray",icon:"chat",flat:"",size:"lg"},{default:f(()=>[c(Qt,null,{default:f(()=>[ne("Chat")]),_:1})]),_:1}),c(Q,{onClick:n[4]||(n[4]=s=>t.navigateTo("customer-orders")),color:"gray",icon:"receipt_long",flat:"",size:"lg"},{default:f(()=>[c(Qt,null,{default:f(()=>[ne("Orders")]),_:1})]),_:1}),c(Q,{color:"gray",icon:"shopping_cart",dense:"",round:"",flat:"",size:"lg",onClick:n[5]||(n[5]=s=>t.navigateTo("shopping-cart-list"))},{default:f(()=>[c(Qt,null,{default:f(()=>[ne("Shopping Cart")]),_:1}),t.allCartsItemCount?(_(),U(Gt,{key:0,color:"secondary",floating:""},{default:f(()=>[h("span",{textContent:H(t.allCartsItemCount)},null,8,wp)]),_:1})):fe("",!0)]),_:1})])])]),(a=t.products)!=null&&a.length?(_(),B("div",Sp,[c(Kl,{items:t.allCategories,"virtual-scroll-horizontal":""},{default:f(({item:s,index:o})=>[(_(),U(ia,{key:o,color:s.selected?"grey":"",class:"cursor-pointer q-mb-md"},{default:f(()=>[h("span",{textContent:H(s.category),onClick:u=>t.toggleCategoryFilter(s.category)},null,8,Cp),c(Gt,{onClick:u=>t.toggleCategoryFilter(s.category),rounded:"",class:"q-ml-sm",color:"secondary"},{default:f(()=>[h("span",{textContent:H(s.count)},null,8,Mp)]),_:2},1032,["onClick"])]),_:2},1032,["color"]))]),_:1},8,["items"])])):fe("",!0),t.isLoading?(_(),B("div",Dp,[h("div",Tp,[c(ql,{color:"primary",size:"xl"})])])):fe("",!0),c(iu,{class:"row q-pa-none q-mb-lg gt-sm shadow-2"},{default:f(()=>[t.bannerImage?(_(),U(Gl,{key:0,src:t.bannerImage,class:"rounded-borders",style:{width:"100%",height:"250px"},cover:""},{default:f(()=>{var s,o;return[(o=(s=t.config)==null?void 0:s.opts)!=null&&o.about?(_(),B("div",qp,[h("span",{textContent:H(t.config.opts.about)},null,8,Pp)])):fe("",!0)]}),_:1},8,["src"])):fe("",!0)]),_:1}),h("div",$p,[h("div",Ep,[c(cu,{class:"cursor q-mt-sm q-mr-sm"},{default:f(()=>[c(It,null,{default:f(()=>[c(Q,{onClick:n[6]||(n[6]=s=>t.navigateTo("market")),icon:"home",flat:"",class:"q-pa-none"},{default:f(()=>[h("span",{textContent:H(t.marketsName),class:"q-ml-sm"},null,8,Ip)]),_:1}),c(Ir,{flat:"",class:"q-pl-xs"},{default:f(()=>[c(Nt,null,{default:f(()=>[jt((_(),U(Qe,null,{default:f(()=>[c(te,{side:"",top:""},{default:f(()=>[c(ya,{modelValue:t.allMarketsSelected,"onUpdate:modelValue":n[7]||(n[7]=s=>t.allMarketsSelected=s),onClick:t.toggleAllMarkets},null,8,["modelValue","onClick"])]),_:1}),c(te,null,{default:f(()=>[c(re,null,{default:f(()=>[Ap]),_:1}),c(re,{caption:""},{default:f(()=>[ne("Aggregate all markets into one view")]),_:1})]),_:1}),c(te,{side:"",top:""},{default:f(()=>[jt((_(),U(Q,{onClick:n[8]||(n[8]=s=>t.createMarket(!0)),color:"green",outline:""},{default:f(()=>[ne("New")]),_:1})),[[zn]])]),_:1})]),_:1})),[[zl]]),c(Te),(_(!0),B(Ge,null,nt(t.markets,(s,o)=>(_(),U(Qe,{key:o},{default:f(()=>[c(te,{side:"",top:""},{default:f(()=>[c(ya,{modelValue:s.selected,"onUpdate:modelValue":u=>s.selected=u,onClick:n[9]||(n[9]=u=>t.toggleMarket())},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),c(te,null,{default:f(()=>[c(re,null,{default:f(()=>{var u;return[h("span",{textContent:H(((u=s.opts)==null?void 0:u.name)||"Market")},null,8,Op)]}),_:2},1024),c(re,{caption:""},{default:f(()=>{var u;return[h("span",{textContent:H((u=s.opts)==null?void 0:u.about),class:"ellipsis-2-lines text-wrap"},null,8,xp)]}),_:2},1024)]),_:2},1024),c(te,{side:"",top:""},{default:f(()=>[jt(c(Q,{color:"secondary",flat:"",icon:"settings",onClick:u=>t.showMarketConfig(o)},null,8,["onClick"]),[[zn]])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),t.activePage==="customer-stall"?(_(),U(It,{key:0,label:t.stallName,onClick:n[10]||(n[10]=s=>t.navigateTo("stall",{stall:t.activeStall})),icon:"storefront",class:"cursor-pointer"},null,8,["label"])):fe("",!0),t.activePage==="customer-stall"&&t.activeProduct?(_(),U(It,{key:1,label:t.productName,class:"cursor-pointer",icon:"widgets"},null,8,["label"])):fe("",!0),t.activePage==="shopping-cart-list"?(_(),U(It,{key:2,label:"Shoping Cart",icon:"shopping_cart"})):fe("",!0),t.activePage==="customer-orders"?(_(),U(It,{key:3,label:"Orders",icon:"receipt_long"})):fe("",!0),t.activePage==="market-config"?(_(),U(It,{key:4,label:"Settings",icon:"settings"})):fe("",!0),t.activePage==="product-filter"?(_(),U(It,{key:5,label:"Filter",icon:"travel_explore"})):fe("",!0),t.activePage==="user-config"?(_(),U(It,{key:6,label:"User Config",icon:"perm_identity"})):fe("",!0),t.activePage==="user-chat"?(_(),U(It,{key:7,label:"User Chat",icon:"chat"})):fe("",!0)]),_:1})]),h("div",Np,[t.activePage==="customer-stall"?(_(),U(Q,{key:0,flat:"",color:"grey",icon:"content_copy",onClick:n[11]||(n[11]=s=>t.copyUrl()),class:"float-right"})):t.activePage==="market"&&((l=t.stalls)==null?void 0:l.length)?(_(),U(ya,{key:1,modelValue:t.groupByStall,"onUpdate:modelValue":n[12]||(n[12]=s=>t.groupByStall=s),class:"q-pl-md q-mt-sm float-right",size:"xs",val:"xs",label:"Group by stalls"},null,8,["modelValue"])):fe("",!0)])]),c(Te,{class:"q-mt-sm q-mb-md"}),t.activePage==="loading"?(_(),B("div",Rp,[h("div",Lp,[c(ql,{color:"primary",size:"xl"})])])):fe("",!0),t.activePage==="product-filter"?(_(),U(hp,{key:3,filter:t.filterData,categories:t.allCategories,currencies:t.allCurrencies,merchants:t.allMerchants,stalls:t.stalls,profiles:t.profiles,onFilterUpdate:t.handleFilterData,class:"q-mb-md"},null,8,["filter","categories","currencies","merchants","stalls","profiles","onFilterUpdate"])):t.activeMarket&&t.activePage==="market-config"?(_(),U(Xr,{key:4,market:t.activeMarket,profiles:t.profiles,"relays-data":t.activeMarketRelaysData,"read-notes":t.readNotes,onApplyUi:t.updateUiConfig,onMarketUpdate:t.updateMarket,onDeleteMarket:t.deleteMarket,onPublishNaddr:t.publishNaddr,onNoteRead:t.markNoteAsRead},null,8,["market","profiles","relays-data","read-notes","onApplyUi","onMarketUpdate","onDeleteMarket","onPublishNaddr","onNoteRead"])):t.activePage==="user-config"?(_(),U(Xc,{key:5,account:t.account,onLogin:n[13]||(n[13]=s=>t.accountDialog.show=!0),onLogout:t.logout,onClearAllData:t.clearAllData,onCopyText:t.copyText},null,8,["account","onLogout","onClearAllData","onCopyText"])):t.activePage==="user-chat"?(_(),U(ad,{key:6})):t.activePage==="shopping-cart-list"?(_(),U(gd,{key:7,carts:t.shoppingCarts,profiles:t.profiles,onAddToCart:t.addProductToCart,onRemoveFromCart:t.removeProductFromCart,onRemoveCart:t.removeCart,onCheckoutCart:t.checkoutStallCart},null,8,["carts","profiles","onAddToCart","onRemoveFromCart","onRemoveCart","onCheckoutCart"])):t.activePage==="shopping-cart-checkout"?(_(),U(Jd,{key:8,cart:t.checkoutCart,stall:t.checkoutStall,"customer-pubkey":(i=t.account)==null?void 0:i.pubkey,profiles:t.profiles,onLoginRequired:t.openAccountDialog,onPlaceOrder:t.placeOrder,onChangePage:t.navigateTo},null,8,["cart","stall","customer-pubkey","profiles","onLoginRequired","onPlaceOrder","onChangePage"])):t.activePage==="customer-orders"?(_(),U(ey,{key:9,orders:t.orders,products:t.products,stalls:t.stalls,onShowInvoice:t.showInvoiceQr},null,8,["orders","products","stalls","onShowInvoice"])):t.activePage==="customer-stall"?(_(),U(Oy,{key:10,stall:t.stalls.find(s=>s.id==t.activeStall),products:t.filteredProducts,"product-detail":t.activeProduct,onChangePage:t.navigateTo,onAddToCart:t.addProductToCart},null,8,["stall","products","product-detail","onChangePage","onAddToCart"])):(r=t.markets)!=null&&r.length?(_(),B("div",Wp,[t.groupByStall?(_(),U(Gy,{key:0,stalls:t.filterStalls,onChangePage:t.navigateTo},null,8,["stalls","onChangePage"])):(_(),U(kf,{key:1,"filtered-products":t.filteredProducts,"search-text":t.searchText,"filter-categories":t.filterData.categories,onChangePage:t.navigateTo,onAddToCart:t.addProductToCart},null,8,["filtered-products","search-text","filter-categories","onChangePage","onAddToCart"]))])):(_(),B("div",Vp,[c(Nt,{class:"q-mt-md",bordered:""},{default:f(()=>[c(Qe,null,{default:f(()=>[c(te,{class:"q-mt-sm q-ml-lg"},{default:f(()=>[c(re,null,{default:f(()=>[Bp]),_:1}),c(Te,{class:"q-mb-xl q-mt-md"}),c(re,null,{default:f(()=>[Fp]),_:1})]),_:1})]),_:1}),c(Qe,null,{default:f(()=>[c(te,{class:"q-mt-sm q-ml-lg"},{default:f(()=>[c(re,null,{default:f(()=>[h("ul",null,[h("li",null,[h("span",Yp,[c(Q,{onClick:n[14]||(n[14]=s=>t.addMarket(t.defaultMarketNaddr)),size:"xl",flat:"",color:"secondary",class:"q-mb-xs"},{default:f(()=>[ne("Import")]),_:1}),ne(" a list of popular merchants, or ")])]),h("li",null,[h("span",Up,[c(Q,{onClick:n[15]||(n[15]=s=>t.createMarket(!0)),flat:"",size:"xl",color:"secondary",class:"q-mb-xs"},{default:f(()=>[ne("Add a merchant")]),_:1}),ne(" using its public key, or ")])]),h("li",null,[h("span",Hp,[c(Q,{onClick:n[16]||(n[16]=s=>t.focusOnElement("search-text")),flat:"",size:"xl",color:"secondary",class:"q-mb-xs"},{default:f(()=>[ne("Add a market profile")]),_:1}),ne(" using a shareable "),zp,ne(" identifier ")]),c(He,{class:"rounded-pill",style:{width:"100%"},rounded:"",outlined:"",clearable:"",modelValue:t.searchText,"onUpdate:modelValue":n[17]||(n[17]=s=>t.searchText=s),modelModifiers:{trim:!0},label:"Load market profile (naddr)..."},null,8,["modelValue"])])])]),_:1})]),_:1}),c(te,{side:""})]),_:1})]),_:1})]))]}),_:1}),c(Cl,{modelValue:t.accountDialog.show,"onUpdate:modelValue":n[20]||(n[20]=a=>t.accountDialog.show=a),position:"top"},{default:f(()=>[c(lt,null,{default:f(()=>[c(he,{class:"row"},{default:f(()=>[jp,c(hu)]),_:1}),c(he,null,{default:f(()=>[Qp]),_:1}),c(he,{class:"q-pt-none"},{default:f(()=>[c(He,{dense:"",label:"Nsec/Hex",modelValue:t.accountDialog.data.key,"onUpdate:modelValue":n[18]||(n[18]=a=>t.accountDialog.data.key=a),autofocus:"",onKeyup:Ml(t.createAccount,["enter"]),error:t.accountDialog.data.key&&!t.isValidAccountKey,hint:"Enter you private key"},null,8,["modelValue","onKeyup","error"])]),_:1}),c(fn,{align:"right",class:"text-primary"},{default:f(()=>[t.isValidAccountKey?(_(),U(Q,{key:0,label:"Login",color:"primary",onClick:n[19]||(n[19]=()=>t.createAccount())})):(_(),U(Q,{key:1,flat:"",label:"Generate",onClick:t.generateKeyPair},null,8,["onClick"])),jt((_(),U(Q,{flat:"",color:"grey",class:"q-ml-auto"},{default:f(()=>[ne("Close")]),_:1})),[[zn]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),c(Cl,{modelValue:t.qrCodeDialog.show,"onUpdate:modelValue":n[22]||(n[22]=a=>t.qrCodeDialog.show=a),position:"top"},{default:f(()=>[c(lt,{class:"q-pa-md q-pt-xl"},{default:f(()=>{var a;return[h("div",Kp,[t.qrCodeDialog.data.message?(_(),B("div",Gp,[h("strong",null,[h("span",{textContent:H(t.qrCodeDialog.data.message)},null,8,Zp)])])):(_(),B("a",{key:1,href:"lightning:"+((a=t.qrCodeDialog.data)==null?void 0:a.payment_request)},[t.qrCodeDialog.data.payment_request?(_(),B("div",Xp,[c(Bo(rc),{value:t.qrCodeDialog.data.payment_request,options:{width:340},class:"rounded-borders"},null,8,["value"])])):(_(),B("div",e0,[c(ur,{color:"primary",size:"2.55em"})]))],8,Jp))]),h("div",t0,[t.qrCodeDialog.data.payment_request?(_(),U(Q,{key:0,outline:"",color:"grey",onClick:n[21]||(n[21]=l=>t.copyText(t.qrCodeDialog.data.payment_request))},{default:f(()=>[ne("Copy invoice")]),_:1})):fe("",!0),jt((_(),U(Q,{flat:"",color:"grey",class:"q-ml-auto"},{default:f(()=>[ne("Close")]),_:1})),[[zn]])])]}),_:1})]),_:1},8,["modelValue"])],64))}});export{i0 as default};
